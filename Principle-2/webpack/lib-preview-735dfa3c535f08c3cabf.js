webpackJsonp([12],{"+AyD":function(e,t,n){var r,a,o;!function(i,c){a=[e,n("06Kj"),n("CBRw"),n("roYK")],r=c,void 0!==(o="function"==typeof r?r.apply(t,a):r)&&(e.exports=o)}(0,function(e,t,n,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){var n="data-clipboard-"+e;if(t.hasAttribute(n))return t.getAttribute(n)}var u=a(t),l=a(n),p=a(r),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=function(e){function t(e,n){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.resolveOptions(n),r.listenClick(e),r}return c(t,e),f(t,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===d(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,p.default)(e,"click",function(e){return t.onClick(e)})}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new u.default({action:this.action(t),target:this.target(t),text:this.text(t),container:this.container,trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return s("action",e)}},{key:"defaultTarget",value:function(e){var t=s("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return s("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,n=!!document.queryCommandSupported;return t.forEach(function(e){n=n&&!!document.queryCommandSupported(e)}),n}}]),t}(l.default);e.exports=m})},"+CkV":function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"-1",t=arguments[1];switch(t.type){case i.c:return t.payload.screenID;default:return e}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,layers:[],error:""},t=arguments[1];switch(t.type){case i.b:return Object.assign({},e,{isFetching:!1,layers:t.payload.layers,error:void 0});case i.a:return Object.assign({},e,{isFetching:!1,layers:[],error:t.payload.error});default:return e}}function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,n=arguments[1];switch(n.type){case i.b:case i.a:return Object.assign({},t,(e={},e[n.payload.screenID]=a(t[n.payload],n),e));case"container:layers:clear":return c;default:return t}}var i=n("eWQx"),c={"-1":{isFetching:!1,layers:[],error:""}},s={visibilityScreenID:r,resourceByScreen:o};t.a=s},"+YEV":function(e,t,n){"use strict";var r=n("q8/F"),a=n.n(r),o=n("BSVj"),i=n.n(o),c=n("rwcW"),s=n.n(c),u=n("ttkw"),l=(n.n(u),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),p=function(e){var t=e.layer,n=(t.name,t.top),r=t.left,a=t.width,o=t.height,i=e.currentScreen,c=i.width,u=i.height,l={top:n/u*100+"%"},p={left:"calc("+(r+a)/c*100+"% - 1px)"},d={top:"calc("+(n+o)/u*100+"% - 1px)"},f={left:r/c*100+"%"};return s.a.createElement("ul",{className:"LayerBoundings"},s.a.createElement("li",{className:"LayerBounding LayerBounding--top",style:l}),s.a.createElement("li",{className:"LayerBounding LayerBounding--right",style:p}),s.a.createElement("li",{className:"LayerBounding LayerBounding--bottom",style:d}),s.a.createElement("li",{className:"LayerBounding LayerBounding--left",style:f}))};p.propTypes={layer:i.a.object,currentScreen:i.a.object};var d=function(e,t,n){return n>e&&n<t},f=function(e){var t=e.activeLayer,n=e.enteredLayer,r=e.currentScreen;if(!t||!n||t.id===n.id)return null;var a={horizontal:{line1:[{display:t.left,src:t.src_left},{display:t.left+t.width,src:t.src_left+t.src_width}],line2:[{display:n.left,src:n.src_left},{display:n.left+n.width,src:n.src_left+n.src_width}]},vertical:{line1:[{display:t.top,src:t.src_top},{display:t.top+t.height,src:t.src_top+t.src_height}],line2:[{display:n.top,src:n.src_top},{display:n.top+n.height,src:n.src_top+n.src_height}]}},o={horizontal:[],vertical:[]},i={horizontal:{},vertical:{}};for(var c in a)for(var u=a[c].line1,l=a[c].line2,p=0;p<u.length;p++)for(var f=0;f<l.length;f++){var m=u[p].display>l[f].display?{start:l[f],end:u[p]}:{start:u[p],end:l[f]},h=m.start,v=m.end;d(h.display,v.display,u[1-p].display)||d(h.display,v.display,l[1-f].display)||!(v.display-h.display>0)||h.display===u[0].display&&v.display===u[1].display||h.display===l[0].display&&v.display===l[1].display||i[c][h.display]||(i[c][v.display]=!0,o[c].push({start:h,end:v}))}var y=[],b=r.width,g=r.height;for(var w in o)!function(e){y.push(o[e].map(function(r,a){var o=void 0,i=n.type&&"screen"===n.type?t:n;return o="horizontal"===e?{left:r.start.display/b*100+"%",width:(r.end.display-r.start.display)/b*100+"%",top:(i.height/2+i.top)/g*100+"%"}:{top:r.start.display/g*100+"%",height:(r.end.display-r.start.display)/g*100+"%",left:(i.width/2+i.left)/b*100+"%"},s.a.createElement("li",{key:""+e+a,className:"LayerDistance LayerDistance--"+e,"data-length":r.end.src-r.start.src,style:o})}))}(w);return s.a.createElement("ul",{className:"LayerDistances"},Array.prototype.concat.apply([],y))};f.propTypes={activeLayer:i.a.object,enteredLayer:i.a.object,currentScreen:i.a.object};var m=function(e){var t=e.activeLayer,n=e.enteredLayer,r=e.currentScreen;return s.a.createElement("div",{className:"MeasuresContainer"},s.a.createElement(p,{layer:t,currentScreen:r}),s.a.createElement(f,{activeLayer:t,enteredLayer:n,currentScreen:r}))};m.propTypes={activeLayer:i.a.object,enteredLayer:i.a.object,currentScreen:i.a.object};var h=function(e){var t=e.container.layers,n=t.resourceByScreen,r=t.visibilityScreenID,o=t.activeLayerID,i=t.enteredLayerID,c=e.model,s=c.current.screenCid,u=c.screens,l=n[r];return l?{activeLayer:a()(l.layers,function(e){return e.id===o}),enteredLayer:a()(l.layers,function(e){return e.id===i}),currentScreen:u.find(function(e){return e.cid===s})}:{activeLayer:{},enteredLayer:{},currentScreen:{}}},v=function(e){return l({},h(e))};t.a=Object(u.connect)(v)(m)},"+ZJD":function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},"+knQ":function(e,t,n){"use strict";t.a={prefixAgo:null,prefixFromNow:"从现在开始",suffixAgo:"之前",suffixFromNow:null,seconds:"不到 1 分钟",minute:"大约 1 分钟",minutes:"%d 分钟",hour:"大约 1 小时",hours:"大约 %d 小时",day:"1 天",days:"%d 天",month:"大约 1 个月",months:"%d 月",year:"大约 1 年",years:"%d 年",numbers:[],wordSeparator:""}},"+xZZ":function(e,t,n){"use strict";t.__esModule=!0;var r=n("BSVj"),a=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=a.default.shape({subscribe:a.default.func.isRequired,dispatch:a.default.func.isRequired,getState:a.default.func.isRequired})},"/Kds":function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var n=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},"/MvA":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("rwcW"),c=n.n(i),s=n("BSVj"),u=n.n(s),l=n("Un7v"),p=(n.n(l),n("d/qe")),d=n.n(p),f=n("WCZ4"),m=n("OBe3"),h=(n.n(m),[]),v=Object.assign(document.createElement("div"),{className:"modal-portal"}),y=function(e){return e.stopPropagation()},b=function(e){function t(){var n,o,i;r(this,t);for(var s=arguments.length,u=Array(s),p=0;p<s;p++)u[p]=arguments[p];return n=o=a(this,e.call.apply(e,[this].concat(u))),o.onOpen=function(){h.unshift(o),setTimeout(function(){return o.portal.classList.add("is-open")},50),o.focusOnConfirmBtn(),o.reassignPosiY()},o.onClose=function(){var e=h.indexOf(o);setTimeout(function(){return h.splice(e,1)}),setTimeout(function(){return o.portal.classList.remove("is-open")},50),setTimeout(function(){return Object(l.render)(c.a.createElement("div",null),o.portal)},500)},o.focusOnConfirmBtn=function(){return setTimeout(function(){var e=o.portal.querySelector("footer .confirm-btn");e&&e.focus()},50)},o.listenToKey=function(e){var t=e.key,n=e.target,r=o.props,a=r.isOpen,i=r.canCloseOnEsc,c=r.onClose,s=r.canConfirmOnEnter,u=r.onConfirm,l=r.isOnConfirmDisabled;"Escape"===t&&!n.matches("input, textarea, [type=select]")&&a&&i&&c&&o===h[0]&&c(),"Enter"===t&&!n.matches("textarea")&&a&&s&&u&&!l&&o===h[0]&&u()},o.reassignPosiY=function(){return setTimeout(function(){var e=o.props.type,t=o.portal.querySelector(".modal-mask > div");if(t&&"alert"!==e){var n=window,r=n.innerHeight,a=t.offsetHeight,i=r<=a||(r-a)/2<.2*r?"add":"remove";t.classList[i]("is-posi-centered")}},50)},o.renderRealModal=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.props,t=(e.isOpen,e.type),n=e.title,r=e.className,a=e.maskClassName,i=e.children,s=e.onClose,u=(e.onCloseText,e.canCloseOnClickMask),p=e.onConfirm,d=e.confirmText,m=e.isOnConfirmDisabled,h=e.onCancel,v=e.cancelText,b=e.isOnCancelDisabled,g=e.onDone,w=e.doneText,E=e.isOnDoneDisabled,_="alert"===t||h||p||g,O=c.a.createElement("div",{className:"modal-mask "+a+" "+(u?"can-close":""),onClick:u&&s},c.a.createElement("div",{className:t+"-modal "+r,onClick:y},s&&c.a.createElement("button",{className:"close-btn",onClick:s},c.a.createElement(f.a,{type:"mb",name:"times-circle"})),c.a.createElement("header",null,n),c.a.createElement("div",{className:"content"},i,_&&c.a.createElement("footer",null,h&&c.a.createElement("button",{className:"cancel-btn",onClick:h,disabled:b},v),p&&c.a.createElement("button",{className:"confirm-btn",onClick:p,disabled:m},d),g&&c.a.createElement("button",{className:"done-btn",onClick:g,disabled:E},w)))));Object(l.render)(O,o.portal)},i=n,a(o,i)}return o(t,e),t.prototype.render=function(){return null},t.prototype.componentDidMount=function(){var e=this.props,t=e.isOpen,n=e.portalClassName;Object.assign(this,{portal:v.cloneNode()}),document.body.appendChild(this.portal),this.portal.className+=" "+n,window.addEventListener("resize",this.reassignPosiY),document.addEventListener("keydown",this.listenToKey),t&&(this.renderRealModal(),this.onOpen())},t.prototype.componentWillReceiveProps=function(e){d()(this.props,e)||this.renderRealModal(e);var t=e.isOpen,n=this.props.isOpen;!n&&t?this.onOpen():n&&!t&&this.onClose()},t.prototype.componentWillUnmount=function(){Object(l.unmountComponentAtNode)(this.portal),this.portal&&this.portal.remove(),document.removeEventListener("keydown",this.listenToKey),window.removeEventListener("resize",this.reassignPosiY)},t}(i.PureComponent);b.propTypes={isOpen:u.a.bool,type:u.a.oneOf(["alert","functional","display"]),title:u.a.any,className:u.a.string,maskClassName:u.a.string,portalClassName:u.a.string,onClose:u.a.func,onCloseText:u.a.string,canCloseOnClickMask:u.a.bool,canCloseOnEsc:u.a.bool,canConfirmOnEnter:u.a.bool,onConfirm:u.a.func,confirmText:u.a.string,isOnConfirmDisabled:u.a.bool,onCancel:u.a.func,isOnCancelDisabled:u.a.bool,cancelText:u.a.string,onDone:u.a.func,isOnDoneDisabled:u.a.bool,doneText:u.a.string},b.defaultProps={isOpen:!1,type:"functional",className:"",maskClassName:"",portalClassName:"",onClose:function(){return null},canCloseOnClickMask:!0,canCloseOnEsc:!0,canConfirmOnEnter:!0,onCloseText:I18N.close,confirmText:I18N.confirm,isOnConfirmDisabled:!1,cancelText:I18N.cancel,isOnCancelDisabled:!1,doneText:I18N.done,isOnDoneDisabled:!1},t.a=b},"/ZVB":function(e,t,n){var r,a;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var a=typeof r;if("string"===a||"number"===a)e.push(r);else if(Array.isArray(r))e.push(n.apply(null,r));else if("object"===a)for(var i in r)o.call(r,i)&&r[i]&&e.push(i)}}return e.join(" ")}var o={}.hasOwnProperty;void 0!==e&&e.exports?e.exports=n:(r=[],void 0!==(a=function(){return n}.apply(t,r))&&(e.exports=a))}()},"06Kj":function(e,t,n){var r,a,o;!function(i,c){a=[e,n("a+hI")],r=c,void 0!==(o="function"==typeof r?r.apply(t,a):r)&&(e.exports=o)}(0,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(e){return e&&e.__esModule?e:{default:e}}(t),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){n(this,e),this.resolveOptions(t),this.initSelection()}return o(e,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,r.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,r.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==(void 0===e?"undefined":a(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}();e.exports=i})},"0L5u":function(e,t){e.exports={"editable-span":"_3kZ6Tt9vKO7jl4aGylRTa6","reply-textarea":"_2MMdtZStiVFrqpPWeqIzKH"}},"0SW4":function(e,t){},"0WJ4":function(e,t,n){function r(e,t){var n=t?a(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var a=n("gWPI");e.exports=r},"0oll":function(e,t,n){"use strict";var r=n("rwcW"),a=n.n(r),o=n("Un7v"),i=n.n(o),c=n("ttkw"),s=(n.n(c),n("jBIO")),u=n("wFrT"),l=window,p=l.$;t.a={containerReducerMap:s.b,sagaMap:s.c,extendCallback:function(e){e.setObserver("focus-method:request-focus",d),e.renderPreview=function(t,n){var r=e.store;r.dispatch({type:"entry:refresh:project-related"}),i.a.render(a.a.createElement(c.Provider,{store:r},a.a.createElement(s.a,null)),n),i.a.render(a.a.createElement(u.a.containers.Alert,{store:r}),document.getElementById("preview-alert"))},e.pushData=function(t,n,r){e.store.dispatch({type:"entry:state:push-data",payload:{pushType:t,action:n,data:r}})},e.checkLocationHash=function(){var t=window.location.hash||"",n=e.store,r=n.getState,a=n.dispatch;if(t.startsWith("#thread=")){var o=t.substr("#thread=".length),i=r().model.commentThreads.find(function(e){return e.cid===o});if(!i)return;a({type:"entry:sync-runner:set-screen",payload:{cid:i.screen_cid}}),a({type:"entry:comment:set:active",payload:{isActive:!0}}),a({type:"container:comment:select",payload:{select:i.cid}})}else if(t.startsWith("#screen=")){var c=t.substr("#screen=".length),s=r().model.screens.find(function(e){return e.cid===c});if(!s)return;a({type:"entry:sync-runner:set-screen",payload:{cid:s.cid}})}},e.updateCurrentScreenRunner=function(t){t&&(e.store.dispatch({type:"entry:current:set-screen",payload:t}),window.location.hash="#screen="+t.cid)}}};var d=function(e,t){var n=document.getElementById("simulator-container"),r=t.getBoundingClientRect(),a=n.getBoundingClientRect();if(!(r.top>a.top&&r.bottom<a.bottom)){var o=r.top+.5*r.height-(a.top+.5*a.height),i=o<0?"up":"down",c=document.getElementById("simulator-wrapper"),s=f(i,o,n,a,c.getBoundingClientRect());if(n.scrollTop+=s,0!==(o-=s)){var u=p(".pcanvas.active .widgets")[0],l=p(".pcanvas.active .widgets .scontainer")[0];s=f(i,o,u,u.getBoundingClientRect(),l.getBoundingClientRect()),u.scrollTop+=s}}},f=function(e,t,n,r,a){return"up"===e&&n.scrollTop>0?Math.max(t,0-n.scrollTop):"down"===e&&n.scrollTop<a.height-r.height?Math.min(t,a.bottom-r.bottom):0}},"0uDc":function(e,t,n){"use strict";var r=n("BSVj"),a=n.n(r),o=n("rwcW"),i=n.n(o),c=function(e){var t=e.children;return i.a.createElement("div",null,t)};c.propTypes={children:a.a.element},t.a=c},"0xDb":function(e,t,n){"use strict";function r(e){return e?{hidden:!0}:{}}t.a=r;n("vLgD")},"2QOF":function(e,t,n){function r(e){return"function"!=typeof e.constructor||i(e)?{}:a(o(e))}var a=n("LHpc"),o=n("Bm4+"),i=n("g3n2");e.exports=r},"2V2H":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("oyqu"),a=n("5uQf"),o=n("8jPu"),i=n("AqkX"),c=n("D2tS");n("Te9S");n.d(t,"createStore",function(){return r.b}),n.d(t,"combineReducers",function(){return a.a}),n.d(t,"bindActionCreators",function(){return o.a}),n.d(t,"applyMiddleware",function(){return i.a}),n.d(t,"compose",function(){return c.a})},"2jNP":function(e,t,n){function r(e,t,n){var r=e[t];c.call(e,t)&&o(r,n)&&(void 0!==n||t in e)||a(e,t,n)}var a=n("9mgN"),o=n("iYZG"),i=Object.prototype,c=i.hasOwnProperty;e.exports=r},"3NNp":function(e,t,n){var r=n("9LeU"),a=r("round");e.exports=a},"3Uie":function(e,t,n){"use strict";function r(e){return function(t){return(0,a.bindActionCreators)(e,t)}}t.__esModule=!0,t.default=r;var a=n("2V2H")},"3cSw":function(e,t,n){function r(e,t,n,r,b,g,w){var E=e[n],_=t[n],O=w.get(_);if(O)return void a(e,n,O);var C=g?g(E,_,n+"",e,t,w):void 0,S=void 0===C;if(S){var j=l(_),x=!j&&d(_),k=!j&&!x&&v(_);C=_,j||x||k?l(E)?C=E:p(E)?C=c(E):x?(S=!1,C=o(_,!0)):k?(S=!1,C=i(_,!0)):C=[]:h(_)||u(_)?(C=E,u(E)?C=y(E):(!m(E)||r&&f(E))&&(C=s(_))):S=!1}S&&(w.set(_,C),b(C,_,r,g,w),w.delete(_)),a(e,n,C)}var a=n("pwsn"),o=n("Qhy5"),i=n("0WJ4"),c=n("xLeD"),s=n("2QOF"),u=n("fW1M"),l=n("pkLt"),p=n("JnnA"),d=n("klHs"),f=n("qJ4F"),m=n("Vd22"),h=n("xtak"),v=n("rmhJ"),y=n("Dlmx");e.exports=r},"3wZp":function(e,t,n){"use strict";var r=n("PpJU"),a=(n.n(r),n("DZQR")),o=a.a.Team,i=[],c=Object(r.createStateStore)(i),s=c.getState,u=c.setState,l=c.wrapEntry,p=function(e,t){return l(function(n,r,a){var o=r.dispatch,i=a&&a.payload;o({type:"reducer:teams:update",payload:e(n,i,t)})})},d={"teams:refresh":p(o.refreshStateList,!1),"teams:add":p(o.addState,!1),"teams:add-local":p(o.addState,!0),"teams:update":p(o.updateState,!1),"teams:update-local":p(o.updateState,!0),"teams:delete":p(o.deleteState,!1),"teams:delete-local":p(o.deleteState,!0)};t.a={entryMap:d,getState:s,setState:u}},"4MYk":function(e,t,n){"use strict";function r(e){var t={containerReducerMap:{},viewMap:{},sagaMap:{},extendCallback:null};return e.forEach(function(e){t.containerReducerMap=a(o,t.containerReducerMap,e.containerReducerMap),t.viewMap=a(o,t.viewMap,e.viewMap),t.extendCallback=a(i,t.extendCallback,e.extendCallback),t.sagaMap=a(o,t.sagaMap,e.sagaMap)}),t}function a(e,t,n){return n?t?e(t,n):n:t}function o(e,t){function n(e,t){r[e]=t}var r={};for(var a in e)n(a,e[a]);for(var o in t)n(o,t[o]);return r}function i(e,t){return function(){return e.apply(void 0,arguments),t.apply(void 0,arguments)}}t.a=r},"4vHe":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return v});var i=n("rwcW"),c=n.n(i),s=n("BSVj"),u=n.n(s),l=n("ttkw"),p=(n.n(l),n("V9Vg")),d=n("W7ON"),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n));return o.screenTreeOperations={doShowComment:function(e){o.screenTreeOperations.doSelectScreen(e),o.props.dispatch({type:"entry:comment:set:active",payload:{isActive:!0}})},doSelectScreen:function(e){var t=o.props,n=t.currentScreenCid,r=t.dispatch;n!==e&&r({type:"entry:sync-runner:set-screen",payload:{cid:e}})},doToggleExpand:function(e){var t=o.state.collapseKeySet,n=new Set(t);t.has(e)?n.delete(e):n.add(e),o.setState({collapseKeySet:n})}},o.state={collapseKeySet:new Set},o}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.screenTreeData,n=e.screenCommentThreadCountMap,r=e.currentScreenCid,a=this.state.collapseKeySet,o=h(t,n,r,a,this.screenTreeOperations);return c.a.createElement(d.a,{cid:t.rootCid,level:-1,treeProps:o})},t}(i.PureComponent);m.propTypes={screenTreeData:u.a.object,screenCommentThreadCountMap:u.a.object,currentScreenCid:u.a.string,dispatch:u.a.func};var h=Object(p.a)(function(e,t,n,r,a){return f({screenCommentThreadCountMap:t,currentScreenCid:n,collapseKeySet:r},e,a)}),v=Object(l.connect)(function(e){return{screenTreeData:b(e.model.screens,e.model.current.projectCid),screenCommentThreadCountMap:y(e.model.commentThreads),currentScreenCid:e.model.current.screenCid}})(m),y=Object(p.a)(function(e){return e.reduce(function(e,t){return e[t.screen_cid]=(e[t.screen_cid]||0)+1,e},{})}),b=Object(p.a)(function(e,t){var n,r={},a=(n={},n.null=[],n);return e.forEach(function(e){if(e.project_cid===t){var n=e.cid,o=e.position,i=e.parent_cid||"null";r[n]={cid:n,parentCid:i,position:o,screen:e},void 0===a[i]&&(a[i]=[]),a[i].push(n)}}),Object.values(a).forEach(function(e){return e.sort(function(e,t){return r[e].position-r[t].position})}),{rootCid:"null",nodeMap:r,childListMap:a}})},"537M":function(e,t,n){function r(e,t,n,r,o){var i=a.apply(this,arguments);return e.addEventListener(n,i,o),{destroy:function(){e.removeEventListener(n,i,o)}}}function a(e,t,n,r){return function(n){n.delegateTarget=o(n.target,t),n.delegateTarget&&r.call(e,n)}}var o=n("iRdT");e.exports=r},"5HQq":function(e,t){e.exports={"screen-node-content":"Uuhb0VzPcnrk3zgUGbW_Q"}},"5uQf":function(e,t,n){"use strict";function r(e,t){var n=t&&t.type;return"Given action "+(n&&'"'+n.toString()+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function a(e){Object.keys(e).forEach(function(t){var n=e[t];if(void 0===n(void 0,{type:i.a.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+i.a.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}function o(e){for(var t=Object.keys(e),n={},o=0;o<t.length;o++){var i=t[o];"function"==typeof e[i]&&(n[i]=e[i])}var c=Object.keys(n),s=void 0;try{a(n)}catch(e){s=e}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(s)throw s;for(var a=!1,o={},i=0;i<c.length;i++){var u=c[i],l=n[u],p=e[u],d=l(p,t);if(void 0===d){var f=r(u,t);throw new Error(f)}o[u]=d,a=a||d!==p}return a?o:e}}t.a=o;var i=n("oyqu");n("GKSj"),n("Te9S")},"67MO":function(e,t){function n(e){return e}e.exports=n},"6JlN":function(e,t){e.exports={"comment-marker":"_2DdCe4X_4uBwFVlS753YET"}},"6QCI":function(e,t,n){"use strict";function r(e){e.ScrollSync=a.a,e.TimeoutBucket=o.a,e.EventBucket=i.a,e.RunnerUtil=c.a,e.TransitionUtil=s.a}t.a=r;var a=n("n9+0"),o=n("sS1+"),i=n("iUwf"),c=n("90Mi"),s=n("vj0c")},"77OC":function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(e,t,n){return e[t]!==n?o({},e,a({},t,n)):e},c=function(e,t){if(!(t in e))return e;var n=o({},e);return delete n[t],n},s=function(e,t){for(var n in t){var r=t[n];if(e[n]!==r)return o({},e,t)}return e},u=function(e,t,n){if(e[t]===n)return e;var a=[].concat(r(e));return a[t]=n,a},l=function(e,t){return t>=0&&t<=e.length-1?[].concat(r(e.slice(0,t)),r(e.slice(t+1))):e},p=function(e,t,n){return t=Math.min(Math.max(t,0),e.length),[].concat(r(e.slice(0,t)),[n],r(e.slice(t)))},d=function(e,t){return[].concat(r(e),[t])},f=function(e,t){return[t].concat(r(e))},m=function(e){if(0===e.length)return e;var t=[].concat(r(e));return t.pop(),t},h=function(e){if(0===e.length)return e;var t=[].concat(r(e));return t.shift(),t},v=function(e,t){return t&&t.length?[].concat(r(e),r(t)):e},y=function(e,t){return e.includes(t)?e:[].concat(r(e),[t])},b=function(e,t){var n=e.indexOf(t);return~n?[].concat(r(e.slice(0,n)),r(e.slice(n+1))):e},g=function(e,t,n){t=Math.min(Math.max(t,0),e.length-1);var a=e.indexOf(n);return~a&&a!==t?a<t?[].concat(r(e.slice(0,a)),r(e.slice(a+1,t+1)),[n],r(e.slice(t+1))):[].concat(r(e.slice(0,t)),[n],r(e.slice(t,a)),r(e.slice(a+1))):e},w=function(e,t,n){return void 0===e.find(t)?[].concat(r(e),[n]):e},E=function(e,t){var n=e.findIndex(t);return~n?[].concat(r(e.slice(0,n)),r(e.slice(n+1))):e},_=function(e,t,n){var a=e.findIndex(t),o=e[a];return~a&&a!==n?a<n?[].concat(r(e.slice(0,a)),r(e.slice(a+1,n+1)),[o],r(e.slice(n+1))):[].concat(r(e.slice(0,n)),[o],r(e.slice(n,a)),r(e.slice(a+1))):e},O=function(e,t,n){var a=e.findIndex(t);if(!~a||e[a]===n)return e;var o=[].concat(r(e));return o[a]=n,o},C={objectSet:i,objectDelete:c,objectMerge:s,arraySet:u,arrayDelete:l,arrayInsert:p,arrayPush:d,arrayUnshift:f,arrayPop:m,arrayShift:h,arrayConcat:v,arrayMatchPush:y,arrayMatchDelete:b,arrayMatchMove:g,arrayFindPush:w,arrayFindDelete:E,arrayFindMove:_,arrayFindSet:O};t.Operation=C},"79t3":function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},"804a":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return d});var a=function(e){return e instanceof Array?e:e?[e]:[]},o=function(e){return e.reduce(function(e,t){var n=a(t);return n.length?e.reduce(function(e,t){return n.forEach(function(n){return e.push(t+"-"+n)}),e},[]):e},["@"])},i=function(){function e(){r(this,e),this.permissionMap={}}return e.prototype.set=function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];o(n).forEach(function(t){return e.permissionMap[t]=!0})},e.prototype.check=function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=o(n);return!!a.length&&a.every(function(t){return e.permissionMap[t]})},e}(),c=["owner","admin","editor","viewer","guest"],s=c.reduce(function(e,t,n){return e[t]=n,e},{}),u=function(e){return c.filter(function(t,n){return s[t]<=s[e]})},l=new i,p=l.set.bind(l),d=l.check.bind(l);p("project",["delete","create"],u("owner")),p("project-update",u("editor")),p("project-read-whitelist",u("viewer")),p("project-read",u("guest")),p("team-project-delete",u("admin")),p("team-project-create",u("editor")),p("team-project-read-whitelist",u("viewer")),p("team-project-read",u("guest")),p("collaborator",["delete","create","update"],["editor","viewer"],u("owner")),p("collaborator-read",["editor","viewer"],u("viewer")),p("team-collaborator",["delete","create","update"],["admin"],u("owner")),p("team-collaborator",["delete","create","update"],["editor","viewer"],u("admin")),p("team-collaborator-read",["admin","editor","viewer"],u("viewer"))},"8I+x":function(e,t,n){"use strict";var r=n("PpJU"),a=(n.n(r),n("DZQR")),o=a.a.Widget,i=[],c=Object(r.createStateStore)(i),s=c.getState,u=c.setState,l=c.wrapEntry,p=function(e,t){return l(function(n,r,a){var o=r.dispatch,i=a&&a.payload;o({type:"reducer:widgets:update",payload:e(n,i,t)})})},d={"widgets:refresh":p(o.refreshStateList,!1),"widgets:add":p(o.addState,!1),"widgets:add-local":p(o.addState,!0),"widgets:update":p(o.updateState,!1),"widgets:update-local":p(o.updateState,!0),"widgets:delete":p(o.deleteState,!1),"widgets:delete-local":p(o.deleteState,!0)};t.a={entryMap:d,getState:s,setState:u}},"8jPu":function(e,t,n){"use strict";function r(e,t){return function(){return t(e.apply(void 0,arguments))}}function a(e,t){if("function"==typeof e)return r(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(e),a={},o=0;o<n.length;o++){var i=n[o],c=e[i];"function"==typeof c&&(a[i]=r(c,t))}return a}t.a=a},"9+I2":function(e,t,n){function r(e,t){var n=this.__data__,r=a(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var a=n("wJQI");e.exports=r},"90Mi":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(){r(this,e)}return e.prototype.setObjectUrl=function(e,t){e&&(e.contentWindow?e.contentWindow.location.replace(t):e.setAttribute("data",t))},e.prototype.deviceOrient=function(){return $(window).width()>$(window).height()?"landscape":"portrait"},e.prototype.cloneFixed=function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=n.show().clone();return a.attr("id",a.attr("id")+"gh"),t.v&&a.css("opacity",t.o/100),a.css("top",t.t()),a.hasClass("clickable")&&a.css("pointer-events","auto"),n.hide(),r?(t.isBottomFixed(e)&&(MB.isIOS9()&&this.deviceOrient()===e.orient()?a.css("top",$("#simulator").height()-(e.h()-t.t())+MB.COMPONENTS.status_bar.height):a.css("top",$("#simulator").height()-(e.h()-t.t()))),a):a},e.prototype.setScreenBg=function(e){var t=Screen.find(e.data("cid"));t&&e.css({"background-color":t.bg(),"background-image":t.bgimage?"url("+t.getRealBgImage()+")":""})},e.prototype.screenPreview=function(e){return'\n      <div id="pscreen'+e.cid+'" class="pcanvas '+e.orient()+'" data-cid="'+e.cid+'" data-orientation="'+e.orient()+'">\n      <div class="widgets">\n        <div class="scontainer">\n          <div class="sheader"></div>\n          <div class="sfooter"></div>\n        </div>\n      </div>\n      <div class="stickies"></div>\n    </div>\n    '},e}();t.a=a},"97rj":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t,n){var r=e-n.left,a=t-n.top;return r*r+a*a>=g}n.d(t,"a",function(){return v});var c=n("rwcW"),s=n.n(c),u=n("BSVj"),l=n.n(u),p=n("V9Vg"),d=n("6JlN"),f=n.n(d),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=f.a["comment-marker"],v=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n)),c={isDragging:!1,position:{left:0,top:0}},s=m({},b,{mousemove:Object(p.b)(function(e){var t=o.props,n=t.offsetLeft,r=t.offsetTop,a=t.markerOperations.getMarkerPosition,c=a(e);(o.state.isDragging||i(n,r,c))&&o.setState({isDragging:!0,position:c})}),mouseup:Object(p.b)(function(e){if(d(),o.state.isDragging){var t=o.props,n=t.commentThreadCid,r=t.markerOperations,a=r.doUpdateCommentThread,i=r.getMarkerPosition,s=i(e);a({cid:n,left:s.left,top:s.top})}else setTimeout(function(){var e=o.props,t=e.isSelect,n=e.commentThreadCid;(0,e.markerOperations.setSelectCommentThreadCid)(t?null:n)},0);o.setState(c)}),mouseleave:function(){d(),o.props.markerOperations.setFocusCommentThreadCid(null),o.setState(c)}}),u=m({},b,{mouseup:s.mouseup}),l=function(){return o.props.markerOperations.addContainerEventListener(o.props.isEditable?s:u)},d=function(){return o.props.markerOperations.removeContainerEventListener(o.props.isEditable?s:u)};return o.markerListenerMap={onMouseDown:Object(p.b)(l),onMouseEnter:Object(p.b)(function(){return o.props.markerOperations.setFocusCommentThreadCid(o.props.commentThreadCid)}),onMouseLeave:Object(p.b)(function(){return o.props.markerOperations.setFocusCommentThreadCid(null)}),onMouseUp:y,onDoubleClick:y,onClick:y},o.isFocused=!1,o.setElementRef=function(e){return o.elementRef=e},o.elementRef=null,o.state=c,o}return o(t,e),t.prototype.componentDidUpdate=function(){var e=this.props,t=e.isFocus,n=e.markerOperations.doFocusAtElement;t&&!this.isFocused&&n(this.elementRef),this.isFocused=t},t.prototype.render=function(){var e=this.props,t=e.offsetLeft,n=e.offsetTop,r=e.isFocus,a=e.isFade,o=e.commentMarkerIndex,i=this.state,c=i.isDragging,u=i.position,l=r?"focus":!r&&a?"fade":"",p=c?u:{left:t+"px",top:n+"px"};return s.a.createElement("div",{className:h+" "+l,style:p},s.a.createElement("span",m({ref:this.setElementRef,tabIndex:o},this.markerListenerMap),o))},t}(c.PureComponent);v.propTypes={commentMarkerIndex:l.a.number,commentThreadCid:l.a.string,offsetLeft:l.a.number,offsetTop:l.a.number,isEditable:l.a.bool,isSelect:l.a.bool,isFocus:l.a.bool,isFade:l.a.bool,markerOperations:l.a.object};var y=Object(p.b)(),b={mouseup:y,mousedown:y,mousemove:y,mouseleave:y,mouseout:y,click:y,dblclick:y},g=225},"9A19":function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,n("GKJg"))},"9LeU":function(e,t,n){function r(e){var t=Math[e];return function(e,n){if(e=o(e),n=null==n?0:c(a(n),292)){var r=(i(e)+"e").split("e"),s=t(r[0]+"e"+(+r[1]+n));return r=(i(s)+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return t(e)}}var a=n("ZAXM"),o=n("hBf7"),i=n("uJV2"),c=Math.min;e.exports=r},"9dxh":function(e,t){function n(e,t,n,r){for(var a=e.length,o=n+(r?1:-1);r?o--:++o<a;)if(t(e[o],o,e))return o;return-1}e.exports=n},"9mgN":function(e,t,n){function r(e,t,n){"__proto__"==t&&a?a(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var a=n("ZfTE");e.exports=r},"9x5C":function(e,t,n){var r=n("bl4E"),a=r(Object.keys,Object);e.exports=a},AA2F:function(e,t){e.exports={"comment-thread":"_1X5YGSh4qfeNuRriyAUmfC"}},Am6F:function(e,t){e.exports={"preview-panel":"_972Atke01Y16jEOOPRt5R"}},AqkX:function(e,t,n){"use strict";function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(n,r,i){var c=e(n,r,i),s=c.dispatch,u=[],l={getState:c.getState,dispatch:function(e){return s(e)}};return u=t.map(function(e){return e(l)}),s=a.a.apply(void 0,u)(c.dispatch),o({},c,{dispatch:s})}}}t.a=r;var a=n("D2tS"),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},AxSz:function(e,t,n){"use strict";var r=n("HQOG"),a=n.n(r),o=n("+knQ"),i=n("ZK8R"),c=n.n(i),s=window,u=s.confirm,l=s.alert,p=s.MB,d=s.MBLocale,f=s.I18N,m=s.Team,h=s.Project,v=s.Combo,y=s.Template,b=s.Screen,g=s.Widget,w=s.Collaborator,E=s.Comment,_=s.CommentThread,O=s.$;"zh-CN"===d&&c()(a.a.settings.strings,o.a);var C=window,S={MBLocale:d,parseTimeAgo:function(e){return a()(e)}},j={Team:m,Project:h,Combo:v,Template:y,Screen:b,Collaborator:w,Widget:g,Comment:E,CommentThread:_,requestCid:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")+Math.uuid(10,16)+Date.now()},queueSave:function(){return O("body").trigger("queue:save")},getScreenScale:function(){return O("body").data("scale")}};t.a={Global:C,Storage:p.localStorageDelegate,confirm:function(){return u.apply(void 0,arguments)},alert:function(){return l.apply(void 0,arguments)},MB:p,I18N:f,L10N:S,SpineModel:j}},BC29:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Operation=t.arrayActMap=t.objectActMap=t.ArrayOf=t.ObjectAs=t.ArrayScheme=t.ObjectScheme=t.Scheme=void 0;var r=n("77OC"),a=n("pT6C"),o=n("e9pK");t.Scheme=a.Scheme,t.ObjectScheme=a.ObjectScheme,t.ArrayScheme=a.ArrayScheme,t.ObjectAs=o.ObjectAs,t.ArrayOf=o.ArrayOf,t.objectActMap=o.objectActMap,t.arrayActMap=o.arrayActMap,t.Operation=r.Operation,t.default={Scheme:a.Scheme,ObjectScheme:a.ObjectScheme,ArrayScheme:a.ArrayScheme,ObjectAs:o.ObjectAs,ArrayOf:o.ArrayOf,objectActMap:o.objectActMap,arrayActMap:o.arrayActMap,Operation:r.Operation}},"Bm4+":function(e,t,n){var r=n("bl4E"),a=r(Object.getPrototypeOf,Object);e.exports=a},CBRw:function(e,t){function n(){}n.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function r(){a.off(e,r),t.apply(n,arguments)}var a=this;return r._=t,this.on(e,r,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,a=n.length;for(r;r<a;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],a=[];if(r&&t)for(var o=0,i=r.length;o<i;o++)r[o].fn!==t&&r[o].fn._!==t&&a.push(r[o]);return a.length?n[e]=a:delete n[e],this}},e.exports=n},D1dp:function(e,t,n){function r(e,t,n,r,i,s){var u=n&o,l=a(e),p=l.length;if(p!=a(t).length&&!u)return!1;for(var d=p;d--;){var f=l[d];if(!(u?f in t:c.call(t,f)))return!1}var m=s.get(e);if(m&&s.get(t))return m==t;var h=!0;s.set(e,t),s.set(t,e);for(var v=u;++d<p;){f=l[d];var y=e[f],b=t[f];if(r)var g=u?r(b,y,f,t,e,s):r(y,b,f,e,t,s);if(!(void 0===g?y===b||i(y,b,n,r,s):g)){h=!1;break}v||(v="constructor"==f)}if(h&&!v){var w=e.constructor,E=t.constructor;w!=E&&"constructor"in e&&"constructor"in t&&!("function"==typeof w&&w instanceof w&&"function"==typeof E&&E instanceof E)&&(h=!1)}return s.delete(e),s.delete(t),h}var a=n("uref"),o=1,i=Object.prototype,c=i.hasOwnProperty;e.exports=r},D2tS:function(e,t,n){"use strict";function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}t.a=r},DB2l:function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,o){try{var i=t[a](o),c=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=n("rwcW"),s=n.n(c),u=n("BSVj"),l=n.n(u),p=n("wB9c"),d=n("ZrZW"),f=n("/MvA"),m=n("P63K"),h=n("ZePI"),v=n("s18M"),y=(n.n(v),function(e){function t(){var n,i,c,s=this;a(this,t);for(var u=arguments.length,l=Array(u),d=0;d<u;d++)l[d]=arguments[d];return n=i=o(this,e.call.apply(e,[this].concat(l))),i.refreshQRCode=function(){return $(i.refs.qrcode).empty().qrcode({text:i.qrurl+"?via=qrcode",width:100,height:100})},i.handleSelectAll=function(e){return e.target.select()},i.handleRefresh=r(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.props.dispatch,e.next=3,Object(p.b)({dispatch:t,title:I18N.refresh_token_confirmation});case 3:if(!e.sent){e.next=6;break}n=Math.uuid(31),i.setAttr("access_token",n);case 6:case"end":return e.stop()}},e,s)})),i.handleUpdateShell=function(e){var t=i.props.app;t.shell_type=e,t.lsave(MB.user.id===t.owner_id),$("body").trigger("queue:save"),i.forceUpdate(),MB.currentProject&&MB.runner.reload(!0)},i.handlePasswordChange=function(e){return i.setAttr("password",e.target.value)},i.handleAccess=function(e){"restricted"===e&&(i.props.app.password="",MB.mp("选择了白名单模式")),i.setAttr("access",e)},i.handleCollaborators=function(){return MB.mp("点击了分享窗口的协作者管理按钮")},i.handlePreviewSettings=function(e){var t=i.props.app;Object.assign(t,{highlight:e.has(0),wechat:e.has(1)}),i.props.app.lsave(),$("body").trigger("queue:save"),i.forceUpdate()},i.handleSlackWebHook=function(e){return i.setAttr("slack_web_hook_url",e.target.value)},c=n,o(i,c)}return i(t,e),t.prototype.componentDidMount=function(){setTimeout(this.refreshQRCode,50)},t.prototype.componentWillUpdate=function(){$(this.refs.qrcode).empty()},t.prototype.componentDidUpdate=function(){setTimeout(this.refreshQRCode,50)},t.prototype.setAttr=function(e,t){this.props.app[e]=t,this.props.app.lsave(),$("body").trigger("queue:save"),this.forceUpdate()},t.prototype.render=function(){var e=this.props,t=e.isOpen,n=e.onClose,r=e.app,a=e.dispatch,o=void 0,i=void 0;this.qrurl=o="https://"+location.host+"/app/"+r.access_token,i="https://"+location.host,MB.isLocal()&&"file:"!==location.protocol&&(this.qrurl=o=location.toString());var c=window,u=c.MBServer;"file:"===location.protocol&&(i="https://"+u,this.qrurl=o="https://"+u+"/app/"+r.access_token);var l=/edge.modao.cc/.test(location.href),p='<iframe src="'+i+"/app/"+r.access_token+'/embed" width="'+(r.shell().width+80)+'" height="'+(r.shell().height+80)+'" allowTransparency="true" frameborder="0"></iframe>',v=r.owner_id===MB.user.id,y=v||r.canAdmin(),b=v||r.canEdit(),g=!/^\/app\//i.test(location.pathname),w=[{val:"restricted",name:s.a.createElement("span",{className:"restricted-access"},s.a.createElement("span",null,I18N.restricted_intro),"restricted"===r.access&&s.a.createElement(d.a,{dispatch:a,host:r.team_cid?r.cteam():r},s.a.createElement("button",{onClick:this.handleCollaborators},I18N.manage)))},{val:"private",name:s.a.createElement("span",null,I18N.private_intro,s.a.createElement("p",null,"private"===r.access&&(MB.user.id&&MB.user.limitation.encryptable?s.a.createElement("input",{type:"text",placeholder:I18N.sharing_password,value:r.password||"",onChange:this.handlePasswordChange,readOnly:!y}):s.a.createElement("a",{href:"/account#plan-card"},I18N.password_protection))))}],E={device:I18N.device_shell,default:I18N.default_shell,none:I18N.none_shell},_=[{name:I18N.highlight_clickable},{name:I18N.view_in_browser}];return s.a.createElement(f.a,{isOpen:t,className:"sharing-modal",title:I18N.share,onClose:n},s.a.createElement("section",{className:"qrcode",ref:"qrcode"}),s.a.createElement("section",{className:"sharing-url"},s.a.createElement("input",{type:"text",readOnly:!0,className:"regular",value:o,onClick:this.handleSelectAll}),y&&s.a.createElement("button",{onClick:this.handleRefresh},I18N.regenerate)),s.a.createElement("section",{className:"sharing-code"},s.a.createElement("p",null,I18N.embed_tips),s.a.createElement("textarea",{readOnly:!0,className:"regular",onClick:this.handleSelectAll,value:p})),g&&s.a.createElement("section",null,s.a.createElement(h.b,{name:I18N.access_permission},s.a.createElement(h.d,{isDisabled:!y,optionList:w,onChange:this.handleAccess,currentOptionIdx:"restricted"===r.access?0:1}))),b&&"web"!==r.device&&s.a.createElement("section",null,s.a.createElement(h.c,{name:I18N.default_shell_field},s.a.createElement(m.a,{options:E,value:r.shell_type,onChange:this.handleUpdateShell}))),y&&s.a.createElement("section",null,s.a.createElement(h.b,{name:I18N.preview_settings},s.a.createElement(h.a,{optionList:_,onChange:this.handlePreviewSettings,currentOptionIdxList:[r.highlight&&0,r.wechat&&1]}))),l&&s.a.createElement(h.b,{name:"Slack Web Hook"},s.a.createElement("input",{type:"text",value:r.slack_web_hook_url||"",onBlur:this.handleSlackWebHook})))},t}(c.PureComponent));y.propTypes={dispatch:l.a.func.isRequired,isOpen:l.a.bool,onClose:l.a.func,app:l.a.object},t.a=y},DZQR:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n("BC29"),a=(n.n(r),n("AxSz")),o=n("bBrr"),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=a.a.SpineModel,s={Team:"t",Project:"p",Combo:"c",Template:"t",Screen:"s",Collaborator:"co",Comment:"cm",CommentThread:"cmth",Widget:"w"},u=Object.keys(s),l=u.reduce(function(e,t){return e[t]=c[t].attributes,e},{});l.Widget=[].concat(l.Widget,["id"]);var p=u.reduce(function(e,t){var n=c[t],u=l[t],p=s[t],d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u.forEach(function(n){return t[n]=e[n]}),t},f=function(e,t){var r=e.find(function(e){return e.cid===t}),a=n.findByAttribute("cid",t);return o.a,o.a,Boolean(r||a)},m=function(e,t){var r=e.find(function(e){return e.cid===t}),a=n.findByAttribute("cid",t);return o.a,o.a,{dataState:r,dataModel:a}};return e[t]={refreshStateList:function(e){return n.all().map(function(e){return d(e,{})})},saveState:function(e,t,n){var r=t.cid,o=m(e,r),i=o.dataState,c=o.dataModel;return i&&c?(c.lsave(!n),!n&&a.a.SpineModel.queueSave(),e):e},addState:function(e,t,c){var s=t.cid||a.a.SpineModel.requestCid(p);f(e,s)&&(s=a.a.SpineModel.requestCid(p));var u=i({},t,{cid:s});return new n(u).lsave(!c),!c&&a.a.SpineModel.queueSave(),o.a,r.Operation.arrayPush(e,u)},updateState:function(e,t,n){var c=t.cid,s=m(e,c),u=s.dataState,l=s.dataModel;return u&&l?(u=i({},u,t),Object.assign(l,u),l.lsave(!n),!n&&a.a.SpineModel.queueSave(),o.a,r.Operation.arrayFindSet(e,function(e){return e.cid===c},u)):e},deleteState:function(e,t,n){var i=t.cid,c=m(e,i),s=c.dataState,u=c.dataModel;return s&&u?(u.ldestroy(!n),!n&&a.a.SpineModel.queueSave(),o.a,r.Operation.arrayFindDelete(e,function(e){return e.cid===i})):e}},e},{}),d=function(e){return function(t,n,r){var a=n.cid,i=c.Project.findByAttribute("cid",a)?"Project":c.Template.findByAttribute("cid",a)?"Template":c.Combo.findByAttribute("cid",a)?"Combo":null;if(o.a&&!i)throw new Error("[Error] no Project/Template/Combo found for "+a);return p[i][e](t,n,r)}};p.ProjectAlike={refreshStateList:function(e){return[].concat(p.Project.refreshStateList(),p.Template.refreshStateList(),p.Combo.refreshStateList())},saveState:d("saveState"),addState:d("addState"),updateState:d("updateState"),deleteState:d("deleteState")}},Dd9K:function(e,t){function n(e){return function(t,n,r){for(var a=-1,o=Object(t),i=r(t),c=i.length;c--;){var s=i[e?c:++a];if(!1===n(o[s],s,o))break}return t}}e.exports=n},Dlmx:function(e,t,n){function r(e){return a(e,o(e))}var a=n("iU/O"),o=n("srSK");e.exports=r},E7xn:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});var r=[{title:"basic",widgets:[{id:"label",icon_text:"文字",text:I18N.w.label,tb_text:"文字",icon_name:"text",width:33,height:23,fs:16,br:0,bs:0,ha:"center",va:"middle",z:5,lh:1.45},{id:"text_view",icon_text:"多行文字",text:I18N.w.text_view_placeholder,tb_text:"多行文字",icon_name:"paragraph",width:200,height:65,fs:13,br:0,bs:0,ha:"left",va:"top",z:5,lh:1.45},{id:"icon_button",icon_text:"图标",text:"",icon:"star",tb_icon:"star",icon_name:"smile",width:45,height:45,br:0,bs:0,is:24,z:5,tooltip:"图标"},{id:"image_view",icon_text:"图片",text:"",icon_name:"img",width:200,height:120,tb_icon:"picture-o",br:0,bs:0,z:5},{id:"button",icon_text:"按钮",text:I18N.w.button,tb_text:"按钮",icon_name:"btn",width:80,height:30,fs:14,br:4,bs:1,ha:"center",va:"middle",z:5,icon:"",is:14,padding:8},{id:"mtooltip",icon_text:"聊天气泡",text:I18N.w.mtooltip,tb_text:"聊天气泡",icon_name:"tooltip",width:220,height:40,fs:14,br:5,ha:"left",va:"top",z:5,lh:1.45,bg:"#8DFA69",bc:"#5FE163",bs:1,padding:10},{icon_text:"网页",id:"webpage",text:"about:blank",tb_text:"网页",icon_name:"webpage",width:"100%",height:400,z:5,ha:"center"}]},{title:"functional",widgets:[{id:"pg",icon_text:"全局手势",tb_icon:"tap",icon_name:"gesture",icon:"tap",width:40,height:40,br:0,bs:0,z:7,tooltip:"全局手势",zoomable:" "},{id:"lr",icon_text:"链接区域",tb_text:"链接区域",icon_name:"link",width:45,height:45,br:0,bs:0,z:7,tooltip:"可按住 Ctrl/Cmd 拖动鼠标快速创建链接区域"},{id:"sticky",icon_text:"批注",tb_text:"批注",icon_name:"sticker",tooltip:"批注组件可显示在页面任意位置",width:204,height:170,padding:24,fs:12,lh:1.67,z:10}]},{title:"shape",widgets:[{id:"rounded_rect",icon_text:"矩形",text:"",icon_name:"rectangle",width:200,height:100,br:0,bs:1,fs:14,ha:"center",va:"middle",lh:1.45,z:5},{id:"circle_rect",icon_text:"圆形",text:"",icon_name:"circle",width:100,height:100,br:100,bs:1,fs:14,ha:"center",va:"middle",lh:1.45,z:5},{id:"hr",icon_text:"线条",text:"",icon_name:"horizontal-line",width:150,height:10,z:5,zoomable:"w,e,n"},{id:"ve",icon_text:"线条",text:"",icon_name:"vertical-line",width:10,height:150,z:5,zoomable:"n,s,w"},{id:"triangleb",icon_text:"三角",text:"",icon_name:"triangle-top",width:40,height:30,z:5},{id:"triangletl",icon_text:"三角",text:"",icon_name:"triangle-left-bottom",width:40,height:40,z:5}]},{title:"input",widgets:[{id:"mtext_input",icon_text:"单行输入",text:I18N.w.mtext_input,tb_text:"单行输入",icon_name:"input",width:200,height:30,fs:14,br:0,bs:1,ha:"left",va:"middle",z:5,padding:8},{id:"mtextarea",icon_text:"多行输入",text:I18N.w.mtextarea,tb_text:"多行输入",icon_name:"textarea",width:280,height:100,fs:14,lh:1.45,br:0,bs:1,ha:"left",z:5,padding:8},{id:"mcheckbox2",icon_text:"复选框",tb_icon:"check",icon_name:"checkbox",width:30,height:30,z:5,checked:!1},{id:"mradiobutton",icon_text:"单选框",tb_icon:"dot-circle-o",icon_name:"radio",width:30,height:30,z:5,checked:!1},{id:"mselect",icon_text:"下拉框",text:"1\n2\n3",tb_text:"下拉框",icon_name:"select",width:200,height:30,fs:14,bs:1,z:5,lh:1.45,padding:8},{id:"mfile_input",icon_text:"选择文件",tb_text:"文件选择",icon_name:"file",width:200,height:30,z:5,padding:8},{id:"switch",icon_text:"开关按钮",text:"",icon_name:"toggle",width:50,height:30,br:0,bs:0,z:5,zoomable:" ",checked:!0}]},{title:"bar",widgets:[{id:"navigation_bar",icon_text:"标题栏",text:I18N.w.navbar_title,tb_text:"标题栏",icon_name:"header",width:"100%",height:55,fs:18,z:4,zoomable:"s",ha:"center",top:23},{id:"tab_bar",icon_text:"底栏",text:"",tb_text:"底栏",icon_name:"footer",width:"100%",height:45,z:4,zoomable:"n"},{id:"rectangle",icon_text:"空白通栏",text:"",icon_name:"bar",width:"100%",height:100,z:5,zoomable:"n,s"},{id:"search_bar",icon_text:"搜索框",text:I18N.w.search,tb_text:"搜索",icon_name:"search-input",width:"100%",height:45,tb_icon:"search",fs:14,ha:"left",z:5,zoomable:"w,e"},{id:"tab_item",icon_text:"标签",text:I18N.w.tab_item,tb_text:"标签",tb_icon:"home",icon_name:"icon-label",icon:"home",width:80,height:45,fs:12,is:24,z:5,ha:"center",zoomable:"w,e"}]},{title:"other",widgets:[{id:"map_view",icon_text:"地图",text:"",icon_name:"map",width:"100%",height:230,z:4},{id:"keyboard",icon_text:"键盘",text:I18N.w.return,width:"100%",tb_icon:"keyboard-o",icon_name:"keyboard",z:3,zoomable:" ",numeric:!1},{id:"status_bar",icon_text:"状态栏",text:I18N.w.carrier,tb_text:"中国移动",icon_name:"battery",width:"100%",height:23,tb_icon:"signal",z:3,zoomable:" "}]}],a=r.reduce(function(e,t){return e=e.concat(t.widgets)},[]),o=a.reduce(function(e,t){return e[t.id]=t,e},{});MB.COMPONENTS=o},EF4r:function(e,t){},FCp3:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{left:"",right:"",top:"",bottom:""},r=Math.max(t.left-e.left,0),a=Math.max(e.right-t.right,0);r<=a?n.left=r/e.width*100+"%":n.right=a/e.width*100+"%";var o=Math.max(t.top-e.top,0),i=Math.max(e.bottom-t.bottom,0);return o<=i?n.top=o/e.height*100+"%":n.bottom=i/e.height*100+"%",n}n.d(t,"a",function(){return y});var c=n("BSVj"),s=n.n(c),u=n("rwcW"),l=n.n(u),p=n("jeE2"),d=n("OUfH"),f=n.n(d),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=f.a["comment-layer"],v={left:"",right:"287px",top:"",bottom:"40px"},y=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n));return o.setPanelPosition=function(e){if(o.divElement){var t=i(o.divElement.getBoundingClientRect(),e);o.setState({fixedPanelStyle:t})}},o.setElementRef=function(e){return o.divElement=e},o.divElement=null,o.state={fixedPanelStyle:v},o}return o(t,e),t.prototype.render=function(){if(!this.props.isActive)return null;var e=this.state.fixedPanelStyle;return l.a.createElement("div",{ref:this.setElementRef,className:h},l.a.createElement("div",{className:"float-panel",style:e},l.a.createElement(p.a,m({setPanelPosition:this.setPanelPosition},this.props))))},t}(u.PureComponent);y.propTypes=m({},p.a.propTypes,{isActive:s.a.bool,commentThreadList:s.a.array,commentListMap:s.a.object,selectCommentThread:s.a.object})},Fptb:function(e,t,n){"use strict";function r(e){return o.call(e)}var a=Object.prototype,o=a.toString;t.a=r},G1TU:function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,o){try{var i=t[a](o),c=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}function a(e,t){var n=m.a.getState();return n&&c.a.getState().find(function(r){return r.user_id===n.id&&(r.project_cid===e||r.team_cid===t)})}function o(e,t){var n=t.getState,r=t.setState,a=n();return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,o=arguments[1];return o.type!==e?t:(r(o.payload||t),n())}}n.d(t,"a",function(){return _}),n.d(t,"b",function(){return O});var i=n("PpJU"),c=(n.n(i),n("G5Pd")),s=n("ZCvY"),u=n("jAji"),l=n("yD+I"),p=n("Xc71"),d=n("3wZp"),f=n("8I+x"),m=n("NE5x"),h=n("vWVt"),v=n("ieLl"),y=n("AxSz"),b=n("bBrr"),g=n("wB9c"),w=this,E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_=E({},c.a.entryMap,s.a.entryMap,u.a.entryMap,l.a.entryMap,p.a.entryMap,d.a.entryMap,f.a.entryMap,m.a.entryMap,h.a.entryMap,v.a.entryMap,{"entry:add-mock-collaborator":function(e){var t=e.dispatch,n=d.a.getState(),r=l.a.getState(),a=c.a.getState(),o=new Set(a.map(function(e){return e.cid})),i=0,s=function(e,n){var r="co_MOCK_"+e.cid;o.has(r)||(t({type:"collaborators:add-local",payload:{cid:r,role:"owner",user_id:e.owner_id,name:e.owner_name,email:e.owner_email||"email_MOCK_"+e.owner_id,avatar:e.owner_avatar,team_cid:n?e.cid:null,project_cid:n?null:e.cid}}),i++)};n.forEach(function(e){return s(e,!0)}),r.forEach(function(e){return s(e,!1)}),b.a},"entry:current:set":function(e,t){var n=e.dispatch,r=t.payload,o=r.project,i=r.screen,c=h.a.getState(),s=o&&o.cid||c.projectCid,u=i&&i.cid||c.screenCid;o=l.a.getState().find(function(e){return e.cid===s}),i=p.a.getState().find(function(e){return e.cid===u}),n({type:"current:set",payload:{project:o,screen:i,userCollaborator:o&&a(o.cid,o.team_cid)}})},"entry:current:set-screen":function(e,t){var n=e.dispatch,r=t.payload.cid,a=p.a.getState().find(function(e){return e.cid===r});a&&n({type:"entry:current:set",payload:{screen:a}})},"entry:unread-comment:init":function(e,t){var n=e.dispatch,r=h.a.getState(),a=r.userRole,o=r.projectCid;"guest"!==a&&n({type:"unread-comment:init-for-project",payload:{projectCid:o,commentThreadList:u.a.getState(),commentList:s.a.getState()}})},"entry:comment-threads:add":function(e,t){var n=e.dispatch,r=t.payload,a=r.top,o=r.left,i=r.message,c=m.a.getState(),s=h.a.getState(),u=s.screenCid,l=.001*Date.now(),p=y.a.SpineModel.requestCid("cmth"),d=100/y.a.SpineModel.getScreenScale();n({type:i?"comment-threads:add":"comment-threads:add-local",payload:{cid:p,top:Math.round(a*d),left:Math.round(o*d),screen_cid:u,user_id:c.id,created_at:l,updated_at:l}}),i&&n({type:"comments:add",payload:{thread_cid:p,message:i,user_id:c.id,created_at:l,updated_at:l}}),n({type:"container:comment:select",payload:{select:p}})},"entry:comment-threads:update":function(e,t){var n=e.dispatch,r=t.payload,a=r.cid,o=r.top,i=r.left,c=s.a.getState().find(function(e){return e.thread_cid===a}),u=.001*Date.now(),l=100/y.a.SpineModel.getScreenScale();n({type:c?"comment-threads:update-local":"comment-threads:update",payload:{cid:a,top:Math.round(o*l),left:Math.round(i*l),updated_at:u}})},"entry:comment-threads:delete":function(e,t){var n=e.dispatch,r=t.payload.cid;n({type:"comment-threads:delete",payload:{cid:r}}),s.a.getState().forEach(function(e){return e.thread_cid===r&&n({type:"comments:delete-local",payload:e})})},"entry:comments:add":function(e,t){var n=e.dispatch,r=t.payload,a=r.thread_cid,o=r.message,i=m.a.getState(),c=.001*Date.now();n({type:"comment-threads:save",payload:{cid:a}}),n({type:"comments:add",payload:{thread_cid:a,message:o,user_id:i.id,created_at:c,updated_at:c}})},"entry:comments:update":function(e,t){var n=e.dispatch,r=t.payload;n({type:"comments:update",payload:{cid:r.cid,message:r.message,updated_at:.001*Date.now()}})},"entry:state:push-data":function(e,t){var n=e.dispatch,r=t.payload,a=r.pushType,o=r.action,i=r.data;switch(a){case"comment-threads":var c=u.a.getState().find(function(e){return e.cid===i.cid});"update"!==o||c?"update"===o&&c?n({type:"comment-threads:update-local",payload:i}):"destroy"===o&&c&&(n({type:"comment-threads:delete-local",payload:i}),s.a.getState().forEach(function(e){return e.thread_cid===i.cid&&n({type:"comments:delete-local",payload:e})})):n({type:"comment-threads:add-local",payload:i});break;case"comments":var l=s.a.getState().find(function(e){return e.cid===i.cid});"update"!==o||l?"update"===o&&l?n({type:"comments:update-local",payload:i}):"destroy"===o&&l&&n({type:"comments:delete-local",payload:i}):n({type:"comments:add-local",payload:i});var p=h.a.getState(),d=p.screenCid,f=u.a.getState().find(function(e){return e.cid===i.thread_cid});f&&f.screen_cid===d&&n({type:"unread-comment:set-unread",payload:{commentCid:i.cid,threadCid:f.cid,screenCid:d}})}},"entry:projects:delete":function(){var e=r(regeneratorRuntime.mark(function e(t,n){var r,a,o,i=t.dispatch,s=n.payload;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s,a=m.a.getState(),!(r.owner_id===a.id||r.canAdmin()&&r.team_cid)){e.next=9;break}return e.next=5,Object(g.b)({dispatch:i,title:I18N.del_app_confirmation});case 5:if(!e.sent){e.next=7;break}i({type:"projects:delete",payload:r});case 7:e.next=15;break;case 9:return e.next=11,Object(g.b)({dispatch:i,title:I18N.are_you_sure});case 11:if(!e.sent){e.next=15;break}o=c.a.getState().find(function(e){return e.project_cid===r.cid&&e.user_id===a.id}),i({type:"collaborators:delete",payload:o}),i({type:"projects:delete-local",payload:r});case 15:case"end":return e.stop()}},e,w)}));return function(t,n){return e.apply(this,arguments)}}(),"entry:teams:delete":function(){var e=r(regeneratorRuntime.mark(function e(t,n){var r,a,o,i=t.dispatch,s=n.payload;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s,a=m.a.getState(),r.owner_id!==a.id){e.next=11;break}if(!(r.cprojects().length>0)){e.next=5;break}return e.abrupt("return",Object(g.a)({dispatch:i,title:I18N.warning,desc:I18N.delete_projects_first}));case 5:return e.next=7,Object(g.b)({dispatch:i,title:I18N.confirm_delete_team});case 7:if(!e.sent){e.next=9;break}i({type:"teams:delete",payload:r});case 9:e.next=17;break;case 11:return e.next=13,Object(g.b)({dispatch:i,title:I18N.confirm_exit_team});case 13:if(!e.sent){e.next=17;break}o=c.a.getState().find(function(e){return e.team_cid===r.cid&&e.user_id===a.id}),i({type:"collaborators:delete",payload:o}),i({type:"teams:delete-local",payload:r});case 17:case"end":return e.stop()}},e,w)}));return function(t,n){return e.apply(this,arguments)}}()}),O={collaborators:o("reducer:collaborators:update",c.a),comments:o("reducer:comments:update",s.a),commentThreads:o("reducer:comment-threads:update",u.a),projects:o("reducer:projects:update",l.a),screens:o("reducer:screens:update",p.a),teams:o("reducer:teams:update",d.a),widgets:o("reducer:widgets:update",f.a),user:Object(i.createStateStoreReducer)("reducer:user:update",m.a),current:Object(i.createStateStoreReducer)("reducer:current:update",h.a),unreadComment:Object(i.createStateStoreReducer)("reducer:unread-comment:update",v.a)}},G5Pd:function(e,t,n){"use strict";var r=n("PpJU"),a=(n.n(r),n("DZQR")),o=a.a.Collaborator,i=[],c=Object(r.createStateStore)(i),s=c.getState,u=c.setState,l=c.wrapEntry,p=function(e,t){return l(function(n,r,a){var o=r.dispatch,i=a&&a.payload;o({type:"reducer:collaborators:update",payload:e(n,i,t)})})},d={"collaborators:refresh":l(function(e,t,n){var r=t.dispatch,a=n&&n.payload;e=o.refreshStateList(e,a,!1),e.forEach(function(e){e.avatar||(e.avatar="/images/avatar.png")}),r({type:"reducer:collaborators:update",payload:e})}),"collaborators:add":p(o.addState,!1),"collaborators:add-local":p(o.addState,!0),"collaborators:update":p(o.updateState,!1),"collaborators:update-local":p(o.updateState,!0),"collaborators:delete":p(o.deleteState,!1),"collaborators:delete-local":p(o.deleteState,!0)};t.a={entryMap:d,getState:s,setState:u}},GKSj:function(e,t,n){"use strict";function r(e){if(!Object(i.a)(e)||Object(a.a)(e)!=c)return!1;var t=Object(o.a)(e);if(null===t)return!0;var n=p.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==d}var a=n("Fptb"),o=n("gL3x"),i=n("vJqX"),c="[object Object]",s=Function.prototype,u=Object.prototype,l=s.toString,p=u.hasOwnProperty,d=l.call(Object);t.a=r},"Gj+y":function(e,t,n){"use strict";function r(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var s=void 0;a.n.iterator(e)?(s=e,e=t):(Object(a.g)(t,a.n.func,c),s=t.apply(void 0,r),Object(a.g)(s,a.n.iterator,c));var u=e,l=u.subscribe,p=u.dispatch,d=u.getState,f=u.context,m=u.sagaMonitor,h=u.logger,v=u.onError,y=Object(a.v)();m&&(m.effectTriggered=m.effectTriggered||a.r,m.effectResolved=m.effectResolved||a.r,m.effectRejected=m.effectRejected||a.r,m.effectCancelled=m.effectCancelled||a.r,m.actionDispatched=m.actionDispatched||a.r,m.effectTriggered({effectId:y,root:!0,parentEffectId:0,effect:{root:!0,saga:t,args:r}}));var b=Object(o.a)(s,l,Object(a.x)(p),d,f,{sagaMonitor:m,logger:h,onError:v},y,t.name);return m&&m.effectResolved(y,b),b}t.a=r;var a=n("wVGC"),o=n("YEFR"),i="runSaga(storeInterface, saga, ...args)",c=i+": saga argument must be a Generator function!"},HQOG:function(e,t){function n(e){if(e){var t=e.trim();return t=t.replace(/\.\d\d\d+/,""),t=t.replace(/-/,"/").replace(/-/,"/"),t=t.replace(/T/," ").replace(/Z/," UTC"),t=t.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(t)}}function r(e){return i.inWords(a(e))}function a(e){return(new Date).getTime()-e.getTime()}e.exports=function(e){return e instanceof Date?r(e):"string"==typeof e?r(n(e)):"number"==typeof e?r(new Date(e)):void 0};var o={allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[],wordSeparator:" "}},i=o.strings;e.exports.settings=o,i.inWords=function(e){function t(t,n){var r="function"==typeof t?t(n,e):t,a=i.numbers&&i.numbers[n]||n;return r.replace(/%d/i,a)}var n=i.prefixAgo,r=i.suffixAgo;o.allowFuture&&e<0&&(n=i.prefixFromNow,r=i.suffixFromNow);var a=Math.abs(e)/1e3,c=a/60,s=c/60,u=s/24,l=u/365,p=a<45&&t(i.seconds,Math.round(a))||a<90&&t(i.minute,1)||c<45&&t(i.minutes,Math.round(c))||c<90&&t(i.hour,1)||s<24&&t(i.hours,Math.round(s))||s<48&&t(i.day,1)||u<30&&t(i.days,Math.floor(u))||u<60&&t(i.month,1)||u<365&&t(i.months,Math.floor(u/30))||l<2&&t(i.year,1)||t(i.years,Math.floor(l)),d=i.wordSeparator||"";return void 0===i.wordSeparator&&(d=" "),[n,p,r].join(d).toString().trim()},i.parse=n},HrA6:function(e,t,n){function r(e,t,n,i,c){return e===t||(null==e||null==t||!o(e)&&!o(t)?e!==e&&t!==t:a(e,t,n,i,r,c))}var a=n("rcsM"),o=n("79t3");e.exports=r},Ibgh:function(e,t,n){"use strict";var r=n("zVs0"),a=n("4MYk");n.d(t,"a",function(){return r.a}),n.d(t,"b",function(){return a.a});r.a},JnnA:function(e,t,n){function r(e){return o(e)&&a(e)}var a=n("nzGo"),o=n("79t3");e.exports=r},K09U:function(e,t){e.exports={comment:"_3DBGoYUFpmM7_RAXlOPysx"}},Kpcs:function(e,t,n){"use strict";function r(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),c=2;c<n;c++)r[c-2]=arguments[c];var s={done:!1,value:Object(o.h)(e)},u=function(e){return{done:!1,value:o.e.apply(void 0,[t].concat(r,[e]))}},l=void 0,p=function(e){return l=e};return Object(a.a)({q1:function(){return["q2",s,p]},q2:function(){return l===i.a?[a.b]:["q1",u(l)]}},"q1","takeEvery("+Object(a.c)(e)+", "+t.name+")")}t.a=r;var a=n("y/0O"),o=n("OBh0"),i=n("eDPF")},LHpc:function(e,t,n){var r=n("Vd22"),a=Object.create,o=function(){function e(){}return function(t){if(!r(t))return{};if(a)return a(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=o},M57v:function(e,t,n){e.exports=n("xUX5")},M5st:function(e,t,n){var r=n("y0p3"),a=r.Uint8Array;e.exports=a},MNlm:function(e,t,n){"use strict";function r(e){try{o(),e()}finally{i()}}function a(e){s.push(e),u||(o(),c())}function o(){u++}function i(){u--}function c(){i();for(var e=void 0;!u&&void 0!==(e=s.shift());)r(e)}t.a=a,t.c=o,t.b=c;var s=[],u=0},MmZh:function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"INVALID_ID_0",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"INVALID_ID_1",r=o[e]||!1,c=r&&t===n,s=c||i[e]||!1;return a[(r?1:0)+(c?2:0)+(s?4:0)]}n.d(t,"a",function(){return r});var a=[0,1,2,3,4,5,6,7].map(function(e){return{create:!!(1&e),update:!!(2&e),delete:!!(4&e)}}),o={owner:!0,admin:!0,editor:!0,viewer:!0},i={owner:!0,admin:!0}},Moir:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1],n=t.type,r=t.payload;switch(n){case"reducer:preview-panel:update":return a({},e,r);case"reducer:preview-panel:reset":return o;default:return e}}t.a=r;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o={isScreenActive:!0,isLayerActive:!1,isCommentActive:!1}},NE5x:function(e,t,n){"use strict";function r(e){var t=e.plan,n=e.state,r=e.limitation,a=e.days_left,o="active"===n;return{state:n||"",type:o&&t||"free",rawType:t||"free",collaboratorLimitation:o&&r||0,daysLeft:a||""}}var a=n("PpJU"),o=(n.n(a),n("BC29")),i=(n.n(o),{id:null,name:"",email:"",avatar:"",plan:{state:"",type:"free",rawType:"free",collaboratorLimitation:0,daysLeft:""}}),c=Object(a.createStateStore)(i),s=c.getState,u=c.setState,l=c.wrapEntry,p={"user:set":l(function(e,t,n){var a=t.dispatch,i=n.payload,c=i.id,s=void 0===c?null:c,u=i.name,l=void 0===u?"":u,p=i.email,d=void 0===p?"":p,f=i.avatar,m=void 0===f?"":f;a({type:"reducer:user:update",payload:o.Operation.objectMerge(e,{id:s,name:l,email:d,avatar:m,plan:r(i)})})}),"user:clear":l(function(e,t,n){(0,t.dispatch)({type:"reducer:user:update",payload:i})})};t.a={entryMap:p,getState:s,setState:u}},NNPk:function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},NX0h:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("BSVj"),c=n.n(i),s=n("rwcW"),u=n.n(s),l=n("Un7v"),p=(n.n(l),n("/MvA")),d=n("UJYK"),f=(n.n(d),function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.dispatch,n=e.isOpen,r=e.type,a=e.title,o=e.desc,i=e.isHTML,c=e.onClose,s=void 0===c?function(){return t({type:"container:modal:close"})}:c,l=e.onCancel,d=void 0===l?function(){return null}:l,f=e.onConfirm,m=e.canCancel,h=e.canConfirm,v=function(){"function"==typeof d&&d(),s()},y=m?function(){d&&d(),s&&s()}:void 0,b=h?function(){f&&f(),s&&s()}:void 0;return u.a.createElement(p.a,{isOpen:n,type:r,portalClassName:"global-alert-portal",title:a,onClose:v,onCancel:y,onConfirm:b},i?u.a.createElement("p",{className:"desc",dangerouslySetInnerHTML:{__html:o}}):u.a.createElement("p",{className:"desc"},o))},t}(s.PureComponent));f.propTypes={dispatch:c.a.func,isOpen:c.a.bool,type:c.a.string,onClose:c.a.func,onCancel:c.a.func,onConfirm:c.a.func,canCancel:c.a.bool,canConfirm:c.a.bool,title:c.a.string,desc:c.a.any,isHTML:c.a.bool},f.defaultProps={type:"alert"},t.a=f},OBe3:function(e,t){},OBh0:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*";if(arguments.length&&Object(f.g)(arguments[0],f.n.notUndef,"take(patternOrChannel): patternOrChannel is undefined"),f.n.pattern(e))return P(v,{pattern:e});if(f.n.channel(e))return P(v,{channel:e});throw new Error("take(patternOrChannel): argument "+String(e)+" is not valid channel or a valid pattern")}function a(e,t){return arguments.length>1?(Object(f.g)(e,f.n.notUndef,"put(channel, action): argument channel is undefined"),Object(f.g)(e,f.n.channel,"put(channel, action): argument "+e+" is not a valid channel"),Object(f.g)(t,f.n.notUndef,"put(channel, action): argument action is undefined")):(Object(f.g)(e,f.n.notUndef,"put(action): argument action is undefined"),t=e,e=null),P(y,{channel:e,action:t})}function o(e){return P(b,e)}function i(e,t,n){Object(f.g)(t,f.n.notUndef,e+": argument fn is undefined");var r=null;if(f.n.array(t)){var a=t;r=a[0],t=a[1]}else if(t.fn){var o=t;r=o.context,t=o.fn}return r&&f.n.string(t)&&f.n.func(r[t])&&(t=r[t]),Object(f.g)(t,f.n.func,e+": argument "+t+" is not a function"),{context:r,fn:t,args:n}}function c(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return P(w,i("call",e,n))}function s(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return P(_,i("fork",e,n))}function u(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>1)return o(t.map(function(e){return u(e)}));var r=t[0];return 1===t.length&&(Object(f.g)(r,f.n.notUndef,"cancel(task): argument task is undefined"),Object(f.g)(r,f.n.task,"cancel(task): argument "+r+" is not a valid Task object "+T)),P(C,r||f.d)}function l(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return 0===arguments.length?e=f.l:(Object(f.g)(e,f.n.notUndef,"select(selector,[...]): argument selector is undefined"),Object(f.g)(e,f.n.func,"select(selector,[...]): argument "+e+" is not a function")),P(S,{selector:e,args:n})}function p(e,t){return Object(f.g)(e,f.n.notUndef,"actionChannel(pattern,...): argument pattern is undefined"),arguments.length>1&&(Object(f.g)(t,f.n.notUndef,"actionChannel(pattern, buffer): argument buffer is undefined"),Object(f.g)(t,f.n.buffer,"actionChannel(pattern, buffer): argument "+t+" is not a valid buffer")),P(j,{pattern:e,buffer:t})}function d(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return s.apply(void 0,[m.a,e,t].concat(r))}t.h=r,t.f=a,t.c=c,t.e=s,t.d=u,t.g=l,t.a=p,t.i=d,n.d(t,"b",function(){return R});var f=n("wVGC"),m=n("yGXk"),h=Object(f.u)("IO"),v="TAKE",y="PUT",b="ALL",g="RACE",w="CALL",E="CPS",_="FORK",O="JOIN",C="CANCEL",S="SELECT",j="ACTION_CHANNEL",x="CANCELLED",k="FLUSH",M="GET_CONTEXT",N="SET_CONTEXT",T="\n(HINT: if you are getting this errors in tests, consider using createMockTask from redux-saga/utils)",P=function(e,t){var n;return n={},n[h]=!0,n[e]=t,n};r.maybe=function(){var e=r.apply(void 0,arguments);return e[v].maybe=!0,e};r.maybe;a.resolve=function(){var e=a.apply(void 0,arguments);return e[y].resolve=!0,e},a.sync=Object(f.k)(a.resolve,Object(f.w)("put.sync","put.resolve"));var L=function(e){return function(t){return t&&t[h]&&t[e]}},R={take:L(v),put:L(y),all:L(b),race:L(g),call:L(w),cps:L(E),fork:L(_),join:L(O),cancel:L(C),select:L(S),actionChannel:L(j),cancelled:L(x),flush:L(k),getContext:L(M),setContext:L(N)}},OMmE:function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}e.exports=n},OQwk:function(e,t,n){"use strict";var r=n("OBh0");n.d(t,"e",function(){return r.h}),n.d(t,"c",function(){return r.f}),n.d(t,"a",function(){return r.c}),n.d(t,"b",function(){return r.e}),n.d(t,"d",function(){return r.g}),n.d(t,"f",function(){return r.i})},OUfH:function(e,t){e.exports={"comment-layer":"CWvOZgSPm3AtQaMS8J6iZ"}},P63K:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("BSVj"),c=n.n(i),s=n("rwcW"),u=n.n(s),l=n("Un7v"),p=n.n(l),d=n("Y7r3"),f=n.n(d),m=n("rsfk"),h=(n.n(m),n("WCZ4")),v=n("h9so"),y=n.n(v),b=y.a.bind(f.a),g=function(e){function t(){r(this,t);var n=a(this,e.call(this));return n.handleExpand=function(e){var t=!n.state.expand;n.setState({expand:t})},n.handleClick=function(e){var t=n.props,r=t.attr;(0,t.onChange)(e.currentTarget.getAttribute("value"),r),n.setState({expand:!1})},n.closeList=function(e){p.a.findDOMNode(n).contains(e.target)||n.state.expand&&n.setState({expand:!1})},n.handleClose=function(){n.setState({expand:!1})},n.state={expand:!1},n}return o(t,e),t.prototype.componentDidMount=function(){document.addEventListener("mousedown",this.closeList)},t.prototype.componentDidUpdate=function(){var e=this.refs,t=e.input,n=e.list;if(this.state.expand){var r=t.getBoundingClientRect(),a=r.top,o=r.bottom,i=r.width,c=n.getBoundingClientRect(),s=c.height,u=window.innerHeight-10;this.props.shouldSetTop&&(n.style.top=o+"px"),o+1.25*s>u&&(n.style.transformOrigin="50% 100%",n.style.top="",n.style.bottom=window.innerHeight-a+"px"),n.style.minWidth=i+2+"px"}else setTimeout(function(){n.style.transformOrigin="",n.style.bottom=""},200)},t.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.closeList)},t.prototype.render=function(){var e=this,t=this.props,n=t.attr,r=t.placeholder,a=t.value,o=t.options,i=t.onChange,c=t.className,s=this.state.expand,l=a?"string"==typeof o[a]?o[a]:a:r;return u.a.createElement("div",{type:"select",className:b("select",c,{show:s})},u.a.createElement("div",{ref:"input",className:b("default"),onClick:this.handleExpand},u.a.createElement("span",{className:"current-val"},l),u.a.createElement(h.a,{type:"fa",name:"caret-down"})),u.a.createElement("ul",{ref:"list",className:b("options")},Object.keys(o).map(function(t,r){var a=o[t]||"";return"string"==typeof a?u.a.createElement("li",{key:t,className:b("option"),value:t,onClick:e.handleClick},u.a.createElement("span",{className:"val"},o[t])):u.a.createElement(w,{key:t,attr:n,group:a,onChange:i,handleClose:e.handleClose})})))},t}(s.Component);t.a=g,g.propTypes={attr:c.a.string,placeholder:c.a.string,value:c.a.oneOfType([c.a.number,c.a.string]),className:c.a.string,options:c.a.object,onChange:c.a.func,shouldSetTop:c.a.bool},g.defaultProps={placeholder:"Please select…",value:null,options:{a:"aaa",b:"bbb",c:"ccc"},shouldSetTop:!0};var w=function(e){function t(){var n,o,i;r(this,t);for(var c=arguments.length,s=Array(c),u=0;u<c;u++)s[u]=arguments[u];return n=o=a(this,e.call.apply(e,[this].concat(s))),o.handleClick=function(e){var t=o.props,n=t.attr,r=t.onChange,a=t.handleClose;r(e.currentTarget.getAttribute("value"),n),a()},i=n,a(o,i)}return o(t,e),t.prototype.render=function(){var e=this,t=this.props.group,n=t.label,r=t.options;return u.a.createElement("li",{className:b("optgroup")},u.a.createElement("div",{className:b("group-title")},u.a.createElement("span",{className:"val"},n)),u.a.createElement("ul",null,Object.keys(r).map(function(t,n){return u.a.createElement("li",{key:n,value:t,className:b("option","sub-option"),onClick:e.handleClick},u.a.createElement("span",{className:"val"},r[t]))})))},t}(s.Component);w.propTypes={attr:c.a.string,group:c.a.object,onChange:c.a.func,handleClose:c.a.func}},PpJU:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e;return{getState:function(){return t},setState:function(e){return t=e},wrapEntry:function(e){return function(n,r){return e(t,n,r)}}}}function o(e,t){var n=t.getState,r=t.setState,a=n();return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,o=arguments[1];return o.type!==e?t:(r(i({},t,o.payload)),n())}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){function e(){r(this,e),this.store=null,this.entryMap={},this.middleware=this.middleware.bind(this),this.setEntry=this.setEntry.bind(this),this.setEntryMap=this.setEntryMap.bind(this)}return c(e,[{key:"middleware",value:function(e){var t=this;return this.store=e,function(e){return function(n){return!0===t.onAction(n)||e(n)}}}},{key:"setEntry",value:function(e,t){"string"==typeof e&&"function"==typeof t&&(this.entryMap[e],this.entryMap[e]=t)}},{key:"setEntryMap",value:function(e){var t=this;Object.keys(e).forEach(function(n){return t.setEntry(n,e[n])})}},{key:"onAction",value:function(e){if(this.store){var t=this.entryMap[e.type];return t&&t(this.store,e)}}}]),e}();t.ReduxEntry=s,t.createStateStore=a,t.createStateStoreReducer=o,t.default=s},QTLW:function(e,t,n){"use strict";function r(e){var t,n,r,a,o,i,c,b,g,w,E,_,O;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.d)();case 2:if(t=e.sent,n=t.container.layers,r=n.resourceByScreen,a=n.visibilityScreenID,o=t.model,i=o.current.screenCid,c=o.screens,b=o.widgets,g=c.find(function(e){return e.cid===i}),r[a]&&!r[a].error){e.next=37;break}if(-1!==m.indexOf(a)){e.next=35;break}if(m.push(a),e.prev=8,w=void 0,!g.artboard_id){e.next=16;break}return e.next=13,Object(s.a)(u.a,g.artboard_id);case 13:w=e.sent,e.next=17;break;case 16:w={artboard:{width:g.width,height:g.height},layers:[]};case 17:return E=0,w.layers=[{type:"screen",id:g.cid,name:g.name,top:0,left:0,width:g.width,height:g.height,src_left:0,src_top:0,src_width:w.artboard.width,src_height:w.artboard.height,bg_colors:[{value:g.bgcolor}]}].concat(b.filter(function(e){return E||"status_bar"!==e.name||(E=e.height),e.screen_cid===g.cid&&!["pg","lr","sticky"].includes(e.name)&&e.v&&!("image_view"===e.name&&e.width===g.width&&e.height===g.height)}).map(function(e){var t=void 0;switch(e.name){case"status_bar":t=0;break;case"keyboard":case"tab_bar":t=g.height-e.height;break;case"navigation_bar":t=E;break;default:t=e.top}return e.top=t,Object(d.c)(e.name)&&(e.width=g.width),v(e)}).concat(w.layers).reduce(function(e,t){var n=t.id,r=t.top,a=t.left,o=t.width,i=t.height,c=y(n)?1:g.width/w.artboard.width,s=a*c,u=r*c,l=o*c,p=i*c,d=Math.min(Math.max(s,0),g.width),f=Math.min(Math.max(s+l,0),g.width),m=Math.min(Math.max(u,0),g.height),h=Math.min(Math.max(u+p,0),g.height);return f-d!=0&&h-m!=0?e.concat([Object.assign({},t,{left:d,top:m,width:f-d,height:h-m,src_top:Math.floor(Math.max(r,0)),src_left:Math.floor(Math.max(a,0)),src_width:Math.floor(Math.min(a+o,w.artboard.width)-Math.max(a,0)),src_height:Math.floor(Math.min(r+i,w.artboard.height)-Math.max(r,0))})]):e.concat([])},[])),m.splice(m.indexOf(a),1),e.next=22,Object(s.c)(Object(l.e)(a,w));case 22:return _=h(w.layers),e.next=25,Object(s.c)(Object(p.d)(_.id));case 25:return e.next=27,Object(s.c)(Object(p.c)(g.cid));case 27:e.next=35;break;case 29:return e.prev=29,e.t0=e.catch(8),m.splice(m.indexOf(a),1),e.next=35,Object(s.c)(Object(l.d)(a,e.t0.message));case 35:e.next=42;break;case 37:return O=h(r[a].layers),e.next=40,Object(s.c)(Object(p.d)(O.id));case 40:return e.next=42,Object(s.c)(Object(p.c)(g.cid));case 42:case"end":return e.stop()}},f[0],this,[[8,29]])}function a(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.f)(l.c,r);case 2:case"end":return e.stop()}},f[1],this)}function o(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,[a()];case 2:case"end":return e.stop()}},f[2],this)}t.a=o;var i=n("wC4H"),c=n.n(i),s=n("OQwk"),u=n("hYic"),l=n("eWQx"),p=n("sOkL"),d=n("TfEB"),f=[r,a,o].map(regeneratorRuntime.mark),m=[],h=function(e){var t=e.filter(function(e){var t=e.top,n=e.left;return 0!==t&&0!==n});return 0===t.length?c()(e):c()(t)},v=function(e){var t={};return e.text&&(t.text_styles=[{font_size:e.fs,color:Object(d.b)(e.tc),length:e.text.length}]),t.alignment=e.ha,t.line_height=e.lh,t.bd_radius=e.br,e.bg&&(t.bg_colors=[{value:e.bg}]),Object.assign({},e,t)},y=function(e){return"w"===e[0]}},Qhy5:function(e,t,n){(function(e){function r(e,t){if(t)return e.slice();var n=e.length,r=u?u(n):new e.constructor(n);return e.copy(r),r}var a=n("y0p3"),o="object"==typeof t&&t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,c=i&&i.exports===o,s=c?a.Buffer:void 0,u=s?s.allocUnsafe:void 0;e.exports=r}).call(t,n("fIxY")(e))},QuKl:function(e,t,n){var r=n("Dd9K"),a=r();e.exports=a},R1tl:function(e,t,n){"use strict";n("wVGC"),n("OBh0"),n("YEFR")},"REe+":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return v}),n.d(t,"b",function(){return h});var i=n("rwcW"),c=n.n(i),s=n("BSVj"),u=n.n(s),l=n("AxSz"),p=n("lMBy"),d=n("AA2F"),f=n.n(d),m=f.a["comment-thread"],h=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n));return o.setScrollRef=function(e){o.scrollRef=e},o.scrollRef=null,o}return o(t,e),t.prototype.renderEntry=function(e,t,n,r,a,o,i){var s=n[0]||null,u=s&&i.getCollaborator(s.user_id);return c.a.createElement(p.b,{key:t,commentMarkerIndex:t,unreadCount:a,commentCount:n.length,isFocus:r,comment:s,commentThreadCid:e,collaborator:u,permission:o,commentOperations:i})},t.prototype.render=function(){var e=this,t=this.props,n=t.commentOperations,r=t.commentThreadList,a=t.commentListMap,o=t.commentContainer,i=t.unreadCountThreadMap;if(!r.length)return n.renderEmptyCommentList();var s=o.focus||o.select;return c.a.createElement("div",{ref:this.setScrollRef,className:m},r.map(function(t,r){var o=t.cid,c=t.user_id;return e.renderEntry(o,r+1,a[o]||[],s===o,i[o]||0,n.getPermission(c),n)}))},t}(i.PureComponent);h.propTypes={commentOperations:u.a.object,commentThreadList:u.a.array,commentListMap:u.a.object,commentContainer:u.a.object,unreadCountThreadMap:u.a.object};var v=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n));o.doShowAll=function(){o.setState({isShowAll:!0})};var i=o.calcFoldDivider(),c=i.foldCount,s=i.newDividerIndex;return o.foldCount=c,o.newDividerIndex=s,o.setScrollRef=function(e){o.scrollRef=e},o.scrollRef=null,o.state={isShowAll:!1},o}return o(t,e),t.prototype.calcFoldDivider=function(){for(var e=this.props,t=e.commentList,n=e.unreadCommentMap,r=0,a=1/0,o=t.length-1;o>=0&&n[t[o].cid];)a=o,o--;if(0===a&&(a=1),a>4)for(var i=1;i<=t.length-3&&!n[t[i].cid];)r++,i++;return{newDividerIndex:a,foldCount:r}},t.prototype.tickReadComment=function(){var e=this.props,t=e.commentList,n=e.unreadCommentMap,r=e.commentOperations.setReadComment,a=!1;t.forEach(function(e){n[e.cid]&&(r(e.cid),a=!0)}),a||(this.newDividerIndex=1/0)},t.prototype.getCommentReducer=function(e,t){var n=this,r=this.state.isShowAll,a=1+this.foldCount-1,o=null;return function(i,s,u){if(!r&&u>=1&&u<=a)u===a&&i.push(y(n.doShowAll,n.foldCount));else{1===u&&i.push(b()),u===n.newDividerIndex&&i.push(g());var l=0===u,d=!l&&o!==s.user_id;d&&(o=s.user_id);var f=l?p.c:d?p.d:p.a;i.push(c.a.createElement(f,{key:s.cid,comment:s,permission:t.getPermission(s.user_id),collaborator:t.getCollaborator(s.user_id),commentMarkerIndex:e,commentOperations:t}))}return i}},t.prototype.componentDidMount=function(){this.tickReadComment()},t.prototype.componentDidUpdate=function(){this.tickReadComment()},t.prototype.render=function(){var e=this.props,t=e.commentOperations,n=e.commentMarkerIndex,r=e.commentList;return r.length?c.a.createElement("div",{ref:this.setScrollRef,className:m},r.reduce(this.getCommentReducer(n,t),[])):t.renderEmptyCommentList()},t}(i.PureComponent);v.propTypes={commentOperations:u.a.object,commentMarkerIndex:u.a.number,commentList:u.a.array,unreadCommentMap:u.a.object};var y=function(e,t){return c.a.createElement("div",{key:"expand",className:"expand"},c.a.createElement("button",{onClick:e},l.a.I18N.preview.comment.show_all_0,t,l.a.I18N.preview.comment.show_all_1))},b=function(){return c.a.createElement("div",{key:"divider-line",className:"divider-line"})},g=function(){return c.a.createElement("div",{key:"divider-new-comment",className:"divider-new-comment"},c.a.createElement("div",null),c.a.createElement("span",null,l.a.I18N.preview.comment.divider_new),c.a.createElement("div",null))}},RMaG:function(e,t,n){function r(e){var t=this.__data__,n=a(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}var a=n("wJQI"),o=Array.prototype,i=o.splice;e.exports=r},RVGU:function(e,t){},Rr6B:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return m});var i=n("rwcW"),c=n.n(i),s=n("BSVj"),u=n.n(s),l=n("V9Vg"),p=n("MmZh"),d=n("97rj"),f=20,m=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n));return o.addCommentThreadListener=Object(l.b)(function(e){var t=o.props,n=t.getContentElement,r=t.isActive,a=t.currentUserRole,i=t.dispatch;r&&Object(p.a)(a).create&&h(e,n().getBoundingClientRect())&&i({type:"entry:comment-threads:add",payload:o.markerOperations.getMarkerPosition(e)})}),o.markerOperations={addContainerEventListener:function(e){for(var t in e)o.props.getContentElement().addEventListener(t,e[t])},removeContainerEventListener:function(e){for(var t in e)o.props.getContentElement().removeEventListener(t,e[t])},setFocusCommentThreadCid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return o.props.dispatch({type:"container:comment:focus",payload:{focus:e}})},setSelectCommentThreadCid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return o.props.dispatch({type:"container:comment:select",payload:{select:e}})},doUpdateCommentThread:function(e){var t=e.cid,n=e.top,r=e.left;return o.props.dispatch({type:"entry:comment-threads:update",payload:{cid:t,top:n,left:r}})},doFocusAtElement:function(e){return o.props.dispatch({type:"entry:focus-element",payload:{focusType:"external",element:e}})},getMarkerPosition:function(e){var t=o.props.queryCurrentScreenContainerElement().getBoundingClientRect(),n=o.props.getContentElement().getBoundingClientRect();return{left:Object(l.c)(e.clientX,n.left+f,n.right-f)-t.left,top:Object(l.c)(e.clientY,n.top+f,n.bottom-f)-t.top}}},o}return o(t,e),t.prototype.componentDidUpdate=function(e){var t=this.props,n=t.isActive,r=t.getContentElement;n!==e.isActive&&r()&&(n?r().addEventListener("dblclick",this.addCommentThreadListener):r().removeEventListener("dblclick",this.addCommentThreadListener))},t.prototype.componentWillUnmount=function(){var e=this.props.getContentElement;e()&&e().removeEventListener("dblclick",this.addCommentThreadListener)},t.prototype.render=function(){var e=this;if(!this.props.isActive)return null;var t=this.props,n=t.commentContainer,r=n.select,a=n.focus,o=t.scale,i=t.commentThreadList,s=t.userId,u=t.currentUserRole;return c.a.createElement("div",null,i.map(function(t,n){var i=t.cid,l=t.left,f=t.top,m=t.user_id,h=r===i,v=h||a===i,y=r&&!h||a&&!v;return c.a.createElement(d.a,{key:i,commentMarkerIndex:n+1,commentThreadCid:i,offsetLeft:l*o,offsetTop:f*o,isEditable:Object(p.a)(u,s,m).update,isSelect:h,isFocus:v,isFade:y,markerOperations:e.markerOperations})}))},t}(i.PureComponent);m.propTypes={getContentElement:u.a.func.isRequired,scale:u.a.number,queryCurrentScreenContainerElement:u.a.func.isRequired,isActive:u.a.bool,commentContainer:u.a.object,commentThreadList:u.a.array,userId:u.a.number,currentUserRole:u.a.string,dispatch:u.a.func};var h=function(e,t){var n=t.left,r=t.top,a=t.width,o=t.height;return n<=e.clientX&&r<=e.clientY&&n+a>=e.clientX&&r+o>=e.clientY}},S8R4:function(e,t){function n(e){return a.call(e)}var r=Object.prototype,a=r.toString;e.exports=n},SaYJ:function(e,t){function n(e){return e}e.exports=n},SvKs:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("rwcW"),c=n.n(i),s=n("BSVj"),u=n.n(s),l=n("XDMB"),p=n("aGI7"),d=n("P63K"),f=n("kiPs"),m=n.n(f),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v={device:I18N.device_shell,default:I18N.default_shell,none:I18N.none_shell},y=function(e){function t(){r(this,t);var n=a(this,e.call(this));return n.toggle=function(e){e.nativeEvent.stopImmediatePropagation(),n.setState({show:!n.props.disabled&&!n.state.show})},n.handleDocClick=function(e){n.elementRef&&!n.elementRef.contains(e.target)&&n.setState({show:!1})},n.handleHighlight=function(e){n.props.dispatch({type:"projects:update-local",payload:h({},n.props.project,{_highlight:e})}),MB.currentProject._highlight=e},n.handleUpdateShell=function(e){n.props.dispatch({type:"projects:update-local",payload:h({},n.props.project,{_shell_type:e})}),MB.currentProject._shell_type=e,MB.runner.reload(!0)},n.setElementRef=function(e){n.elementRef=e},n.elementRef=null,n.state={show:!1},n}return o(t,e),t.prototype.componentDidMount=function(){document.addEventListener("click",this.handleDocClick)},t.prototype.componentWillUnmount=function(){document.removeEventListener("click",this.handleDocClick)},t.prototype.render=function(){var e=this.props,t=e.project,n=e.disabled,r=this.state.show;return c.a.createElement("div",{ref:this.setElementRef,className:m.a.root},c.a.createElement("a",{className:r?"active":"",title:I18N.setting,disabled:n,onClick:this.toggle},c.a.createElement("span",{className:"icon icon-cog"})),r&&c.a.createElement(l.a,{className:m.a.container},c.a.createElement("div",{className:m.a.content},"web"!==t.device&&c.a.createElement(d.a,{className:m.a.select,value:t._shell_type,onChange:this.handleUpdateShell,options:v,shouldSetTop:!1}),c.a.createElement(p.a,{checked:t._highlight,onChange:this.handleHighlight,label:I18N.highlight_clickable,attr:"highlight"})),c.a.createElement("i",{className:"fa fa-caret-down "+m.a.caret})))},t}(i.PureComponent);y.propTypes={project:u.a.object,disabled:u.a.bool,dispatch:u.a.func},t.a=y},TCGe:function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,o){try{var i=t[a](o),c=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=n("rwcW"),s=n.n(c),u=n("BSVj"),l=n.n(u),p=n("/MvA"),d=n("P63K"),f=(n("WCZ4"),n("0xDb")),m=n("804a"),h=n("wB9c"),v=n("UH9f"),y=(n.n(v),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),b=I18N.open_parenthesis+I18N.pending+I18N.close_parenthesis,g=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i,w={user:0,owner:1,admin:2,editor:3,viewer:4},E=function(e){var t=e.host,n=e.collaborator,r=e.userRole;return Object(m.a)(t.isTeam()&&"team","collaborator-update",n.role,r)},_=function(e){var t=e.host,n=e.collaborator,r=e.userRole;return Object(m.a)(t.isTeam()&&"team","collaborator-create",n.role,r)},O=function(e){var t=e.host,n=e.userRole;return(t.isTeam()&&MB.PermissionCheck("team-collaborator-update","admin",n)?["viewer","editor","admin"]:["viewer","editor"]).reduce(function(e,t){var n;return Object.assign(e,(n={},n[t]=""+I18N.roles[t]+I18N.colon+I18N.roles[t+"_desc"],n))},{})},C=function(e,t){var n=w[e.user_id===MB.user.id?"user":e.role],r=w[t.user_id===MB.user.id?"user":t.role];return n!==r?n-r:e.name&&t.name?e.name.localeCompare(t.name):!e.name&&t.name?1:e.name&&!t.name?-1:e.email.localeCompare(t.email)},S=function(e){function t(){var n,r,i;a(this,t);for(var c=arguments.length,s=Array(c),u=0;u<c;u++)s[u]=arguments[u];return n=r=o(this,e.call.apply(e,[this].concat(s))),r.onChangeRole=function(e){r.props.onChangeRole({collaborator:r.props.collaborator,role:e}),r.forceUpdate()},r.onDeleteCollaborator=function(){return r.props.onDeleteCollaborator(r.props.collaborator)},i=n,o(r,i)}return i(t,e),t.prototype.render=function(){var e=this.props,t=e.collaborator,n=e.host,r=e.userRole,a=t.avatar,o=t.name,i=t.email,c=t.role,u=O({host:n,userRole:r}),l=E({host:n,collaborator:t,userRole:r});return s.a.createElement("li",{className:"collaborator"},s.a.createElement("div",{className:"user"},s.a.createElement("img",{className:"avatar",src:a}),s.a.createElement("span",{className:"user-name"},o||i),!o&&s.a.createElement("span",{className:"pending"},b)),l?s.a.createElement(d.a,{options:u,value:u[c],onChange:this.onChangeRole}):s.a.createElement("span",{className:"role"},I18N.roles[c]),l&&s.a.createElement("button",{className:"delete",onClick:this.onDeleteCollaborator},I18N.delete))},t}(c.PureComponent);S.propTypes={dispatch:l.a.func,host:l.a.object,userRole:l.a.any,collaborator:l.a.object,onChangeRole:l.a.func,onDeleteCollaborator:l.a.func};var j=function(e){function t(n){var i=this;a(this,t);var c=o(this,e.call(this,n));return c.updateComponent=function(){c.forceUpdate(),MB.webpackInterface.refreshAll(),$("body").trigger("queue:save")},c.focusOnInput=function(){return setTimeout(function(){var e=document.querySelector('.collaborator-modal input[type="email"]');e&&e.focus()},100)},c.updateEmail=function(e){var t=e.target.value;return c.updatePromptList(t.trim().toLowerCase())},c.updateRole=function(e){return c.setState(function(t){var n=t.formData;return{formData:y({},n,{role:e})}})},c.updatePromptList=function(e){if(e!==c.state.email){c.promptMapCached||(c.dedupEmailSetCached=new Set(c.props.host.collaborators().map(function(e){return e.email.toLowerCase()})),c.promptMapCached=Collaborator.all().filter(function(e){var t=e.cid,n=e.user_id,r=e.email;return!(n===MB.user.id||t.startsWith("co_MOCK_c")||t.startsWith("co_MOCK_t")&&!t.startsWith("co_MOCK_te")||c.dedupEmailSetCached.has(r.toLowerCase()))}).reduce(function(e,t){return t.name&&(e[t.name.toLowerCase()]=t),t.email&&(e[t.email.toLowerCase()]=t),e},{}));var t=e&&new RegExp(e,"i"),n=new Set(c.dedupEmailSetCached),r=new Set;for(var a in c.promptMapCached){if(r.size>=10)break;var o=c.promptMapCached[a],i=o.email.toLowerCase();t&&!t.test(a)||!i||n.has(i)||(n.add(i),r.add(o))}c.setState(function(t){var n=t.formData;return{formData:y({},n,{email:e}),isPromptListOpen:!0,promptList:Array.from(r)}})}},c.showPromptList=function(){return c.updatePromptList(c.state.formData.email)},c.hidePromptList=function(){return setTimeout(function(){c.dedupEmailSetCached=null,c.promptMapCached=null,c.setState({isPromptListOpen:!1})},100)},c.createOnClickPromptListItemHandler=function(e){return function(){return c.setState(function(t){var n=t.formData;return{formData:y({},n,{email:e}),promptList:[]}})}},c.renderPromptList=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=c.state.promptList;return e=e||0===t.length,s.a.createElement("ul",y({className:"prompt-list"},Object(f.a)(e)),t.map(function(e){return s.a.createElement("li",{key:e.email,onMouseDown:c.createOnClickPromptListItemHandler(e.email)},s.a.createElement("img",{className:"avatar",src:e.avatar}),s.a.createElement("span",{className:"user-name"},e.name||e.email),e.name?s.a.createElement("span",{className:"user-email"},e.email):s.a.createElement("span",{className:"pending"},b))}))},c.onInvite=function(){MB.mp("点击了协作邀请");var e=c.props,t=e.host,n=e.userRole,r=c.state.formData,a=r.email,o=r.role,i=t.limitation,s=void 0===i?MB.user.limitation:i,u=t.collaborators(),l=void 0!==u.find(function(e){return e.email===a}),p=t.isTeam(),d=!Object(m.a)(p&&"team","collaborator-create",o,n),f=a&&g.test(a)?a===MB.user.email?I18N.cant_invite_yourself:l?I18N.already_invited:d||u.length>s.collaborators?MB.mp("提示付费: 超出协作人数")&&I18N.exceed_collaborator_limit:t.owner_paid||MB.user.email_validated?null:I18N.please_validate_email:I18N.invalid_email;f?(c.focusOnInput(),c.setState({errorMsg:f})):(MB.mp("完成了协作邀请"),c.createCollaborator({email:a,role:o}),c.setState({formData:{email:"",role:"viewer"}}))},c.createCollaborator=function(e){var t=e.email,n=e.role,r=c.props.host,a=r.isTeam(),o=new Collaborator({email:t,role:n,cid:"co"+Math.uuid(10,16)+(new Date).valueOf(),avatar:"/images/avatar.png"});Object.assign(o,{team_cid:a&&r.cid,project_cid:!a&&r.cid}),o.lsave(),o.updateHostChannel("update"),c.updateComponent()},c.onChangeRole=function(e){var t=e.collaborator,n=e.role,r=c.props,a=r.host,o=r.userRole,i=a.isTeam();!MB.PermissionCheck(i&&"team","collaborator-update",[t.role,n],o)||(Object.assign(t,{role:n}),t.lsave(),t.updateHostChannel("update"),c.updateComponent())},c.onDeleteCollaborator=function(){var e=r(regeneratorRuntime.mark(function e(t){var n,r,a,o,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.props,r=n.dispatch,a=n.host,o=n.userRole,s=a.isTeam(),!(u=!Object(m.a)(s&&"team","collaborator-delete",t.role,o))){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,Object(h.b)({dispatch:r,title:I18N.are_you_sure});case 7:if(!e.sent){e.next=11;break}t.updateHostChannel("destroy"),t.ldestroy(),c.updateComponent();case 11:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),c.dedupEmailSetCached=null,c.promptMapCached=null,c.state={formData:{email:"",role:"viewer"},promptList:[],isPromptListOpen:!1,errorMsg:null},c}return i(t,e),t.prototype.componentDidUpdate=function(e){!e.isOpen&&this.props.isOpen&&this.focusOnInput()},t.prototype.render=function(){var e=this,t=this.props,n=t.isOpen,r=t.onClose,a=t.host,o=t.userRole,i=this.state,c=i.formData,u=i.errorMsg,l=i.isPromptListOpen,f=O({host:a,userRole:o});return s.a.createElement(p.a,{ref:"$modal",isOpen:n,title:I18N.manage_collaborators,className:"collaborator-modal",onClose:r},_({host:a,userRole:o,collaborator:{role:"viewer"}})&&s.a.createElement("div",{className:"add-via-email"},s.a.createElement("input",{type:"email",placeholder:I18N.email_placeholder,onChange:this.updateEmail,onClick:this.showPromptList,onBlur:this.hidePromptList,value:c.email,autoComplete:"off"}),s.a.createElement(d.a,{options:f,value:f[c.role],onChange:this.updateRole}),s.a.createElement("button",{onClick:this.onInvite},I18N.invite),this.renderPromptList(!l)),u&&s.a.createElement("div",{className:"error-msg"},u),s.a.createElement("ul",{className:"collaborator-list"},a.collaborators().sort(C).map(function(t){return s.a.createElement(S,{key:t.email,host:a,userRole:o,collaborator:t,onChangeRole:e.onChangeRole,onDeleteCollaborator:e.onDeleteCollaborator})})))},t}(c.PureComponent);j.propTypes={isOpen:l.a.bool,onClose:l.a.func.isRequired,host:l.a.object,userRole:l.a.any},t.a=j},Te9S:function(e,t,n){"use strict"},TfEB:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",function(){return isWidgetFullWidth}),__webpack_require__.d(__webpack_exports__,"b",function(){return hex2rgba}),__webpack_require__.d(__webpack_exports__,"d",function(){return parseNSColor}),__webpack_require__.d(__webpack_exports__,"e",function(){return rgb2hex}),__webpack_require__.d(__webpack_exports__,"a",function(){return hex2rgb});var __WEBPACK_IMPORTED_MODULE_0_lodash_round__=__webpack_require__("3NNp"),__WEBPACK_IMPORTED_MODULE_0_lodash_round___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash_round__),isWidgetFullWidth=function(e){return["navigation_bar","status_bar","tab_bar","keyboard"].includes(e)},hex2rgba=function(e){if(""===e)return"rgba(0,0,0,1)";if(e=e.replace("#",""),3===e.length){var t=e.split(""),n=t[0],r=t[1],a=t[2];e=""+n+n+r+r+a+a}return"rgba("+parseInt(e.substring(0,2),16)/255+","+parseInt(e.substring(2,4),16)/255+","+parseInt(e.substring(4,6),16)/255+",1)"},parseNSColor=function parseNSColor(rgbaFuncStr){function rgba(){var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];return{r:parseInt(__WEBPACK_IMPORTED_MODULE_0_lodash_round___default()(255*e),10),g:parseInt(__WEBPACK_IMPORTED_MODULE_0_lodash_round___default()(255*t),10),b:parseInt(__WEBPACK_IMPORTED_MODULE_0_lodash_round___default()(255*n),10),a:r}}var _eval=eval(rgbaFuncStr),r=_eval.r,g=_eval.g,b=_eval.b,a=_eval.a;return"rgba("+r+", "+g+", "+b+", "+a+")"},rgb2hex=function(e){var t=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return t&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):e},hex2rgb=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?"rgb("+parseInt(t[1],16)+","+parseInt(t[2],16)+","+parseInt(t[3],16)+")":e}},"U6p/":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return h}),n.d(t,"b",function(){return v});var i=n("rwcW"),c=n.n(i),s=n("BSVj"),u=n.n(s),l=n("V9Vg"),p=n("0L5u"),d=n.n(p),f=d.a["editable-span"],m=d.a["reply-textarea"],h=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n));return o.toggleEditing=function(e){void 0===e&&(e=!o.state.isEditing),o.setState({isEditing:e,editingValue:o.props.getValue()}),e&&setTimeout(o.focusTextarea,0)},o.startEditing=function(){return o.toggleEditing(!0)},o.onEditUpdate=function(e){return o.setState({editingValue:e.target.value})},o.onEditKeyPress=function(e){return y(e)&&(!o.props.isMultiLine||!e.shiftKey)&&o.onEditFinish()},o.onEditFinish=function(){var e=o.state.editingValue.trim();e!==(o.props.getValue()||"")&&o.props.onValueChange(e),o.toggleEditing(!1)},o.focusTextarea=function(){if(o.elementRef){o.elementRef.focus&&o.elementRef.focus();var e=o.elementRef.value.length;o.elementRef.setSelectionRange(e,e),o.elementRef.scrollTop=o.elementRef.scrollHeight-o.elementRef.offsetHeight}},o.setElementRef=function(e){o.elementRef=e},o.elementRef=null,o.state={isEditing:!1,editingValue:""},n.initEditing&&setTimeout(o.startEditing,50),o}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.placeholder,n=e.isEditLocked,r=e.getValue,a=this.state,o=a.isEditing,i=a.editingValue,s=r()||"";return n?c.a.createElement("span",{className:f+" span"},s):o?c.a.createElement("textarea",{ref:this.setElementRef,className:f+" textarea",value:i,placeholder:t||"",onChange:this.onEditUpdate,onKeyDown:this.onEditKeyPress,onBlur:this.onEditFinish}):c.a.createElement("span",{className:f+" span",onDoubleClick:this.startEditing},s)},t}(i.PureComponent);h.propTypes={onValueChange:u.a.func,getValue:u.a.func,placeholder:u.a.string,isMultiLine:u.a.bool,initEditing:u.a.bool,isEditLocked:u.a.bool};var v=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n));return o.onEditUpdate=function(e){return!o.props.isEditLocked&&o.setState({editingValue:e.target.value})},o.onEditKeyPress=function(e){return y(e)&&(!o.props.isMultiLine||!e.shiftKey)&&o.onEditFinish(e)},o.onEditFinish=Object(l.b)(function(){var e=o.getEditingValue();e&&o.props.onValueChange(e),o.setState({editingValue:""})}),o.getEditingValue=function(){return(o.state.editingValue||"").trim()},o.focus=function(){return o.elementRef&&o.elementRef.focus()},o.setElementRef=function(e){o.elementRef=e},o.elementRef=null,o.state={editingValue:""},o}return o(t,e),t.prototype.componentDidUpdate=function(){if(this.props.isAutoHeight&&this.elementRef){this.elementRef.style.height="auto";var e=Math.max(this.elementRef.scrollHeight+2,this.elementRef.offsetHeight);this.elementRef.style.height=e+"px"}},t.prototype.render=function(){var e=this.props.placeholder,t=void 0===e?"":e,n=this.state.editingValue;return c.a.createElement("textarea",{ref:this.setElementRef,className:m,value:n,placeholder:t,rows:1,onChange:this.onEditUpdate,onKeyDown:this.onEditKeyPress})},t}(i.PureComponent);v.propTypes={onValueChange:u.a.func,placeholder:u.a.string,isMultiLine:u.a.bool,isEditLocked:u.a.bool,isAutoHeight:u.a.bool};var y=function(e){return"Enter"===e.key||13===e.which||13===e.keyCode}},UH9f:function(e,t){},UJYK:function(e,t){},UoS1:function(e,t,n){"use strict";var r=n("duU4");n("Gj+y"),n("eDPF"),n("bLnW"),n("yGXk"),n("wVGC"),n("OQwk"),n("R1tl");t.a=r.a},V9Vg:function(e,t,n){"use strict";function r(e,t){if(!e||e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function a(e){var t=void 0,n=void 0;return function(){return r(n,arguments)||(t=e.apply(null,arguments),n=arguments),t}}n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o}),n.d(t,"d",function(){return s}),n.d(t,"c",function(){return u});var o=function(e){return function(t){return t&&t.preventDefault(),t&&t.stopPropagation(),e&&e(t)}},i={"&amp;":"&","&lt;":"<","&gt;":">"},c=function(e){return i[e]||e},s=function(e){return e&&e.replace(/(&amp;|&lt;|&gt;)/g,c)},u=function(e,t,n){return Math.min(Math.max(e,t),n)}},VLfM:function(e,t,n){"use strict";var r=n("ggpw"),a=n("o/bl"),o=n("sOkL"),i=n("nvBK");n.n(i);t.a={actions:{selectLayer:o.d},container:r.a,reducer:a.a}},"Vb1+":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return O});var i=n("rwcW"),c=n.n(i),s=n("BSVj"),u=n.n(s),l=n("ttkw"),p=(n.n(l),n("SvKs")),d=n("hdYV"),f=n.n(d),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=function(e){function t(){r(this,t);var n=a(this,e.call(this));return n.handleZoomIn=function(){return n.handleZoomStep(1)},n.handleZoomOut=function(){return n.handleZoomStep(-1)},n.setElementRef=function(e){n.elementRef=e},n.elementRef=null,n.state={canPrev:!1},n}return o(t,e),t.prototype.componentDidMount=function(){var e=this;$(this.elementRef).tooltip({selector:"a",container:"body",placement:"left"}),y.updateBackButton=function(t){e.setState({canPrev:t})}},t.prototype.handleZoomStep=function(e){var t=this.props,n=t.project,r=t.dispatch,a=E(n.scale,e);r({type:"projects:update-local",payload:m({},this.props.project,{scale:a})}),y.currentProject.scale=a,$("body").data("scale",a),y.runner.reload(!0)},t.prototype.render=function(){var e=this.props,t=e.project,n=e.isLayerActive,r=e.dispatch,a=this.state.canPrev,o=_(t.scale),i=o.canZoomIn,s=o.canZoomOut;return c.a.createElement("div",{ref:this.setElementRef,className:f.a.actions},b()&&c.a.createElement("a",{className:"design",title:I18N.back,onClick:g},c.a.createElement("span",{className:"icon icon-times"})),!t.template&&c.a.createElement(p.a,{project:t,disabled:n,dispatch:r}),c.a.createElement("a",{id:"back_prev",disabled:!a,title:I18N.link_back,onClick:w},c.a.createElement("span",{className:"icon icon-arrow-left"})),c.a.createElement("a",{id:"zoomin",disabled:!i,title:I18N.zoomin,onClick:this.handleZoomIn},c.a.createElement("span",{className:"icon icon-zoom-in"})),c.a.createElement("a",{id:"zoomout",disabled:!s,title:I18N.zoomout,onClick:this.handleZoomOut},c.a.createElement("span",{className:"icon icon-zoom-out"})))},t}(i.PureComponent);h.propTypes={project:u.a.object,isLayerActive:u.a.bool,dispatch:u.a.func};var v=window,y=v.MB,b=function(){return!y.f.inSharing&&"file:"!==window.location.protocol},g=function(){return y.designer.backDesign()},w=function(){return y.runner.backPrev()},E=function(e,t){var n=y.config.SCALES.indexOf(e);return y.config.SCALES[n+t]},_=function(e){var t=y.config.SCALES.indexOf(e);return{canZoomIn:!(t===y.config.SCALES.length-1),canZoomOut:!(0===t)}},O=Object(l.connect)(function(e){return{isLayerActive:e.container.previewPanel.isLayerActive}})(h)},Vd22:function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},VzqO:function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=n},W7ON:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return h});var i=n("rwcW"),c=n.n(i),s=n("BSVj"),u=n.n(s),l=n("WCZ4"),p=n("V9Vg"),d=n("5HQq"),f=n.n(d),m=f.a["screen-node-content"],h=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.cid,n=e.level,r=e.treeProps,a=e.className,o=n+1;return c.a.createElement("div",{className:a},r.childListMap[t].map(function(e){return c.a.createElement(v,{key:e,cid:e,level:o,treeProps:r})}))},t}(i.PureComponent);h.propTypes={cid:u.a.string,level:u.a.number,treeProps:u.a.object,className:u.a.string};var v=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n));return o.screenTreeOperations={doShowComment:Object(p.b)(function(){return o.props.treeProps.doShowComment(o.props.cid)}),doSelectScreen:Object(p.b)(function(){return o.props.treeProps.doSelectScreen(o.props.cid)}),doToggleExpand:Object(p.b)(function(){return o.props.treeProps.doToggleExpand(o.props.cid)})},o}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.cid,n=e.level,r=e.treeProps,a=r.nodeMap,o=r.childListMap,i=r.collapseKeySet,s=r.currentScreenCid,u=r.screenCommentThreadCountMap,l=o[t]&&o[t].length>0,d=s===t,f=!i.has(t),m=Object(p.d)(a[t].screen.name),v=u[t]||0;return c.a.createElement("div",null,c.a.createElement(y,{level:n,hasChildTab:l,isSelect:d,isExpand:f,screenName:m,screenCommentThreadCount:v,screenTreeOperations:this.screenTreeOperations}),l&&f&&c.a.createElement(h,{cid:t,level:n,treeProps:r}))},t}(i.PureComponent);v.propTypes={cid:u.a.string,level:u.a.number,treeProps:u.a.object};var y=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.level,n=e.hasChildTab,r=e.isSelect,a=e.isExpand,o=e.screenName,i=e.screenCommentThreadCount,s=e.screenTreeOperations,u=s.doShowComment,p=s.doSelectScreen,d=s.doToggleExpand,f=r?n?d:null:p;return c.a.createElement("div",{className:m+" "+(r?"select":""),style:{paddingLeft:b(t)},onClick:f,title:o,"data-toggle":"tooltip","data-placement":"left"},c.a.createElement("div",{className:"toggle-expand",onClick:n?d:null},n&&c.a.createElement(l.a,{type:"fa",name:a?"fa-caret-down":"fa-caret-right"})),c.a.createElement(l.a,{type:"mb",name:"layout",className:"screen-icon"}),c.a.createElement("span",{className:"screen-name"},o),i>=1&&c.a.createElement("span",{className:"toggle-comment",onClick:u},c.a.createElement(l.a,{type:"mb",name:"single-comment",className:"icon-comment"}),i))},t}(i.PureComponent);y.propTypes={level:u.a.number,hasChildTab:u.a.bool,isSelect:u.a.bool,isExpand:u.a.bool,screenName:u.a.string,screenCommentThreadCount:u.a.number,screenTreeOperations:u.a.object};var b=function(e){return 2+12*e+"px"}},WCZ4:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e){var t=e.name,n=void 0===t?"":t,a=e.type,o=void 0===a?"svg":a,i=e.className,c=void 0===i?"":i,p=r(e,["name","type","className"]),d="mb"===o?"icon":o;return n=n.replace(/^(icon|fa|md|ci|mb)\-/gi,""),"svg"===o?s.a.createElement("svg",u({className:"icon "+c},p),s.a.createElement("use",{xlinkHref:"/icons/sprite.svg?"+l+"#"+n})):s.a.createElement("span",u({className:"icon "+o+" "+d+"-"+n+" "+c},p),"md"===o&&n)}t.a=a;var o=n("BSVj"),i=n.n(o),c=n("rwcW"),s=n.n(c),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l="0.2.4";a.propTypes={name:i.a.string,type:i.a.string,className:i.a.string}},XDMB:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("BSVj"),c=n.n(i),s=n("rwcW"),u=n.n(s),l=n("Un7v"),p=n.n(l),d=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return o(t,e),t.prototype.componentDidMount=function(){this.resize()},t.prototype.componentDidUpdate=function(){this.resize()},t.prototype.resize=function(){var e=p.a.findDOMNode(this);e.style.width="",e.style.height="";var t=e.getBoundingClientRect(),n=t.width,r=t.height;n=Math.round(n),r=Math.round(r),n%2!=0&&(n+=1),r%2!=0&&(r+=1),e.style.width=n+"px",e.style.height=r+"px"},t.prototype.render=function(){return u.a.createElement("div",this.props,this.props.children)},t}(s.Component);t.a=d,d.propTypes={children:c.a.oneOfType([c.a.element,c.a.array])}},XNJz:function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a={isOpen:!1,type:"alert",title:"",desc:"",onClose:function(){return null},onCancel:null,onConfirm:null,canCancel:!0,canConfirm:!0};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments[1],n=t.type,o=t.payload;switch(n){case"container:modal:open":return r({},o,{isOpen:!0});case"container:modal:close":return r({},a,{isOpen:!1})}return e}},Xc71:function(e,t,n){"use strict";var r=n("PpJU"),a=(n.n(r),n("DZQR")),o=a.a.Screen,i=[],c=Object(r.createStateStore)(i),s=c.getState,u=c.setState,l=c.wrapEntry,p=function(e,t){return l(function(n,r,a){var o=r.dispatch,i=a&&a.payload;o({type:"reducer:screens:update",payload:e(n,i,t)})})},d={"screens:refresh":p(o.refreshStateList,!1),"screens:add":p(o.addState,!1),"screens:add-local":p(o.addState,!0),"screens:update":p(o.updateState,!1),"screens:update-local":p(o.updateState,!0),"screens:delete":p(o.deleteState,!1),"screens:delete-local":p(o.deleteState,!0)};t.a={entryMap:d,getState:s,setState:u}},"XsO/":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("q8/F"),c=n.n(i),s=n("BSVj"),u=n.n(s),l=n("rwcW"),p=n.n(l),d=n("ttkw"),f=(n.n(d),n("DVJH")),m=(n.n(f),n("+AyD")),h=n.n(m),v=n("TfEB"),y=n("WCZ4"),b=n("sF+Z"),g=n.n(b),w=function(e){function t(){return r(this,t),a(this,e.call(this))}return o(t,e),t.prototype.componentDidUpdate=function(){this.$scrollContainer&&(this.$scrollContainer.scrollTop=0)},t.prototype.render=function(){var e=this,t=this.props.layer;return t?p.a.createElement("div",{className:g.a.container,ref:function(t){return e.$scrollContainer=t}},p.a.createElement("div",{className:g.a.infoHeader},t.name),p.a.createElement("div",{className:g.a.panel},p.a.createElement("div",{className:g.a.panelRow},p.a.createElement("div",{className:g.a.flexFull},p.a.createElement("span",{className:g.a.infoKey+" "+g.a.fixedWidth},"X:"),p.a.createElement("span",{className:g.a.infoValue},t.src_left)),p.a.createElement("div",{className:g.a.flexFull},p.a.createElement("span",{className:g.a.infoKey+" "+g.a.fixedWidth},"Y:"),p.a.createElement("span",{className:g.a.infoValue},t.src_top))),p.a.createElement("div",{className:g.a.panelRow},p.a.createElement("div",{className:g.a.flexFull},p.a.createElement("span",{className:g.a.infoKey+" "+g.a.fixedWidth},I18N.preview_panel.width+":"),p.a.createElement("span",{className:g.a.infoValue},t.src_width)),p.a.createElement("div",{className:g.a.flexFull},p.a.createElement("span",{className:g.a.infoKey+" "+g.a.fixedWidth},I18N.preview_panel.height+":"),p.a.createElement("span",{className:g.a.infoValue},t.src_height)))),t.text&&p.a.createElement("div",null,p.a.createElement("div",{className:g.a.infoHeader},p.a.createElement("span",null,I18N.preview_panel.text),p.a.createElement(_,{text:t.text,target:"."+g.a.textContent})),p.a.createElement("div",{className:g.a.panel},p.a.createElement("div",{className:g.a.panelRow+" "+g.a.infoValue},p.a.createElement("div",{className:g.a.textContent,dangerouslySetInnerHTML:{__html:t.text}})))),t.text_styles&&t.text_styles.length>0&&p.a.createElement("div",{className:g.a.panel},t.text_styles.map(function(e,n){var r=e.color&&Object(v.d)(e.color),a=t.text&&MB.strip(t.text).substr(e.location||0,e.length);return p.a.createElement("div",{key:n},p.a.createElement("div",{className:g.a.infoHeader},I18N.preview_panel.typeface+': "'+a+'"'),e.font_face&&p.a.createElement("div",{className:g.a.panelRow},p.a.createElement("span",{className:g.a.flexFull+" "+g.a.infoValue},e.font_face)),e.font_size&&p.a.createElement("div",{className:g.a.panelRow},p.a.createElement("div",{className:g.a.flexFull},p.a.createElement("span",{className:g.a.infoKey},I18N.preview_panel.font_size+":")),p.a.createElement("span",{className:g.a.flexFull+" "+g.a.infoValue},e.font_size)),t.alignment&&p.a.createElement("div",{className:g.a.panelRow},p.a.createElement("div",{className:g.a.flexFull},p.a.createElement("span",{className:g.a.infoKey},I18N.preview_panel.align+":")),p.a.createElement("span",{className:g.a.flexFull+" "+g.a.infoValue},t.alignment)),t.line_height>0&&p.a.createElement("div",{className:g.a.panelRow},p.a.createElement("div",{className:g.a.flexFull},p.a.createElement("span",{className:g.a.infoKey},I18N.preview_panel.line_height+":")),p.a.createElement("span",{className:g.a.flexFull+" "+g.a.infoValue},t.line_height)),p.a.createElement("div",{className:g.a.panelRow},p.a.createElement("div",{className:g.a.flexFull},p.a.createElement("span",{className:g.a.infoKey},I18N.preview_panel.offset+":")),p.a.createElement("span",{className:g.a.flexFull+" "+g.a.infoValue},(e.location||0)+1)),p.a.createElement("div",{className:g.a.panelRow},p.a.createElement("div",{className:g.a.flexFull},p.a.createElement("span",{className:g.a.infoKey},I18N.preview_panel.length+":")),p.a.createElement("span",{className:g.a.flexFull+" "+g.a.infoValue},e.length)),e.color&&p.a.createElement("div",{className:g.a.panelRow},p.a.createElement("div",{className:g.a.flexFull+" "+g.a.colorRow},p.a.createElement("span",{className:g.a.colorBlock,style:{backgroundColor:r}}),p.a.createElement("div",{className:g.a.colorContent},p.a.createElement("span",{className:g.a.infoValue},Object(v.e)(r).toUpperCase()),p.a.createElement("span",{className:g.a.infoValue},r)))))})),t.bg_colors&&t.bg_colors.length>0&&p.a.createElement("div",null,p.a.createElement("div",{className:g.a.infoHeader},I18N.preview_panel.Fills),p.a.createElement("div",{className:g.a.panel},t.bg_colors.map(function(e,t){return p.a.createElement("div",{key:t,className:g.a.panelRow},p.a.createElement("div",{className:g.a.flexFull+" "+g.a.colorRow},p.a.createElement("span",{className:g.a.colorBlock,style:{backgroundColor:e.value}}),p.a.createElement("div",{className:g.a.colorContent},p.a.createElement("span",{className:g.a.infoValue},Object(v.e)(e.value).toUpperCase()),p.a.createElement("span",{className:g.a.infoValue},Object(v.a)(e.value)))))}))),t.image&&t.image_set&&t.image_set_zip&&p.a.createElement(E,{image:t.image,imageSet:t.image_set,imageSetZip:t.image_set_zip,id:t.id}),t.borders&&t.borders.length>0&&p.a.createElement("div",null,p.a.createElement("div",{className:g.a.infoHeader},I18N.preview_panel.borders),p.a.createElement("div",{className:g.a.panel},t.borders.map(function(e,n){return p.a.createElement("div",{key:n},e.thickness&&p.a.createElement("div",{className:g.a.panelRow},p.a.createElement("div",{className:g.a.flexFull},p.a.createElement("span",{className:g.a.infoKey},I18N.preview_panel.thickness)),p.a.createElement("div",{className:g.a.flexFull},p.a.createElement("span",{className:g.a.infoValue},e.thickness))),e.position&&p.a.createElement("div",{className:g.a.panelRow},p.a.createElement("div",{className:g.a.flexFull},p.a.createElement("span",{className:g.a.infoKey},I18N.preview_panel.position)),p.a.createElement("div",{className:g.a.flexFull},p.a.createElement("span",{className:g.a.infoValue},e.position))),t.bd_radius>0&&p.a.createElement("div",{className:g.a.panelRow},p.a.createElement("div",{className:g.a.flexFull},p.a.createElement("span",{className:g.a.infoKey},I18N.preview_panel.bd_radius)),p.a.createElement("div",{className:g.a.flexFull},p.a.createElement("span",{className:g.a.infoValue},t.bd_radius))),e.color&&p.a.createElement("div",{key:n,className:g.a.panelRow},p.a.createElement("div",{className:g.a.flexFull+" "+g.a.colorRow},p.a.createElement("span",{className:g.a.colorBlock,style:{backgroundColor:e.color}}),p.a.createElement("div",{className:g.a.colorContent},p.a.createElement("span",{className:g.a.infoValue},Object(v.e)(e.color).toUpperCase()),p.a.createElement("span",{className:g.a.infoValue},Object(v.a)(e.color))))))})))):null},t}(l.Component);w.propTypes={layer:u.a.object,currentScreen:u.a.object};var E=function(e){function t(){r(this,t);var n=a(this,e.call(this));return n.sendAnalysis=n.sendAnalysis.bind(n),n}return o(t,e),t.prototype.sendAnalysis=function(e){return function(){MB.ga("send","event","feature","使用了图层导出 "+e+" 功能"),MB.mp("使用了图层导出 "+e+" 功能")}},t.prototype.render=function(){var e=this.props,t=e.imageSet,n=e.imageSetZip,r=e.image,a=t.filter(function(e){return 1!==e.size}).map(function(e){return e.src+" "+e.size+"x"}).join(", ");return p.a.createElement("div",null,p.a.createElement("div",{className:g.a.infoHeader},"素材下载"),p.a.createElement("div",{className:g.a.panel},p.a.createElement("div",{className:g.a.panelRow},p.a.createElement("img",{className:g.a.image,src:t[0].src,srcSet:a})),p.a.createElement("div",{className:g.a.panelRow+" "+g.a.download},p.a.createElement("div",{className:g.a.downloadFiletype},p.a.createElement("span",{className:g.a.downloadFiletypeIcon},"PNG"),p.a.createElement("span",null,"3 位图ZIP文件")),p.a.createElement("a",{href:n,download:!0,onClick:this.sendAnalysis("pdf")},p.a.createElement(y.a,{name:"download"}))),p.a.createElement("div",{className:g.a.panelRow+" "+g.a.download},p.a.createElement("div",{className:g.a.downloadFiletype},p.a.createElement("span",{className:g.a.downloadFiletypeIcon},"PDF"),p.a.createElement("span",null,"1 矢量文件")),p.a.createElement("a",{href:r,download:!0,onClick:this.sendAnalysis("png")},p.a.createElement(y.a,{name:"download"})))))},t}(l.PureComponent);E.propTypes={imageSet:u.a.array,imageSetZip:u.a.string,image:u.a.string,id:u.a.number};var _=function(e){function t(){r(this,t);var n=a(this,e.call(this));return n.onClipboardEvent=n.onClipboardEvent.bind(n),n}return o(t,e),t.prototype.componentDidMount=function(){var e=this;this.clipboard=new h.a(this.$copyBtn,{target:function(){return document.querySelector(e.props.target)}}),this.tooltip=f(this.$copyBtn).tooltip({trigger:"manual",title:function(){return e.error?"Press ⌘ or Ctrl + C to copy":I18N.preview_panel.copied}}),this.clipboard.on("success",function(t){e.error=!1,window.getSelection().removeAllRanges(),e.onClipboardEvent()}),this.clipboard.on("error",function(t){e.error=!0,e.onClipboardEvent()})},t.prototype.componentWillUnmount=function(){this.clipboard.destroy(),this.tooltip.tooltip("destroy")},t.prototype.onClipboardEvent=function(){var e=this;MB.ga("send","event","feature","使用了文字复制"),MB.mp("使用了文字复制"),this.timer&&clearTimeout(this.timer),this.tooltip.tooltip("show"),this.timer=window.setTimeout(function(){e.tooltip.tooltip("hide")},500)},t.prototype.render=function(){var e=this;return p.a.createElement("span",{className:g.a.copyBtn,ref:function(t){return e.$copyBtn=t},"data-placement":"left"},I18N.copy)},t}(l.Component);_.propTypes={target:u.a.string};var O=function(e){var t=e.container.layers,n=t.resourceByScreen,r=t.visibilityScreenID,a=t.activeLayerID,o=n[r];if(o)return c()(o.layers,function(e){return e.id===a})},C=function(e){return{layer:O(e)}};t.a=Object(d.connect)(C)(w)},Y7r3:function(e,t){e.exports={select:"_19hND8_zGSOgM376qVcFdq",default:"_1OdlEyHcjBo0te-woIc_Oq",options:"_14eZNNtPtiAqGldIusMbQx",option:"_2KDo9VcwGpqKoI8tMX-4an",show:"cmwkdFmNTxA6REmFpNEOI",optgroup:"_2vG7YLpSpcZPteVW92xxSp","group-title":"_2mA4v_EPNER0oepDd4u4rn","sub-option":"_16oJp3en4h7scXJY_RYBB7"}},YEFR:function(e,t,n){"use strict";function r(e,t){for(var n in t){var r=t[n];r.configurable=r.enumerable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n,r)}return e}function a(e){return("*"===e?b.wildcard:s.n.array(e)?b.array:s.n.stringableFunc(e)?b.default:s.n.func(e)?b.predicate:b.default)(e)}function o(e,t,n){function r(e){o(),n(e,!0)}function a(e){i.push(e),e.cont=function(a,o){u||(Object(s.t)(i,e),e.cont=s.r,o?r(a):(e===t&&(c=a),i.length||(u=!0,n(c))))}}function o(){u||(u=!0,i.forEach(function(e){e.cont=s.r,e.cancel()}),i=[])}var i=[],c=void 0,u=!1;return a(t),{addTask:a,cancelAll:o,abort:r,getTasks:function(){return i},taskNames:function(){return i.map(function(e){return e.name})}}}function i(e){var t=e.context,n=e.fn,r=e.args;if(s.n.iterator(n))return n;var a=void 0,o=void 0;try{a=n.apply(t,r)}catch(e){o=e}return s.n.iterator(a)?a:o?Object(s.q)(function(){throw o}):Object(s.q)(function(){var e=void 0,t={done:!1,value:a},n=function(e){return{done:!0,value:e}};return function(r){return e?n(r):(e=!0,t)}}())}function c(e){function t(){ee.isRunning&&!ee.isCancelled&&(ee.isCancelled=!0,m(y))}function n(){e._isRunning&&!e._isCancelled&&(e._isCancelled=!0,te.cancelAll(),b(y))}function m(t,n){if(!ee.isRunning)throw new Error("Trying to resume an already finished generator");try{var r=void 0;n?r=e.throw(t):t===y?(ee.isCancelled=!0,m.cancel(),r=s.n.func(e.return)?e.return(y):{done:!0,value:y}):r=t===v?s.n.func(e.return)?e.return():{done:!0}:e.next(t),r.done?(ee.isMainRunning=!1,ee.cont&&ee.cont(r.value)):w(r.value,z,"",m)}catch(e){ee.isCancelled&&Y("error","uncaught at "+q,e.message),ee.isMainRunning=!1,ee.cont(e,!0)}}function b(t,n){e._isRunning=!1,Q.close(),n?(t instanceof Error&&(t.sagaStack="at "+q+" \n "+(t.sagaStack||t.stack)),$.cont||(Y("error","uncaught",t.sagaStack||t.stack),t instanceof Error&&J&&J(t)),e._error=t,e._isAborted=!0,e._deferredEnd&&e._deferredEnd.reject(t)):(e._result=t,e._deferredEnd&&e._deferredEnd.resolve(t)),$.cont&&$.cont(t,n),$.joiners.forEach(function(e){return e.cb(t,n)}),$.joiners=null}function w(e,t){function n(e,t){i||(i=!0,a.cancel=s.r,Z&&(t?Z.effectRejected(o,e):Z.effectResolved(o,e)),a(e,t))}var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments[3],o=Object(s.v)();Z&&Z.effectTriggered({effectId:o,parentEffectId:t,label:r,effect:e});var i=void 0;n.cancel=s.r,a.cancel=function(){if(!i){i=!0;try{n.cancel()}catch(e){Y("error","uncaught at "+q,e.message)}n.cancel=s.r,Z&&Z.effectCancelled(o)}};var c=void 0;return s.n.promise(e)?E(e,n):s.n.helper(e)?x(g(e),o,n):s.n.iterator(e)?_(e,o,q,n):s.n.array(e)?K(e,o,n):(c=l.b.take(e))?O(c,n):(c=l.b.put(e))?C(c,n):(c=l.b.all(e))?N(c,o,n):(c=l.b.race(e))?T(c,o,n):(c=l.b.call(e))?S(c,o,n):(c=l.b.cps(e))?j(c,n):(c=l.b.fork(e))?x(c,o,n):(c=l.b.join(e))?k(c,n):(c=l.b.cancel(e))?M(c,n):(c=l.b.select(e))?P(c,n):(c=l.b.actionChannel(e))?L(c,n):(c=l.b.flush(e))?I(c,n):(c=l.b.cancelled(e))?R(c,n):(c=l.b.getContext(e))?A(c,n):(c=l.b.setContext(e))?D(c,n):n(e)}function E(e,t){var n=e[s.a];s.n.func(n)?t.cancel=n:s.n.func(e.abort)&&(t.cancel=function(){return e.abort()}),e.then(t,function(e){return t(e,!0)})}function _(e,t,n,r){c(e,B,F,V,X,W,t,n,r)}function O(e,t){var n=e.channel,r=e.pattern,o=e.maybe;n=n||Q;var i=function(e){return e instanceof Error?t(e,!0):t(Object(p.d)(e)&&!o?v:e)};try{n.take(i,a(r))}catch(e){return t(e,!0)}t.cancel=i.cancel}function C(e,t){var n=e.channel,r=e.action,a=e.resolve;Object(u.a)(function(){var e=void 0;try{e=(n?n.put:F)(r)}catch(e){if(n||a)return t(e,!0);Y("error","uncaught at "+q,e.stack||e.message||e)}if(!a||!s.n.promise(e))return t(e);E(e,t)})}function S(e,t,n){var r=e.context,a=e.fn,o=e.args,i=void 0;try{i=a.apply(r,o)}catch(e){return n(e,!0)}return s.n.promise(i)?E(i,n):s.n.iterator(i)?_(i,t,a.name,n):n(i)}function j(e,t){var n=e.context,r=e.fn,a=e.args;try{var o=function(e,n){return s.n.undef(e)?t(n):t(e,!0)};r.apply(n,a.concat(o)),o.cancel&&(t.cancel=function(){return o.cancel()})}catch(e){return t(e,!0)}}function x(e,t,n){var r=e.context,a=e.fn,o=e.args,l=e.detached,p=i({context:r,fn:a,args:o});try{Object(u.c)();var d=c(p,B,F,V,X,W,t,a.name,l?null:s.r);l?n(d):p._isRunning?(te.addTask(d),n(d)):p._error?te.abort(p._error):n(d)}finally{Object(u.b)()}}function k(e,t){if(e.isRunning()){var n={task:$,cb:t};t.cancel=function(){return Object(s.t)(e.joiners,n)},e.joiners.push(n)}else e.isAborted()?t(e.error(),!0):t(e.result())}function M(e,t){e===s.d&&(e=$),e.isRunning()&&e.cancel(),t()}function N(e,t,n){function r(){o===a.length&&(i=!0,n(s.n.array(e)?s.f.from(f({},c,{length:a.length})):c))}var a=Object.keys(e);if(!a.length)return n(s.n.array(e)?[]:{});var o=0,i=void 0,c={},u={};a.forEach(function(e){var t=function(t,a){i||(a||Object(p.d)(t)||t===v||t===y?(n.cancel(),n(t,a)):(c[e]=t,o++,r()))};t.cancel=s.r,u[e]=t}),n.cancel=function(){i||(i=!0,a.forEach(function(e){return u[e].cancel()}))},a.forEach(function(n){return w(e[n],t,n,u[n])})}function T(e,t,n){var r=void 0,a=Object.keys(e),o={};a.forEach(function(e){var t=function(t,a){if(!r)if(a)n.cancel(),n(t,!0);else if(!Object(p.d)(t)&&t!==v&&t!==y){var o;n.cancel(),r=!0,n((o={},o[e]=t,o))}};t.cancel=s.r,o[e]=t}),n.cancel=function(){r||(r=!0,a.forEach(function(e){return o[e].cancel()}))},a.forEach(function(n){r||w(e[n],t,n,o[n])})}function P(e,t){var n=e.selector,r=e.args;try{var a=n.apply(void 0,[V()].concat(r));t(a)}catch(e){t(e,!0)}}function L(e,t){var n=e.pattern,r=e.buffer,o=a(n);o.pattern=n,t(Object(p.c)(B,r||d.a.fixed(),o))}function R(e,t){t(!!ee.isCancelled)}function I(e,t){e.flush(t)}function A(e,t){t(X[e])}function D(e,t){s.s.assign(X,e),t()}var B=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return s.r},F=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.r,V=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s.r,U=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},W=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},z=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,q=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"anonymous",H=arguments[8];Object(s.g)(e,s.n.iterator,h);var K=Object(s.k)(N,Object(s.w)("[...effects]","all([...effects])")),Z=W.sagaMonitor,G=W.logger,J=W.onError,Y=G||s.p,Q=Object(p.e)(B),X=Object.create(U);m.cancel=s.r;var $=function(e,t,a,o){var i,c,u;return a._deferredEnd=null,c={},c[s.e]=!0,c.id=e,c.name=t,i="done",u={},u[i]=u[i]||{},u[i].get=function(){if(a._deferredEnd)return a._deferredEnd.promise;var e=Object(s.i)();return a._deferredEnd=e,a._isRunning||(a._error?e.reject(a._error):e.resolve(a._result)),e.promise},c.cont=o,c.joiners=[],c.cancel=n,c.isRunning=function(){return a._isRunning},c.isCancelled=function(){return a._isCancelled},c.isAborted=function(){return a._isAborted},c.result=function(){return a._result},c.error=function(){return a._error},c.setContext=function(e){Object(s.g)(e,s.n.object,Object(s.h)("task",e)),s.s.assign(X,e)},r(c,u),c}(z,q,e,H),ee={name:q,cancel:t,isRunning:!0},te=o(q,ee,b);return H&&(H.cancel=n),e._isRunning=!0,m(),$}t.a=c;var s=n("wVGC"),u=n("MNlm"),l=n("OBh0"),p=n("eDPF"),d=n("bLnW"),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h="proc first argument (Saga function result) must be an iterator",v={toString:function(){return"@@redux-saga/CHANNEL_END"}},y={toString:function(){return"@@redux-saga/TASK_CANCEL"}},b={wildcard:function(){return s.o},default:function(e){return"symbol"===(void 0===e?"undefined":m(e))?function(t){return t.type===e}:function(t){return t.type===String(e)}},array:function(e){return function(t){return e.some(function(e){return a(e)(t)})}},predicate:function(e){return function(t){return e(t)}}},g=function(e){return{fn:e}}},YKT3:function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},YwF9:function(e,t){function n(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}e.exports=n},ZAXM:function(e,t){function n(e){return e}e.exports=n},ZCvY:function(e,t,n){"use strict";var r=n("PpJU"),a=(n.n(r),n("DZQR")),o=a.a.Comment,i=[],c=Object(r.createStateStore)(i),s=c.getState,u=c.setState,l=c.wrapEntry,p=function(e,t){return l(function(n,r,a){var o=r.dispatch,i=a&&a.payload;o({type:"reducer:comments:update",payload:e(n,i,t)})})},d={"comments:refresh":p(o.refreshStateList,!1),"comments:add":p(o.addState,!1),"comments:add-local":p(o.addState,!0),"comments:update":p(o.updateState,!1),"comments:update-local":p(o.updateState,!0),"comments:delete":p(o.deleteState,!1),"comments:delete-local":p(o.deleteState,!0)};t.a={entryMap:d,getState:s,setState:u}},ZK8R:function(e,t,n){var r=n("fJGl"),a=n("v/Yj"),o=a(function(e,t,n){r(e,t,n)});e.exports=o},ZePI:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.className,n=e.name,r=e.children,a=e.type,o=e.isLabel;return u.a.createElement(o?"label":"div",{className:"form-entry "+t,type:a},n&&u.a.createElement("span",{className:"key"},n),u.a.createElement("span",{className:"val"},r))}function c(e){return u.a.createElement(i,f({},e,{isLabel:!0}))}t.b=i,t.c=c,n.d(t,"d",function(){return m}),n.d(t,"a",function(){return h});var s=n("rwcW"),u=n.n(s),l=n("BSVj"),p=n.n(l),d=n("0SW4"),f=(n.n(d),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e});i.PropTypes={className:p.a.string,children:p.a.any,name:p.a.any,type:p.a.string,isLabel:p.a.bool},i.defaultProps={className:"",isLabel:!1};var m=function(e){function t(){var n,o,i;r(this,t);for(var c=arguments.length,s=Array(c),u=0;u<c;u++)s[u]=arguments[u];return n=o=a(this,e.call.apply(e,[this].concat(s))),o.createOnChangeHandler=function(e,t){return function(){return o.props.onChange(e,t)}},i=n,a(o,i)}return o(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.className,r=t.optionList,a=t.currentOptionIdx,o=(t.onChange,t.isDisabled);return u.a.createElement("span",{className:"radio-group "+n+" "+(o?"is-disabled":"")},r.map(function(t,n){return t&&u.a.createElement("label",{key:n,className:"\n              "+(n===a?"is-checked":"")+"\n              "+(o||t.isDisabled?"is-disabled":"")+"\n            "},u.a.createElement("button",{className:"checker",onClick:!(o||t.isDisabled)&&e.createOnChangeHandler(t.val,n),disabled:o||t.isDisabled}),u.a.createElement("span",{className:"val"},t.name))}))},t}(s.PureComponent);m.PropTypes={className:p.a.string,onChange:p.a.func,optionList:p.a.array,currentOptionIdx:p.a.number,isDisabled:p.a.bool},m.defaultProps={className:""};var h=function(e){function t(){var n,o,i;r(this,t);for(var c=arguments.length,s=Array(c),u=0;u<c;u++)s[u]=arguments[u];return n=o=a(this,e.call.apply(e,[this].concat(s))),o.createOnChangeHandler=function(e){return function(){var t=o.props,n=t.onChange,r=t.currentOptionIdxList,a=new Set(r);a[a.has(e)?"delete":"add"](e),n(a)}},i=n,a(o,i)}return o(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.className,r=t.optionList,a=t.currentOptionIdxList,o=(t.onChange,t.isDisabled),i=new Set(a);return u.a.createElement("span",{className:"checkbox-group "+n+" "+(o?"is-disabled":"")},r.map(function(t,n){return t&&u.a.createElement("label",{key:n,className:"\n              "+(i.has(n)?"is-checked":"")+"\n              "+(o||t.isDisabled?"is-disabled":"")+"\n            "},u.a.createElement("button",{className:"checker",onClick:e.createOnChangeHandler(n),disabled:o||t.isDisabled}),u.a.createElement("span",{className:"val"},t.name))}))},t}(s.PureComponent);h.PropTypes={className:p.a.string,onChange:p.a.func,optionList:p.a.array,currentOptionIdxList:p.a.oneOf([p.a.instanceOf(Set),p.a.array]),isDisabled:p.a.bool},h.defaultProps={className:"",currentOptionIdxList:new Set}},ZfTE:function(e,t,n){var r=n("NNPk"),a=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=a},ZrZW:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("rwcW"),c=n.n(i),s=n("BSVj"),u=n.n(s),l=n("WCZ4"),p=n("TCGe"),d=n("vy15"),f=(n.n(d),function(e){function t(n){r(this,t);var o=a(this,e.call(this,n));return o.onClick=function(){return!o.props.host.team_cid&&o.setState({isModalOpen:!0})},o.onModalClose=function(){return o.setState({isModalOpen:!1})},o.state={isModalOpen:!1},o}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.dispatch,n=e.host,r=e.children,a=this.state.isModalOpen;return c.a.createElement("div",{className:"collaborators",onClick:this.onClick},r,!r&&c.a.createElement(l.a,{name:"user"}),!r&&n.collaborators().length,c.a.createElement(p.a,{dispatch:t,isOpen:a,onClose:this.onModalClose,host:n,userRole:n.owner_id===MB.user.id?"owner":n.roleByUid(MB.user.id)}))},t}(i.PureComponent));t.a=f,f.propTypes={dispatch:u.a.func,host:u.a.object}},"a+hI":function(e,t){function n(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var r=window.getSelection(),a=document.createRange();a.selectNodeContents(e),r.removeAllRanges(),r.addRange(a),t=r.toString()}return t}e.exports=n},"a/EL":function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return u});var r=n("ttkw"),a=(n.n(r),n("V9Vg")),o=n("FCp3"),i=n("Rr6B"),c=n("bmYV");n.d(t,"c",function(){return c.a});var s=Object(r.connect)(function(e){var t=e.model,n=t.commentThreads,r=t.comments,a=t.user,o=t.current,i=t.collaborators,c=t.unreadComment,s=e.container;return{commentContainer:s.comment,currentState:o,collaboratorsState:i,unreadCommentState:c,isActive:s.previewPanel.isCommentActive,commentThreadList:l(n,o.screenCid),selectCommentThread:p(n,o.screenCid,s.comment.select),commentListMap:d(r),userId:a.id}})(o.a),u=Object(r.connect)(function(e){var t=e.model,n=t.current,r=t.user,a=t.commentThreads,o=e.container;return{queryCurrentScreenContainerElement:f(n.screenCid),isActive:o.previewPanel.isCommentActive,commentContainer:o.comment,commentThreadList:l(a,n.screenCid),currentUserRole:n.userRole,userId:r.id}})(i.a),l=Object(a.a)(function(e,t){return e.filter(function(e){return e.screen_cid===t})}),p=Object(a.a)(function(e,t,n){return n&&e.find(function(e){return e.cid===n&&e.screen_cid===t})||null}),d=Object(a.a)(function(e){return e.reduce(function(e,t){return void 0===e[t.thread_cid]?e[t.thread_cid]=[t]:e[t.thread_cid].push(t),e},{})}),f=Object(a.a)(function(e){return function(){return document.querySelector("#pscreen"+e+" .scontainer")}})},aGI7:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("BSVj"),c=n.n(i),s=n("rwcW"),u=n.n(s),l=n("zwaY"),p=n.n(l),d=n("h9so"),f=n.n(d),m=f.a.bind(p.a),h=function(e){function t(){var n,o,i;r(this,t);for(var c=arguments.length,s=Array(c),u=0;u<c;u++)s[u]=arguments[u];return n=o=a(this,e.call.apply(e,[this].concat(s))),o.handleClick=function(e){var t=o.props,n=t.attr,r=t.checked;(0,t.onChange)(!r,n)},i=n,a(o,i)}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.checked,n=e.label,r=e.disabled;return u.a.createElement("div",{className:m("checkbox",{disabled:r}),onClick:!r&&this.handleClick},u.a.createElement("div",{className:m("checker",{checked:t})}),u.a.createElement("label",{htmlFor:""},n))},t}(s.PureComponent);t.a=h,h.propTypes={label:c.a.string,attr:c.a.string,checked:c.a.bool,disabled:c.a.bool,onChange:c.a.func}},aMAB:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("BSVj"),c=n.n(i),s=n("rwcW"),u=n.n(s),l=n("VLfM"),p=n("0uDc"),d=function(e){function t(){return r(this,t),a(this,e.call(this))}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.isFetching,n=e.error;return e.isActive?t?null:n?null:u.a.createElement(p.a,null,u.a.createElement(l.a.container,null)):null},t}(u.a.Component);d.propTypes={isFetching:c.a.bool,error:c.a.string,isActive:c.a.bool},t.a=d},"aTD+":function(e,t){},aTMz:function(e,t){function n(){this.__data__=[],this.size=0}e.exports=n},bBrr:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=!1},bLnW:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments[1],n=new Array(e),r=0,a=0,u=0,l=function(t){n[a]=t,a=(a+1)%e,r++},p=function(){if(0!=r){var t=n[u];return n[u]=null,r--,u=(u+1)%e,t}},d=function(){for(var e=[];r;)e.push(p());return e};return{isEmpty:function(){return 0==r},put:function(p){if(r<e)l(p);else{var f=void 0;switch(t){case i:throw new Error(o);case c:n[a]=p,a=(a+1)%e,u=a;break;case s:f=2*e,n=d(),r=n.length,a=n.length,u=0,n.length=f,e=f,l(p)}}},take:p,flush:d}}n.d(t,"a",function(){return l});var a=n("wVGC"),o="Channel's Buffer overflow!",i=1,c=3,s=4,u={isEmpty:a.o,put:a.r,take:a.r},l={none:function(){return u},fixed:function(e){return r(e,i)},dropping:function(e){return r(e,2)},sliding:function(e){return r(e,c)},expanding:function(e){return r(e,s)}}},bf0W:function(e,t,n){function r(){if(!arguments.length)return[];var e=arguments[0];return a(e)?e:[e]}var a=n("pkLt");e.exports=r},bjwK:function(e,t,n){function r(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var s=null==n?0:i(n);return s<0&&(s=c(r+s,0)),a(e,o(t,3),s)}var a=n("9dxh"),o=n("SaYJ"),i=n("ZAXM"),c=Math.max;e.exports=r},bjzn:function(e,t){},bl4E:function(e,t){function n(e,t){return function(n){return e(t(n))}}e.exports=n},bmYV:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1],n=t.type,r=t.payload;switch(n){case"container:comment:focus":return a({},e,{focus:r.focus});case"container:comment:select":return a({},e,{focus:r.select&&e.focus,select:r.select})}return e}t.a=r;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o={focus:null,select:null}},cja7:function(e,t,n){function r(e,t){return!!(null==e?0:e.length)&&a(e,t,0)>-1}var a=n("YwF9");e.exports=r},"d/qe":function(e,t,n){function r(e,t){return a(e,t)}var a=n("HrA6");e.exports=r},d04f:function(e,t){e.exports={switch:"_1LM6f7H7J3EIquLJtpHQmC",switchOff:"_2tJGjG9fwrKpJqLyfWv8GH _1LM6f7H7J3EIquLJtpHQmC",switchOn:"_1FVJFsajFlykKLPb2IN3I_ _1LM6f7H7J3EIquLJtpHQmC",inner:"_3QV8d0uOpbku0FEX9_pKT7",innerOff:"_2ZUvjE1qn1qTVaVRBTPNlU _3QV8d0uOpbku0FEX9_pKT7",innerOn:"_2ijFBxI3sChrMU6LGrXV6Y _3QV8d0uOpbku0FEX9_pKT7",icon:"_1NL5w37tiiLLzGa1DnO8Yr"}},dB8C:function(e,t){function n(e){return a.call(e)}var r=Object.prototype,a=r.toString;e.exports=n},dhCX:function(e,t,n){function r(e){var t=this.__data__,n=a(t,e);return n<0?void 0:t[n][1]}var a=n("wJQI");e.exports=r},duU4:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(){function e(t){var n=t.getState,r=t.dispatch,d=Object(i.b)();return d.emit=(s.emitter||o.l)(d.emit),e.run=c.a.bind(null,{context:a,subscribe:d.subscribe,dispatch:r,getState:n,sagaMonitor:u,logger:l,onError:p}),function(e){return function(t){u&&u.actionDispatched&&u.actionDispatched(t);var n=e(t);return d.emit(t),n}}}var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.context,a=void 0===n?{}:n,s=r(t,["context"]),u=s.sagaMonitor,l=s.logger,p=s.onError;if(o.n.func(s))throw new Error("Saga middleware no longer accept Generator functions. Use sagaMiddleware.run instead");if(l&&!o.n.func(l))throw new Error("`options.logger` passed to the Saga middleware is not a function!");if(p&&!o.n.func(p))throw new Error("`options.onError` passed to the Saga middleware is not a function!");if(s.emitter&&!o.n.func(s.emitter))throw new Error("`options.emitter` passed to the Saga middleware is not a function!");return e.run=function(){throw new Error("Before running a Saga, you must mount the Saga middleware on the Store using applyMiddleware")},e.setContext=function(e){Object(o.g)(e,o.n.object,Object(o.h)("sagaMiddleware",e)),o.s.assign(a,e)},e}t.a=a;var o=n("wVGC"),i=n("eDPF"),c=n("Gj+y")},e9pK:function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new c.ObjectScheme(e,o({},t),o({},j,n))}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new c.ArrayScheme(e,[t],o({},x,n))}Object.defineProperty(t,"__esModule",{value:!0}),t.arrayActMap=t.objectActMap=t.ArrayOf=t.ObjectAs=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n("77OC"),c=n("pT6C"),s=i.Operation.objectSet,u=i.Operation.objectDelete,l=i.Operation.objectMerge,p=i.Operation.arraySet,d=i.Operation.arrayDelete,f=i.Operation.arrayInsert,m=i.Operation.arrayPush,h=i.Operation.arrayUnshift,v=i.Operation.arrayPop,y=i.Operation.arrayShift,b=i.Operation.arrayConcat,g=i.Operation.arrayMatchPush,w=i.Operation.arrayMatchDelete,E=i.Operation.arrayMatchMove,_=i.Operation.arrayFindPush,O=i.Operation.arrayFindDelete,C=i.Operation.arrayFindMove,S=i.Operation.arrayFindSet,j={set:function(e,t){var n=t.key,r=t.value;return s(e,n,r)},delete:function(e,t){var n=t.key;return u(e,n)},merge:function(e,t){var n=t.merge;return l(e,n)}},x={set:function(e,t){var n=t.index,r=t.value;return p(e,n,r)},delete:function(e,t){var n=t.index;return d(e,n)},insert:function(e,t){var n=t.index,r=t.value;return f(e,n,r)},push:function(e,t){var n=t.value;return m(e,n)},pop:function(e,t){return v(e)},shift:function(e,t){return y(e)},unshift:function(e,t){var n=t.value;return h(e,n)},concat:function(e,t){var n=t.concat;return b(e,n)},matchPush:function(e,t){var n=t.value;return g(e,n)},matchDelete:function(e,t){var n=t.value;return w(e,n)},matchMove:function(e,t){var n=t.index,r=t.value;return E(e,n,r)},findPush:function(e,t){var n=t.find,r=t.value;return _(e,n,r)},findDelete:function(e,t){var n=t.find;return O(e,n)},findMove:function(e,t){var n=t.find,r=t.index;return C(e,n,r)},findSet:function(e,t){var n=t.find,r=t.value;return S(e,n,r)}};t.ObjectAs=r,t.ArrayOf=a,t.objectActMap=j,t.arrayActMap=x},eDPF:function(e,t,n){"use strict";function r(){function e(e){return n.push(e),function(){return Object(c.t)(n,e)}}function t(e){for(var t=n.slice(),r=0,a=t.length;r<a;r++)t[r](e)}var n=[];return{subscribe:e,emit:t}}function a(){function e(){if(i&&u.length)throw Object(c.m)("Cannot have a closed channel with pending takers");if(u.length&&!o.isEmpty())throw Object(c.m)("Cannot have pending takers with non empty buffer")}function t(t){if(e(),Object(c.g)(t,c.n.notUndef,m),!i){if(!u.length)return o.put(t);for(var n=0;n<u.length;n++){var r=u[n];if(!r[c.b]||r[c.b](t))return u.splice(n,1),r(t)}}}function n(t){e(),Object(c.g)(t,c.n.func,"channel.take's callback must be a function"),i&&o.isEmpty()?t(p):o.isEmpty()?(u.push(t),t.cancel=function(){return Object(c.t)(u,t)}):t(o.take())}function r(t){if(e(),Object(c.g)(t,c.n.func,"channel.flush' callback must be a function"),i&&o.isEmpty())return void t(p);t(o.flush())}function a(){if(e(),!i&&(i=!0,u.length)){var t=u;u=[];for(var n=0,r=t.length;n<r;n++)t[n](p)}}var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.a.fixed(),i=!1,u=[];return Object(c.g)(o,c.n.buffer,f),{take:n,put:t,flush:r,close:a,get __takers__(){return u},get __closed__(){return i}}}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.none(),n=arguments[2];arguments.length>2&&Object(c.g)(n,c.n.func,"Invalid match function passed to eventChannel");var r=a(t),o=function(){r.__closed__||(i&&i(),r.close())},i=e(function(e){if(d(e))return void o();n&&!n(e)||r.put(e)});if(r.__closed__&&i(),!c.n.func(i))throw new Error("in eventChannel: subscribe should return a function to unsubscribe");return{take:r.take,flush:r.flush,close:o}}function i(e){var t=o(function(t){return e(function(e){if(e[c.c])return void t(e);Object(u.a)(function(){return t(e)})})});return l({},t,{take:function(e,n){arguments.length>1&&(Object(c.g)(n,c.n.func,"channel.take's matcher argument must be a function"),e[c.b]=n),t.take(e)}})}n.d(t,"a",function(){return p}),n.d(t,"d",function(){return d}),t.b=r,t.c=o,t.e=i;var c=n("wVGC"),s=n("bLnW"),u=n("MNlm"),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p={type:"@@redux-saga/CHANNEL_END"},d=function(e){return e&&"@@redux-saga/CHANNEL_END"===e.type},f="invalid buffer passed to channel factory function",m="Saga was provided with an undefined action"},eWQx:function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"b",function(){return o}),n.d(t,"e",function(){return i}),n.d(t,"a",function(){return c}),n.d(t,"d",function(){return s});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a="SET_VISIBILITY_SCREEN",o="RECEIVE_RESOURCE_SUCCESS",i=function(e,t){return{type:o,payload:r({screenID:e},t)}},c="RECEIVE_RESOURCE_ERROR",s=function(e,t){return{type:c,payload:{screenID:e,error:t}}}},f3dF:function(e,t,n){"use strict";n.d(t,"b",function(){return l});var r=n("2V2H"),a=n("vW98"),o=n("+CkV"),i=n("RVGU"),c=(n.n(i),n("VLfM")),s=n("QTLW");n.d(t,"a",function(){return a.a}),n.d(t,"c",function(){return s.a});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=Object(r.combineReducers)(u({},o.a,c.a.reducer))},fIxY:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},fJGl:function(e,t,n){function r(e,t,n,l,p){e!==t&&i(t,function(i,u){if(s(i))p||(p=new a),c(e,t,u,n,r,l,p);else{var d=l?l(e[u],i,u+"",e,t,p):void 0;void 0===d&&(d=i),o(e,u,d)}},u)}var a=n("lkS/"),o=n("pwsn"),i=n("QuKl"),c=n("3cSw"),s=n("Vd22"),u=n("srSK");e.exports=r},fW1M:function(e,t){function n(){return!1}e.exports=n},g3n2:function(e,t){function n(){return!1}e.exports=n},gL3x:function(e,t,n){"use strict";var r=n("t7oP"),a=Object(r.a)(Object.getPrototypeOf,Object);t.a=a},gWPI:function(e,t,n){function r(e){var t=new e.constructor(e.byteLength);return new a(t).set(new a(e)),t}var a=n("M5st");e.exports=r},ggpw:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("BSVj"),c=n.n(i),s=n("rwcW"),u=n.n(s),l=n("ttkw"),p=(n.n(l),n("/ZVB")),d=n.n(p),f=n("sOkL"),m=n("+YEV"),h=function(e){function t(){r(this,t);var n=a(this,e.call(this));return n.onMouseEnter=n.onMouseEnter.bind(n),n.onMouseLeave=n.onMouseLeave.bind(n),n}return o(t,e),t.prototype.onMouseEnter=function(e){if(-1!==this.props.activeLayerID)return this.props.layer.id===this.props.currentScreen.cid?void this.props.enterLayer(-1):void this.props.enterLayer(this.props.layer.id)},t.prototype.onMouseLeave=function(e){-1!==this.props.activeLayerID&&this.props.enterLayer(-1)},t.prototype.render=function(){var e=this.props,t=e.layer,n=e.selectLayer,r=e.activeLayerID,a=e.enteredLayerID,o=e.currentScreen,i=t.id,c=t.width,s=t.height,l=t.top,p=t.left,f=t.src_width,m=t.src_height;if("group"===t.kind&&!t.image)return null;var h=o.width,v=o.height,y={width:c/h*100+"%",height:s/v*100+"%",top:l/v*100+"%",left:p/h*100+"%",zIndex:Math.pow(2,31)-parseInt(c*s)},b=i===r,g=i===a||-1===a,w=d()("Layer",{"is-active":b,"is-focus":g});return u.a.createElement("div",{className:w,style:y,"data-width":f,"data-height":m,onClick:function(e){n(i)},onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},b&&u.a.createElement("span",{className:"LayerCorner left top"}),b&&u.a.createElement("span",{className:"LayerCorner left bottom"}),b&&u.a.createElement("span",{className:"LayerCorner right top"}),b&&u.a.createElement("span",{className:"LayerCorner right bottom"}))},t}(s.Component);h.propTypes={layer:c.a.object,selectLayer:c.a.func,enterLayer:c.a.func,currentScreen:c.a.object,activeLayerID:c.a.oneOfType([c.a.number,c.a.string]),enteredLayerID:c.a.oneOfType([c.a.number,c.a.string])};var v=function(e){function t(){r(this,t);var n=a(this,e.call(this));return n.onMouseLeave=n.onMouseLeave.bind(n),n}return o(t,e),t.prototype.onMouseEnter=function(e){this.props.enterLayer(-1)},t.prototype.onMouseLeave=function(e){this.props.enterLayer(this.props.currentScreen.cid)},t.prototype.render=function(){var e=this.props,t=e.layers,n=e.selectLayer,r=e.enterLayer,a=e.activeLayerID,o=e.enteredLayerID,i=e.currentScreen;return u.a.createElement("div",null,u.a.createElement("ul",{className:"LayerList",onMouseLeave:this.onMouseLeave},t.map(function(e){return u.a.createElement("li",{key:e.id},u.a.createElement(h,{layer:e,selectLayer:n,enterLayer:r,activeLayerID:a,enteredLayerID:o,currentScreen:i}))})),-1!==a&&u.a.createElement(m.a,null))},t}(s.Component);v.propTypes={layers:c.a.array,selectLayer:c.a.func,enterLayer:c.a.func,currentScreen:c.a.object,activeLayerID:c.a.oneOfType([c.a.number,c.a.string]),enteredLayerID:c.a.oneOfType([c.a.number,c.a.string])};var y=function(e){var t=e.container.layers,n=t.resourceByScreen,r=t.visibilityScreenID,a=t.activeLayerID,o=t.enteredLayerID,i=e.model,c=i.current.screenCid,s=i.screens,u=s.find(function(e){return e.cid===c});return{layers:n[r]?n[r].layers:[],currentScreen:u,activeLayerID:a,enteredLayerID:o}},b=function(e){return{selectLayer:function(t){e(Object(f.d)(t))},enterLayer:function(t){e(Object(f.c)(t))}}};t.a=Object(l.connect)(y,b)(v)},goDS:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0,t.default=void 0;var c=n("rwcW"),s=n("BSVj"),u=r(s),l=n("+xZZ"),p=r(l),d=n("rGtR"),f=(r(d),function(e){function t(n,r){a(this,t);var i=o(this,e.call(this,n,r));return i.store=n.store,i}return i(t,e),t.prototype.getChildContext=function(){return{store:this.store}},t.prototype.render=function(){return c.Children.only(this.props.children)},t}(c.Component));t.default=f,f.propTypes={store:p.default.isRequired,children:u.default.element.isRequired},f.childContextTypes={store:p.default.isRequired}},h9so:function(e,t,n){var r,a;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var a=typeof r;if("string"===a||"number"===a)e.push(this&&this[r]||r);else if(Array.isArray(r))e.push(n.apply(this,r));else if("object"===a)for(var i in r)o.call(r,i)&&r[i]&&e.push(this&&this[i]||i)}}return e.join(" ")}var o={}.hasOwnProperty;void 0!==e&&e.exports?e.exports=n:(r=[],void 0!==(a=function(){return n}.apply(t,r))&&(e.exports=a))}()},hAXT:function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}var r=9007199254740991;e.exports=n},hBf7:function(e,t){function n(e){return e}e.exports=n},hYic:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("vLgD"),a=function(e){return Object(r.a)("/apis/sketch/artboards/"+e+".json")}},hdYV:function(e,t){e.exports={actions:"wRqz24jxhcfaosBl3Iw0K"}},iG26:function(e,t,n){function r(e){return a(this.__data__,e)>-1}var a=n("wJQI");e.exports=r},iRdT:function(e,t){function n(e,t){for(;e&&e.nodeType!==r;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}var r=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var a=Element.prototype;a.matches=a.matchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector}e.exports=n},"iU/O":function(e,t,n){function r(e,t,n,r){var i=!n;n||(n={});for(var c=-1,s=t.length;++c<s;){var u=t[c],l=r?r(n[u],e[u],u,n,e):void 0;void 0===l&&(l=e[u]),i?o(n,u,l):a(n,u,l)}return n}var a=n("2jNP"),o=n("9mgN");e.exports=r},iUwf:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){return(new Date).getTime()},o=function(){function e(){r(this,e),this.mouseState={down:!1,moved:!1},this.scrollState={x:null,y:null,left:null,top:null,target:null},this.windowState={blur:!1},this.coolDownTime=a(),this.coolDownInterval=200}return e.prototype.isCoolDown=function(){var e=a()-this.coolDownTime;return this.coolDownTime+=e,e>this.coolDownInterval},e.prototype.resetCoolDown=function(){this.coolDownTime-=this.coolDownInterval},e.prototype.bind=function(e){var t=this,n=e.onScreenFocus;window.addEventListener("blur",function(){t.windowState.blur=!0}),window.addEventListener("focus",function(){t.windowState.blur&&(t.windowState.blur=!1,n())})},e.prototype.bindMobile=function(e){var t=this,n=e.onOrientationChange;window.addEventListener(void 0!==window.onorientationchange?"orientationchange":"resize",n),$("body").on("touchstart",".pcanvas",function(){t.mouseState.down=!0,t.mouseState.moved=!1}).on("touchmove",".pcanvas",function(){t.mouseState.down&&(t.mouseState.moved=!0)}).on("touchend",function(){t.mouseState.down=!1})},e.prototype.bindDesktop=function(e){var t=this,n=e.onAppMouseDown,r=e.onAppMouseMove;$("body").on("mousedown","#simulator-container",function(e){if(n(e,t.scrollState,t.mouseState))return!0;t.mouseState.down=!0,t.mouseState.moved=!1,t.scrollState.x=e.clientX,t.scrollState.y=e.clientY}).on("mousemove","#simulator-container",function(e){if(r(e,t.scrollState,t.mouseState))return!0;t.mouseState.moved=!0}),window.addEventListener("mouseup",function(){t.mouseState.down=!1})},e}();t.a=o},iYZG:function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},ieLl:function(e,t,n){"use strict";function r(e){return JSON.parse(l.a.Storage.getItem(e+"_commentTick")||"{}")}function a(e,t){l.a.Storage.setItem(e+"_commentTick",JSON.stringify(t))}function o(e,t){var n=r(e);n[t]=Math.ceil(.001*Date.now()+2),a(e,n)}function i(){for(var e=.001*Date.now()-2592e3,t=[],n=0,r=l.a.Storage.length;n<r;n++){(function(n,r){var a=l.a.Storage.key(n);if(!a.endsWith("_commentTick"))return"continue";var o=JSON.parse(l.a.Storage.getItem(a)||"{}"),i=Object.keys(o);i.forEach(function(t){o[t]<=e&&delete o[t]});var c=Object.keys(o);0===c.length?t.push(a):i.length!==c.length&&l.a.Storage.setItem(a,JSON.stringify(o))})(n)}t.forEach(function(e){return l.a.Storage.removeItem(e)})}function c(e,t,n){0!==n&&(e[t]=(e[t]||0)+n)}var s=n("PpJU"),u=(n.n(s),n("BC29")),l=(n.n(u),n("AxSz")),p={projectCid:null,unreadCommentMap:{},unreadCountThreadMap:{},unreadCountScreenMap:{}},d=Object(s.createStateStore)(p),f=d.getState,m=d.setState,h=d.wrapEntry,v={"unread-comment:init-for-project":h(function(e,t,n){var o=t.dispatch,s=n.payload,u=s.projectCid,l=s.commentThreadList,p=s.commentList,d=r(u),f={},m={};l.forEach(function(e){var t=e.cid,n=e.screen_cid;m[t]=n,f[n]=d[n]});var h={},v={},y={};p.forEach(function(e){var t=e.cid,n=e.thread_cid,r=e.updated_at;(f[m[n]]||0)>=r||(h[t]=!0,c(v,n,1))}),l.forEach(function(e){var t=e.cid,n=e.screen_cid;return c(y,n,v[t]||0)}),a(u,f),i(),o({type:"reducer:unread-comment:update",payload:{projectCid:u,unreadCommentMap:h,unreadCountThreadMap:v,unreadCountScreenMap:y}})}),"unread-comment:set-unread":h(function(e,t,n){var r=t.dispatch,a=n.payload,i=a.commentCid,c=a.threadCid,s=a.screenCid,l=e.unreadCommentMap,p=e.unreadCountThreadMap,d=e.unreadCountScreenMap;l[i]||(r({type:"reducer:unread-comment:update",payload:u.Operation.objectMerge(e,{unreadCommentMap:u.Operation.objectSet(l,i,!0),unreadCountThreadMap:u.Operation.objectSet(p,c,(p[c]||0)+1),unreadCountScreenMap:u.Operation.objectSet(d,s,(d[s]||0)+1)})}),o(e.projectCid,s))}),"unread-comment:set-read":h(function(e,t,n){var r=t.dispatch,a=n.payload,i=a.commentCid,c=a.threadCid,s=a.screenCid,l=e.unreadCommentMap,p=e.unreadCountThreadMap,d=e.unreadCountScreenMap;l[i]&&(r({type:"reducer:unread-comment:update",payload:u.Operation.objectMerge(e,{unreadCommentMap:u.Operation.objectDelete(l,i),unreadCountThreadMap:u.Operation.objectSet(p,c,(p[c]||0)-1),unreadCountScreenMap:u.Operation.objectSet(d,s,(d[s]||0)-1)})}),o(e.projectCid,s))})};t.a={entryMap:v,getState:f,setState:m}},jAji:function(e,t,n){"use strict";var r=n("PpJU"),a=(n.n(r),n("DZQR")),o=a.a.CommentThread,i=[],c=Object(r.createStateStore)(i),s=c.getState,u=c.setState,l=c.wrapEntry,p=function(e,t){return l(function(n,r,a){var o=r.dispatch,i=a&&a.payload;o({type:"reducer:comment-threads:update",payload:e(n,i,t)})})},d={"comment-threads:refresh":p(o.refreshStateList,!1),"comment-threads:save":p(o.saveState,!1),"comment-threads:add":p(o.addState,!1),"comment-threads:add-local":p(o.addState,!0),"comment-threads:update":p(o.updateState,!1),"comment-threads:update-local":p(o.updateState,!0),"comment-threads:delete":p(o.deleteState,!1),"comment-threads:delete-local":p(o.deleteState,!0)};t.a={entryMap:d,getState:s,setState:u}},jBIO:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return _}),n.d(t,"b",function(){return x}),n.d(t,"c",function(){return k});var i=n("rwcW"),c=n.n(i),s=n("BSVj"),u=n.n(s),l=n("ttkw"),p=(n.n(l),n("V9Vg")),d=n("jkaz"),f=n("f3dF"),m=n("a/EL"),h=n("wFrT"),v=window,y=v.MB,b=v.I18N,g=y.isMobile(),w=g||y.isEmbedded()||y.isPhantom(),E=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n));return o.containerStyle=w?null:{width:"auto",right:223},o.setContentElementRef=function(e){return o.contentElementRef=e},o.getContentElementRef=function(){return o.contentElementRef},o.contentElementRef=null,o}return o(t,e),t.prototype.componentWillUnmount=function(){this.props.dispatch({type:"entry:preview:clear"})},t.prototype.render=function(){var e=this.props,t=e.dispatch,n=e.project,r=e.isLayerActive,a=e.isProjectFromOtherFreeUser,o=n.splash,i=void 0===o?"":o,s=n.device,u=void 0===s?"":s,l=n.scale,p=void 0===l?1:l;return c.a.createElement("div",null,!g&&c.a.createElement(d.a,{dispatch:t,project:n}),!g&&c.a.createElement(m.a,null),c.a.createElement("div",{id:"simulator-container",style:this.containerStyle},c.a.createElement("div",{ref:this.setContentElementRef,id:"simulator-wrapper"},c.a.createElement("div",{id:"simulator"},c.a.createElement("div",{className:"splash"},i&&c.a.createElement("img",{src:i}),c.a.createElement("div",{className:"loading"},c.a.createElement("div",{className:"spinner"}))),c.a.createElement("div",{id:"ui-layers",className:"ui-layers "+(r?"is-active":"")},!g&&c.a.createElement(f.a,null)),c.a.createElement("div",{id:"app",className:"screens"},c.a.createElement("div",{id:"gs"}),c.a.createElement("div",{id:"gh",className:"fixed "+u}),c.a.createElement("div",{id:"gf",className:"fixed"})),c.a.createElement("div",{id:"sticky-container"},c.a.createElement("div",{id:"stickies"}),c.a.createElement("div",{id:"ui-comment-marker-panel"},c.a.createElement(m.b,{getContentElement:this.getContentElementRef,scale:.01*p})))))),a&&c.a.createElement("a",{className:"powered-by mhide",href:"/",target:"_blank"},b.preview.powered_by_modao))},t}(i.PureComponent);E.propTypes={project:u.a.object,isLayerActive:u.a.bool,isProjectFromOtherFreeUser:u.a.bool,dispatch:u.a.func};var _=Object(l.connect)(function(e){var t=e.model,n=t.current,r=t.projects,a=e.container,o=S(r,n.projectCid);return{project:o,isLayerActive:a.previewPanel.isLayerActive,isProjectFromOtherFreeUser:j(o,n.userId)}})(E),O=window,C=O.Template,S=Object(p.a)(function(e,t){return e.find(function(e){return e.cid===t})||C.find(t)}),j=Object(p.a)(function(e,t){return t!==e.owner_id&&(!e.owner_paid||e.expired)}),x={alert:h.a.reducers,previewPanel:d.b,comment:m.c,layers:f.b},k={layerSaga:f.c}},jeE2:function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,o){try{var i=t[a](o),c=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e,t){var n=null,r=null,a=Object(m.b)(function(t){var a=t.clientX,c=t.clientY,s=t.target,u=t.currentTarget;if(e()&&s===u){var l=e().getBoundingClientRect(),p=l.left,d=l.right,f=l.top,m=l.bottom;n={clientX:a,clientY:c},r={left:p,right:d,top:f,bottom:m},document.addEventListener("mousemove",o),document.addEventListener("mouseup",i),document.addEventListener("mouseleave",i)}}),o=Object(m.b)(function(a){var o=a.clientX,i=a.clientY;if(e()){var c=o-n.clientX,s=i-n.clientY;t({left:r.left+c,right:r.right+c,top:r.top+s,bottom:r.bottom+s})}}),i=Object(m.b)(function(){n=null,r=null,document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",i),document.removeEventListener("mouseleave",i)});return{onMouseDown:a}}n.d(t,"a",function(){return O});var s=n("BSVj"),u=n.n(s),l=n("rwcW"),p=n.n(l),d=n("AxSz"),f=n("WCZ4"),m=n("V9Vg"),h=n("wB9c"),v=n("U6p/"),y=n("MmZh"),b=n("REe+"),g=n("ucRi"),w=n.n(g),E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_=w.a["comment-panel"],O=function(e){function t(n){var i=this;a(this,t);var s=o(this,e.call(this,n));return s.doReply=function(e){s.replyTextareaRef&&s.replyTextareaRef.onEditFinish(e)},s.doCreateThread=function(e){e&&(s.props.dispatch({type:"entry:comment-threads:add",payload:{top:0,left:0,message:e}}),s.contentListRef&&j(s.contentListRef.scrollRef))},s.doCreateComment=function(e){var t=s.props,n=t.selectCommentThread,r=t.dispatch;e&&n&&(r({type:"entry:comments:add",payload:{thread_cid:n.cid,message:e}}),s.contentListRef&&j(s.contentListRef.scrollRef))},s.cancelSelect=function(){s.props.dispatch({type:"container:comment:select",payload:{select:null}})},s.commentOperations={getPermission:function(e){return Object(y.a)(s.props.currentState.userRole,s.props.userId,e)},getCollaborator:function(e){var t=s.props,n=t.collaboratorsState,r=t.currentState,a=r.projectCid,o=r.teamCid;return C(n,a,o)[e]},toggleSelectCommentThread:function(e){var t=s.props,n=t.commentContainer;(0,t.dispatch)({type:"container:comment:select",payload:{select:n.select===e?null:e}})},setReadComment:function(e){var t=s.props,n=t.currentState.screenCid,r=t.commentContainer.select;(0,t.dispatch)({type:"unread-comment:set-read",payload:{commentCid:e,threadCid:r,screenCid:n}})},doDeleteCommentThread:function(){var e=r(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.b)({title:d.a.I18N.preview.comment.thread_delete_confirm});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:s.props.dispatch({type:"entry:comment-threads:delete",payload:{cid:t}});case 5:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),doUpdateComment:function(e){return s.props.dispatch({type:"entry:comments:update",payload:e})},doDeleteComment:function(){var e=r(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.b)({title:d.a.I18N.preview.comment.comment_delete_confirm});case 2:if(e.t0=e.sent,!e.t0){e.next=5;break}e.t0=s.props.dispatch({type:"comments:delete",payload:t});case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),renderEmptyCommentList:function(){return x("not_signin"===s.getUserStatus(),Boolean(s.props.selectCommentThread))}},s.setPanelRef=function(e){s.panelRef=e},s.panelRef=null,s.setContentListRef=function(e){s.contentListRef=e},s.contentListRef=null,s.setReplyTextareaRef=function(e){s.replyTextareaRef=e},s.replyTextareaRef=null,s.panelPositionEventListeners=c(function(){return s.panelRef},function(e){return s.props.setPanelPosition(e)}),s}return i(t,e),t.prototype.getUserStatus=function(){var e=this.props,t=e.userId,n=e.currentState;return t?"guest"===n.userRole?"not_collaborator":"collaborator":"not_signin"},t.prototype.renderCommentThreadDetail=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.props,n=t.commentThreadList,r=t.commentContainer,a=t.unreadCommentState.unreadCommentMap,o=1+n.findIndex(function(e){return e.cid===r.select});return p.a.createElement(b.a,{ref:this.setContentListRef,commentList:e,unreadCommentMap:a,commentMarkerIndex:o,commentOperations:this.commentOperations})},t.prototype.renderCommentThreadEntry=function(){var e=this.props,t=e.commentThreadList,n=e.commentListMap,r=e.commentContainer,a=e.unreadCommentState.unreadCountThreadMap;return p.a.createElement(b.b,{ref:this.setContentListRef,commentContainer:r,commentThreadList:t,commentListMap:n,unreadCountThreadMap:a,commentOperations:this.commentOperations})},t.prototype.renderContentReply=function(e,t){var n=this.getUserStatus();return p.a.createElement("div",{className:"content-reply"},"collaborator"===n&&p.a.createElement(v.b,{ref:this.setReplyTextareaRef,onValueChange:e?this.doCreateComment:this.doCreateThread,placeholder:d.a.I18N.preview.comment.comment_placeholder,isMultiLine:!0,isAutoHeight:!0}),"collaborator"===n&&p.a.createElement("button",{onClick:this.doReply},e?-1===t?d.a.I18N.preview.comment.comment_create_initial:d.a.I18N.preview.comment.comment_create:d.a.I18N.preview.comment.thread_create),"not_signin"===n&&p.a.createElement("button",{onClick:S},d.a.I18N.preview.comment.tip_signin),"not_collaborator"===n&&p.a.createElement("span",null,d.a.I18N.preview.comment.tip_not_collaborator))},t.prototype.componentDidMount=function(){var e=this;this.props.dispatch({type:"entry:unread-comment:init"}),setTimeout(function(){return e.replyTextareaRef&&e.replyTextareaRef.focus()},500)},t.prototype.componentDidUpdate=function(){var e=this;setTimeout(function(){return e.replyTextareaRef&&e.replyTextareaRef.focus()},500)},t.prototype.render=function(){var e=this.props,t=e.commentThreadList,n=e.commentListMap,r=e.selectCommentThread,a=r&&n[r.cid],o=a?a.length-1:-1,i=r?o>=1?""+o+d.a.I18N.preview.comment.reply:0===o?d.a.I18N.preview.comment.reply_none:d.a.I18N.preview.comment.comment_create_initial_title:t.length?""+t.length+d.a.I18N.preview.comment.panel:d.a.I18N.preview.comment.thread_none;return p.a.createElement("div",{ref:this.setPanelRef,className:_,id:"ui-comment-panel"},p.a.createElement("div",E({className:"panel-upper"},this.panelPositionEventListeners),r&&p.a.createElement("button",{className:"button-left",onClick:this.cancelSelect},p.a.createElement(f.a,{className:"back-icon",name:"angle-right"})),p.a.createElement("p",{className:"title-text"},i)),p.a.createElement("div",{className:"panel-content"},r?this.renderCommentThreadDetail(a):this.renderCommentThreadEntry(),this.renderContentReply(r,o)))},t}(p.a.PureComponent);O.propTypes={commentContainer:u.a.object,collaboratorsState:u.a.array,unreadCommentState:u.a.object,currentState:u.a.object,commentThreadList:u.a.array,commentListMap:u.a.object,selectCommentThread:u.a.object,userId:u.a.number,setPanelPosition:u.a.func,dispatch:u.a.func};var C=Object(m.a)(function(e,t,n){return e.reduce(function(e,r){return r.project_cid!==t&&r.team_cid!==n||(e[r.user_id]=r),e},{})}),S=function(){window.location.href="/signin?next="+window.location.pathname},j=function(e){return e&&setTimeout(function(){return e.scrollTop=e.scrollHeight-e.offsetHeight},100)},x=function(e,t){return p.a.createElement("div",{className:"content-empty"},p.a.createElement("span",null,e?d.a.I18N.preview.comment.thread_none_tip_signin:t?d.a.I18N.preview.comment.reply_none_tip:d.a.I18N.preview.comment.thread_none_tip))}},jkaz:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=w("#simulator-container"),n=w("#simulator-wrapper"),r=w("#simulator");if(!t.length)return!1;var a=e?0:S,o=t[0],i=t.width()+(e?S:-S);o.style.right=a+"px";var c=r.outerWidth(),s=Widget.additionalSize(c,0),u=(s[0],s[1]),l=void 0;c+u>i?(n.outerWidth(c+u),l=(c-i+u)/2):(n.css("width",""),u=i-c,l=0),t.animate({scrollLeft:l}),r.animate({left:Math.round(u/2)})}n.d(t,"a",function(){return O});var c=n("rwcW"),s=n.n(c),u=n("BSVj"),l=n.n(u),p=n("WCZ4"),d=n("Vb1+"),f=n("oyEW"),m=n("Moir"),h=n("DB2l"),v=n("Am6F"),y=n.n(v);n.d(t,"b",function(){return m.a});var b=y.a["preview-panel"],g=window,w=g.$,E=g.MB,_=g.I18N,O=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n));return o.toggleMinimized=function(){o.setState({isMinimized:!o.state.isMinimized})},o.setElementRef=function(e){o.elementRef=e},o.elementRef=null,o.state={isMinimized:!1},o}return o(t,e),t.prototype.componentDidMount=function(){w(this.elementRef).tooltip({selector:'[data-toggle="tooltip"]',container:"body",trigger:"hover"})},t.prototype.componentDidUpdate=function(e,t){t.isMinimized!==this.state.isMinimized&&i(this.state.isMinimized)},t.prototype.render=function(){var e=this.props,t=e.dispatch,n=e.project,r=this.state.isMinimized;return s.a.createElement("div",{ref:this.setElementRef,className:b+" "+(r?"minimized":"")+" mhide"},s.a.createElement(C,{dispatch:t,project:n}),s.a.createElement("div",{className:"panel-content"},s.a.createElement(f.c,null),s.a.createElement(f.b,null)),s.a.createElement(f.a,null),s.a.createElement("div",{className:"panel-toggle-minimize "+(r?"minimized":""),onClick:this.toggleMinimized},s.a.createElement(p.a,{type:"fa",name:"angle-right",className:"toggle-icon"})),s.a.createElement(d.a,{project:n}))},t}(c.PureComponent);O.propTypes={dispatch:l.a.func,project:l.a.object};var C=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n));return o.handleShare=function(){E.ga("send","event","feature","点击了分享按钮"),E.mp("点击了分享按钮"),o.setState({isSharingModalOpen:!0})},o.onCloseSharingModal=function(){return o.setState({isSharingModalOpen:!1})},o.state={isSharingModalOpen:!1},o}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.dispatch,n=e.project,r=this.state.isSharingModalOpen,a=n.name||"",o=E.DEVICES[n.device]&&E.DEVICES[n.device][n.model]&&E.DEVICES[n.device][n.model].name||"";return s.a.createElement("div",{className:"panel-header"},s.a.createElement("div",{className:"info"},s.a.createElement("h1",{className:"project-name",title:a},a),s.a.createElement("span",{className:"project-device-name"},o)),s.a.createElement("div",{className:"share-button",title:_.share,"data-toggle":"tooltip","data-placement":"left",onClick:this.handleShare},s.a.createElement(p.a,{type:"mb",name:"share",className:"share-icon"})),s.a.createElement(h.a,{dispatch:t,isOpen:r,onClose:this.onCloseSharingModal,app:E.project()}))},t}(c.PureComponent);C.propTypes={dispatch:l.a.func,project:l.a.object};var S=223},kJQT:function(e,t,n){"use strict";function r(e,t,n){for(var r=arguments.length,u=Array(r>3?r-3:0),l=3;l<r;l++)u[l-3]=arguments[l];var p=void 0,d=void 0,f={done:!1,value:Object(o.a)(t,c.a.sliding(1))},m=function(){return{done:!1,value:Object(o.h)(d)}},h=function(e){return{done:!1,value:o.e.apply(void 0,[n].concat(u,[e]))}},v={done:!1,value:Object(o.c)(s.j,e)},y=function(e){return p=e},b=function(e){return d=e};return Object(a.a)({q1:function(){return["q2",f,b]},q2:function(){return["q3",m(),y]},q3:function(){return p===i.a?[a.b]:["q4",h(p)]},q4:function(){return["q2",v]}},"q1","throttle("+Object(a.c)(t)+", "+n.name+")")}t.a=r;var a=n("y/0O"),o=n("OBh0"),i=n("eDPF"),c=n("bLnW"),s=n("wVGC")},kiPs:function(e,t){e.exports={root:"-J75xPVmvbQKLN-Ufi0i5",container:"_3aAFPow4706mNn0bI1xwBL",select:"_3-73ACNn1cedvu5RCdPfxX",content:"_1rFTu4ZGICLzMsIpckPkJm",caret:"_3TiIFhI2K5QLz58PCyLm-r"}},klHs:function(e,t){function n(){return!1}e.exports=n},lMBy:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"c",function(){return y}),n.d(t,"d",function(){return b}),n.d(t,"a",function(){return g}),n.d(t,"b",function(){return w});var i=n("rwcW"),c=n.n(i),s=n("BSVj"),u=n.n(s),l=n("AxSz"),p=n("U6p/"),d=n("K09U"),f=n.n(d),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=f.a.comment,v=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n));return o.toggleFolded=function(){o.setState({isFolded:!o.state.isFolded})},o.toggleEditing=function(){return o.editableSpanComponent&&o.editableSpanComponent.toggleEditing()},o.doUpdateComment=function(e){return o.props.commentOperations.doUpdateComment(m({},o.props.comment,{message:e}))},o.doDeleteComment=function(){return o.props.commentOperations.doDeleteComment(o.props.comment)},o.getCommentMessage=function(){return o.props.comment.message},o.setEditableSpanComponent=function(e){return o.editableSpanComponent=e},o.editableSpanComponent=null,o.state={isFolded:o.props.comment.message.length>120||!1},o}return o(t,e),t.prototype.renderCommentUpper=function(e){var t=this.props,n=t.comment,r=t.collaborator;return c.a.createElement("div",{className:"comment-upper"},e&&c.a.createElement("span",{className:"index"},"#"+e),r&&c.a.createElement("img",{className:"avatar",width:24,height:24,src:r.avatar}),r&&c.a.createElement("span",{className:"name"},r.name),c.a.createElement("span",{className:"time"},l.a.L10N.parseTimeAgo(1e3*n.created_at)))},t.prototype.renderCommentMiddle=function(){var e=this.props,t=e.comment,n=e.permission,r=this.state.isFolded;return c.a.createElement("div",{className:"comment-content "+(r?"folded":"")},c.a.createElement(p.a,{ref:this.setEditableSpanComponent,onValueChange:this.doUpdateComment,getValue:this.getCommentMessage,placeholder:l.a.I18N.preview.comment.comment_placeholder,isEditLocked:!n.update,isMultiLine:!0}),t.updated_at!==t.created_at&&c.a.createElement("span",{className:"edited"},l.a.I18N.preview.comment.tag_edited))},t.prototype.renderCommentLower=function(){var e=this.props.permission,t=this.state.isFolded;return t||e.update||e.delete?c.a.createElement("div",{className:"comment-lower"},t&&c.a.createElement("span",{className:"modify",onClick:this.toggleFolded},l.a.I18N.preview.comment.unfold),t&&c.a.createElement("span",{className:"dot"}),e.update&&c.a.createElement("span",{className:"modify",onClick:this.toggleEditing},l.a.I18N.preview.comment.modify_edit),e.update&&c.a.createElement("span",{className:"dot"}),e.delete&&c.a.createElement("span",{className:"modify",onClick:this.doDeleteComment},l.a.I18N.preview.comment.modify_delete)):null},t.prototype.render=function(){return null},t}(i.PureComponent);v.propTypes={comment:u.a.object,permission:u.a.object,collaborator:u.a.object,commentMarkerIndex:u.a.number,commentOperations:u.a.object};var y=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return o(t,e),t.prototype.render=function(){var e=this.props.commentMarkerIndex;return c.a.createElement("div",{className:h+" thread-initial",onClick:this.toggleSelect},this.renderCommentUpper(e),this.renderCommentMiddle(),this.renderCommentLower())},t}(v),b=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return o(t,e),t.prototype.render=function(){return c.a.createElement("div",{className:h+" user-initial",onClick:this.toggleSelect},this.renderCommentUpper(null),this.renderCommentMiddle(),this.renderCommentLower())},t}(v),g=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return o(t,e),t.prototype.render=function(){return c.a.createElement("div",{className:h+" appending",onClick:this.toggleSelect},this.renderCommentMiddle(),this.renderCommentLower())},t}(v),w=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n));return o.toggleSelect=function(){return o.props.commentOperations.toggleSelectCommentThread(o.props.commentThreadCid)},o.doDeleteThread=function(){return o.props.commentOperations.doDeleteCommentThread(o.props.commentThreadCid)},o}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.commentMarkerIndex,n=e.unreadCount,r=e.commentCount,a=e.isFocus,o=e.comment,i=e.permission,s=e.collaborator;return c.a.createElement("div",{className:h+" thread-initial entry "+(a?"focus":""),onClick:this.toggleSelect},c.a.createElement("div",{className:"comment-upper"},c.a.createElement("span",{className:"index "+(n>0?"isUnread":"")},"#"+t),s&&c.a.createElement("img",{className:"avatar",width:24,height:24,src:s.avatar}),s&&c.a.createElement("span",{className:"name"},s.name),o&&c.a.createElement("span",{className:"time"},l.a.L10N.parseTimeAgo(1e3*o.created_at))),o&&c.a.createElement("div",{className:"comment-content"},c.a.createElement("span",{className:"entry"},o.message)),c.a.createElement("div",{className:"comment-lower"},c.a.createElement("span",{className:"reply-count"},r<=1?l.a.I18N.preview.comment.reply_none:""+(r-1)+l.a.I18N.preview.comment.reply),n>0&&c.a.createElement("span",{className:"new"},n===r?l.a.I18N.preview.comment.reply_new_thread:""+n+l.a.I18N.preview.comment.reply_new),i.delete&&c.a.createElement("span",{className:"dot"}),i.delete&&c.a.createElement("span",{className:"modify",onClick:this.doDeleteThread},l.a.I18N.preview.comment.modify_delete)))},t}(i.PureComponent);w.propTypes={unreadCount:u.a.number,commentCount:u.a.number,isFocus:u.a.bool,comment:u.a.object,permission:u.a.object,collaborator:u.a.object,commentMarkerIndex:u.a.number,commentThreadCid:u.a.string,commentOperations:u.a.object}},"lO7+":function(e,t,n){function r(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,c=o(r.length-t,0),s=Array(c);++i<c;)s[i]=r[t+i];i=-1;for(var u=Array(t+1);++i<t;)u[i]=r[i];return u[t]=n(s),a(e,this,u)}}var a=n("VzqO"),o=Math.max;e.exports=r},"lkS/":function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var a=n("aTMz"),o=n("RMaG"),i=n("dhCX"),c=n("iG26"),s=n("9+I2");r.prototype.clear=a,r.prototype.delete=o,r.prototype.get=i,r.prototype.has=c,r.prototype.set=s,e.exports=r},mGGN:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e){return e.displayName||e.name||"Component"}function s(e,t){try{return e.apply(t)}catch(e){return x.value=e,x}}function u(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=Boolean(e),d=e||C,m=void 0;m="function"==typeof t?t:t?(0,y.default)(t):S;var v=n||j,b=r.pure,g=void 0===b||b,w=r.withRef,_=void 0!==w&&w,M=g&&v!==j,N=k++;return function(e){function t(e,t,n){var r=v(e,t,n);return r}var n="Connect("+c(e)+")",r=function(r){function c(e,t){a(this,c);var i=o(this,r.call(this,e,t));i.version=N,i.store=e.store||t.store,(0,O.default)(i.store,'Could not find "store" in either the context or props of "'+n+'". Either wrap the root component in a <Provider>, or explicitly pass "store" as a prop to "'+n+'".');var s=i.store.getState();return i.state={storeState:s},i.clearCache(),i}return i(c,r),c.prototype.shouldComponentUpdate=function(){return!g||this.haveOwnPropsChanged||this.hasStoreStateChanged},c.prototype.computeStateProps=function(e,t){if(!this.finalMapStateToProps)return this.configureFinalMapState(e,t);var n=e.getState(),r=this.doStatePropsDependOnOwnProps?this.finalMapStateToProps(n,t):this.finalMapStateToProps(n);return r},c.prototype.configureFinalMapState=function(e,t){var n=d(e.getState(),t),r="function"==typeof n;return this.finalMapStateToProps=r?n:d,this.doStatePropsDependOnOwnProps=1!==this.finalMapStateToProps.length,r?this.computeStateProps(e,t):n},c.prototype.computeDispatchProps=function(e,t){if(!this.finalMapDispatchToProps)return this.configureFinalMapDispatch(e,t);var n=e.dispatch,r=this.doDispatchPropsDependOnOwnProps?this.finalMapDispatchToProps(n,t):this.finalMapDispatchToProps(n);return r},c.prototype.configureFinalMapDispatch=function(e,t){var n=m(e.dispatch,t),r="function"==typeof n;return this.finalMapDispatchToProps=r?n:m,this.doDispatchPropsDependOnOwnProps=1!==this.finalMapDispatchToProps.length,r?this.computeDispatchProps(e,t):n},c.prototype.updateStatePropsIfNeeded=function(){var e=this.computeStateProps(this.store,this.props);return(!this.stateProps||!(0,h.default)(e,this.stateProps))&&(this.stateProps=e,!0)},c.prototype.updateDispatchPropsIfNeeded=function(){var e=this.computeDispatchProps(this.store,this.props);return(!this.dispatchProps||!(0,h.default)(e,this.dispatchProps))&&(this.dispatchProps=e,!0)},c.prototype.updateMergedPropsIfNeeded=function(){var e=t(this.stateProps,this.dispatchProps,this.props);return!(this.mergedProps&&M&&(0,h.default)(e,this.mergedProps))&&(this.mergedProps=e,!0)},c.prototype.isSubscribed=function(){return"function"==typeof this.unsubscribe},c.prototype.trySubscribe=function(){u&&!this.unsubscribe&&(this.unsubscribe=this.store.subscribe(this.handleChange.bind(this)),this.handleChange())},c.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)},c.prototype.componentDidMount=function(){this.trySubscribe()},c.prototype.componentWillReceiveProps=function(e){g&&(0,h.default)(e,this.props)||(this.haveOwnPropsChanged=!0)},c.prototype.componentWillUnmount=function(){this.tryUnsubscribe(),this.clearCache()},c.prototype.clearCache=function(){this.dispatchProps=null,this.stateProps=null,this.mergedProps=null,this.haveOwnPropsChanged=!0,this.hasStoreStateChanged=!0,this.haveStatePropsBeenPrecalculated=!1,this.statePropsPrecalculationError=null,this.renderedElement=null,this.finalMapDispatchToProps=null,this.finalMapStateToProps=null},c.prototype.handleChange=function(){if(this.unsubscribe){var e=this.store.getState(),t=this.state.storeState;if(!g||t!==e){if(g&&!this.doStatePropsDependOnOwnProps){var n=s(this.updateStatePropsIfNeeded,this);if(!n)return;n===x&&(this.statePropsPrecalculationError=x.value),this.haveStatePropsBeenPrecalculated=!0}this.hasStoreStateChanged=!0,this.setState({storeState:e})}}},c.prototype.getWrappedInstance=function(){return(0,O.default)(_,"To access the wrapped instance, you need to specify { withRef: true } as the fourth argument of the connect() call."),this.refs.wrappedInstance},c.prototype.render=function(){var t=this.haveOwnPropsChanged,n=this.hasStoreStateChanged,r=this.haveStatePropsBeenPrecalculated,a=this.statePropsPrecalculationError,o=this.renderedElement;if(this.haveOwnPropsChanged=!1,this.hasStoreStateChanged=!1,this.haveStatePropsBeenPrecalculated=!1,this.statePropsPrecalculationError=null,a)throw a;var i=!0,c=!0;g&&o&&(i=n||t&&this.doStatePropsDependOnOwnProps,c=t&&this.doDispatchPropsDependOnOwnProps);var s=!1,u=!1;r?s=!0:i&&(s=this.updateStatePropsIfNeeded()),c&&(u=this.updateDispatchPropsIfNeeded());return!(!!(s||u||t)&&this.updateMergedPropsIfNeeded())&&o?o:(this.renderedElement=_?(0,p.createElement)(e,l({},this.mergedProps,{ref:"wrappedInstance"})):(0,p.createElement)(e,this.mergedProps),this.renderedElement)},c}(p.Component);return r.displayName=n,r.WrappedComponent=e,r.contextTypes={store:f.default},r.propTypes={store:f.default},(0,E.default)(r,e)}}t.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=u;var p=n("rwcW"),d=n("+xZZ"),f=r(d),m=n("yZ+L"),h=r(m),v=n("3Uie"),y=r(v),b=n("rGtR"),g=(r(b),n("xtak")),w=(r(g),n("5mrx")),E=r(w),_=n("oIDS"),O=r(_),C=function(e){return{}},S=function(e){return{dispatch:e}},j=function(e,t,n){return l({},n,e,t)},x={value:null},k=0},"n9+0":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(){var t=this;r(this,e),this.elementFrom=null,this.elementTo=null,this._delayedSync=null,this.delaySync=function(){t._delayedSync&&clearTimeout(t._delayedSync),t._delayedSync=setTimeout(function(){return t.sync()},100),t.sync()}}return e.prototype.init=function(e,t){this.elementFrom=e,this.elementTo=t,this.sync()},e.prototype.sync=function(){if(this.elementFrom){var e=this.elementFrom.scrollTop;this.elementTo.style.marginTop=0-e+"px"}},e}();t.a=a},nBAK:function(e,t){function n(e){return e}e.exports=n},nvBK:function(e,t){},nzGo:function(e,t,n){function r(e){return null!=e&&o(e.length)&&!a(e)}var a=n("qJ4F"),o=n("hAXT");e.exports=r},"o/bl":function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments[1];switch(t.type){case o.b:return t.payload.layerID===e?-1:t.payload.layerID;case i.c:return-1;default:return e}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments[1];switch(t.type){case o.a:return t.payload.layerID;default:return e}}var o=n("sOkL"),i=n("eWQx"),c={activeLayerID:r,enteredLayerID:a};t.a=c},oyEW:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"c",function(){return j}),n.d(t,"b",function(){return x}),n.d(t,"a",function(){return k});var i=n("rwcW"),c=n.n(i),s=n("BSVj"),u=n.n(s),l=n("ttkw"),p=(n.n(l),n("WCZ4")),d=n("xHGQ"),f=n("V9Vg"),m=n("4vHe"),h=n("XsO/"),v=n("rhFK"),y=n.n(v),b=y.a["preview-panel-item"],g=y.a["preview-panel-item-header"],w=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n));return o.toggleActive=function(){var e=o.props,t=e.isActive;(0,e.dispatch)({type:"reducer:preview-panel:update",payload:{isScreenActive:!t}})},o}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.isActive,n=e.isFlexLock,r=e.screenCount;return c.a.createElement("div",{className:b+" screen-panel-item "+(n?"flex-lock":"")},c.a.createElement("div",{className:g,onClick:this.toggleActive},c.a.createElement("p",null,I18N.preview.screen.panel,c.a.createElement("span",{title:I18N.preview.screen.total_page,"data-toggle":"tooltip","data-placement":"bottom"}," ("+(r>999?"999+":r)+")")),c.a.createElement(p.a,{type:"fa",name:"caret-down",className:"toggle-content "+(t?"":"collapse")})),t&&c.a.createElement("div",{className:"divider"}),t&&c.a.createElement("div",{className:"panel-item-content"},c.a.createElement(m.a,null)))},t}(i.PureComponent);w.propTypes={isActive:u.a.bool,isFlexLock:u.a.bool,screenCount:u.a.number,dispatch:u.a.func};var E=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n));return o.toggleActive=function(){var e=o.props,t=e.isActive;(0,e.dispatch)({type:"entry:layer:set:active",payload:{isActive:!t}}),t&&S("打开了开发者模式")},o}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.isActive,n=e.isFlexLock,r=e.currentScreenCid;return c.a.createElement("div",{className:b+" layer-panel-item "+(n?"flex-lock":"")},c.a.createElement("div",{className:g},c.a.createElement("p",null,I18N.preview_panel.developer_mode),c.a.createElement(d.a,{icon:"pencil",id:"switch-layer",checked:t,onChange:this.toggleActive})),t&&c.a.createElement("div",{className:"divider"}),t&&c.a.createElement("div",{key:r,className:"panel-item-content",id:"ui-layer-panel"},c.a.createElement(h.a,null)))},t}(i.PureComponent);E.propTypes={isActive:u.a.bool,isFlexLock:u.a.bool,currentScreenCid:u.a.string,dispatch:u.a.func};var _=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n));return o.toggleActive=function(){var e=o.props,t=e.isActive;(0,e.dispatch)({type:"entry:comment:set:active",payload:{isActive:!t}}),t&&S("打开了评论面板")},o}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.isActive,n=e.commentThreadCount;return c.a.createElement("div",{className:g},c.a.createElement("p",null,I18N.preview_panel.comment,c.a.createElement("span",{title:I18N.preview_panel.thread_sum,"data-toggle":"tooltip","data-placement":"right"}," ("+(n>999?"999+":n)+")")),c.a.createElement(d.a,{id:"switch-comment",icon:"single-comment",checked:t,onChange:this.toggleActive}))},t}(i.PureComponent);_.propTypes={isActive:u.a.bool,commentThreadCount:u.a.number,dispatch:u.a.func};var O=window,C=O.MB,S=function(e){C.ga("send","event","feature",e),C.mp(e)},j=Object(l.connect)(function(e){var t=e.model,n=e.container.previewPanel;return{isActive:n.isScreenActive,isFlexLock:!n.isScreenActive&&n.isLayerActive,screenCount:M(t.screens,t.current.projectCid)}})(w),x=Object(l.connect)(function(e){var t=e.model,n=e.container.previewPanel;return{isActive:n.isLayerActive,isFlexLock:!n.isLayerActive,currentScreenCid:t.current.screenCid}})(E),k=Object(l.connect)(function(e){return{isActive:e.container.previewPanel.isCommentActive,commentThreadCount:e.model.commentThreads.length}})(_),M=Object(f.a)(function(e,t){return e.reduce(function(e,n){return n.project_cid===t?e+1:e},0)})},oyqu:function(e,t,n){"use strict";function r(e,t,n){function o(){y===v&&(y=v.slice())}function s(){return h}function u(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return o(),y.push(e),function(){if(t){t=!1,o();var n=y.indexOf(e);y.splice(n,1)}}}function l(e){if(!Object(a.a)(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(b)throw new Error("Reducers may not dispatch actions.");try{b=!0,h=m(h,e)}finally{b=!1}for(var t=v=y,n=0;n<t.length;n++){(0,t[n])()}return e}function p(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");m=e,l({type:c.INIT})}function d(){var e,t=u;return e={subscribe:function(e){function n(){e.next&&e.next(s())}if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");return n(),{unsubscribe:t(n)}}},e[i.a]=function(){return this},e}var f;if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(r)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var m=e,h=t,v=[],y=v,b=!1;return l({type:c.INIT}),f={dispatch:l,subscribe:u,getState:s,replaceReducer:p},f[i.a]=d,f}n.d(t,"a",function(){return c}),t.b=r;var a=n("GKSj"),o=n("M57v"),i=n.n(o),c={INIT:"@@redux/INIT"}},pT6C:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e,t){var n={};for(var r in e)n[r]=t(e[r],r);return n},l=function(e,t){return t.forEach(function(t){e.has(t),e.add(t)}),e},p=function(e,t){return e instanceof Object&&t in e},d=function(e){return p(e,"toStructJSON")?e.toStructJSON():e},f=function(e,t){return e},m=function(){function e(t,n,r){i(this,e),this.name=t,this.struct=n,this.actMap=r,this.initialState=null,this.acceptNameSet=null,this.actionReducer=null,this.structReducer=null,this.reducer=null}return s(e,[{key:"getActionReducer",value:function(){var e=this.actMap;return function(t,n){var r=n.type,a=n.payload,o=e[r];return o?o(t,a):t}}},{key:"getReducer",value:function(){var e=this.name,t=this.initialState,n=this.acceptNameSet,r=this.actionReducer,a=this.structReducer,o=function(t,n){return void 0!==n.type&&n.name===e?r(t,n):a(t,n)};return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,a=arguments[1];return n.has(a.name)?void 0!==a.batch&&a.name===e?a.batch.reduce(o,r):o(r,a):r}}},{key:"toStructJSON",value:function(){return d(this.struct)}}]),e}(),h=function(e){function t(e,n,r){i(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r)),c={},s=new Set;s.add(o.name);var u=[];for(var p in o.struct)if(o.struct.hasOwnProperty(p)){var d=o.struct[p],f=d instanceof m;c[p]=f?d.initialState:d,f&&(l(s,d.acceptNameSet),u.push(p))}return o.initialState=c,o.acceptNameSet=s,o.structReducer=t.getStructReducer(u,o.struct),o.actionReducer=o.getActionReducer(),o.reducer=o.getReducer(),o}return o(t,e),s(t,[{key:"toStructJSON",value:function(){return u(this.struct,d)}}],[{key:"getStructReducer",value:function(e,t){return function(n,r){for(var a=!1,o={},i=0;i<e.length;i++){var s=e[i],u=t[s],l=n[s],p=u.reducer(l,r);o[s]=p,a=a||p!==l}return a?c({},n,o):n}}}]),t}(m),v=function(e){function t(e,n,r){i(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r)),c=o.struct[0],s=c instanceof m,u=new Set;return u.add(o.name),o.initialState=[],o.acceptNameSet=u,o.structReducer=s?t.getStructReducer(c):f,o.actionReducer=o.getActionReducer(),o.reducer=o.getReducer(),o}return o(t,e),s(t,[{key:"toStructJSON",value:function(){return this.struct.map(d)}}],[{key:"getStructReducer",value:function(e){return function(n,a){function o(t,a,o){var s=e.reducer(t,a);t!==s&&(i||(c=[].concat(r(n))),c[o]=s,i=!0)}var i=!1,c=null;if(void 0!==a.index)o(n[a.index],a.payload,a.index);else if(void 0!==a.filter){var s=t.getFilter(a.filter);s&&n.forEach(function(e,t){return s(e,t)&&o(e,a.payload,t)})}return i?c:n}}},{key:"getFilter",value:function(e){switch(e.type){case"key-value":var t=e.key,n=e.value;return function(e,r){return e[t]===n}}return null}}]),t}(m);t.Scheme=m,t.ObjectScheme=h,t.ArrayScheme=v},pkLt:function(e,t){var n=Array.isArray;e.exports=n},pwsn:function(e,t,n){function r(e,t,n){(void 0===n||o(e[t],n))&&(void 0!==n||t in e)||a(e,t,n)}var a=n("9mgN"),o=n("iYZG");e.exports=r},"q8/F":function(e,t,n){var r=n("w7VD"),a=n("bjwK"),o=r(a);e.exports=o},qJ4F:function(e,t,n){function r(e){if(!o(e))return!1;var t=a(e);return t==c||t==s||t==i||t==u}var a=n("S8R4"),o=n("Vd22"),i="[object AsyncFunction]",c="[object Function]",s="[object GeneratorFunction]",u="[object Proxy]";e.exports=r},rGtR:function(e,t,n){"use strict";function r(e){"undefined"!=typeof console&&console.error;try{throw new Error(e)}catch(e){}}t.__esModule=!0,t.default=r},rcsM:function(e,t,n){function r(e,t,n,r,v,b){var g=u(e),w=u(t),E=g?m:s(e),_=w?m:s(t);E=E==f?h:E,_=_==f?h:_;var O=E==h,C=_==h,S=E==_;if(S&&l(e)){if(!l(t))return!1;g=!0,O=!1}if(S&&!O)return b||(b=new a),g||p(e)?o(e,t,n,r,v,b):i(e,t,E,n,r,v,b);if(!(n&d)){var j=O&&y.call(e,"__wrapped__"),x=C&&y.call(t,"__wrapped__");if(j||x){var k=j?e.value():e,M=x?t.value():t;return b||(b=new a),v(k,M,n,r,b)}}return!!S&&(b||(b=new a),c(e,t,n,r,v,b))}var a=n("lkS/"),o=n("vvfE"),i=n("+ZJD"),c=n("D1dp"),s=n("dB8C"),u=n("pkLt"),l=n("klHs"),p=n("rmhJ"),d=1,f="[object Arguments]",m="[object Array]",h="[object Object]",v=Object.prototype,y=v.hasOwnProperty;e.exports=r},rhFK:function(e,t){e.exports={"preview-panel-item":"_1717Z_L8MKygkkz4nDL3ls","preview-panel-item-header":"_30tq-aOUOGPMQniKzHKRgu"}},rmhJ:function(e,t){function n(){return!1}e.exports=n},roYK:function(e,t,n){function r(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!c.string(t))throw new TypeError("Second argument must be a String");if(!c.fn(n))throw new TypeError("Third argument must be a Function");if(c.node(e))return a(e,t,n);if(c.nodeList(e))return o(e,t,n);if(c.string(e))return i(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function a(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}function o(e,t,n){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}}}function i(e,t,n){return s(document.body,e,t,n)}var c=n("/Kds"),s=n("537M");e.exports=r},rsfk:function(e,t){},rv3C:function(e,t){function n(e,t){return e+r(a()*(t-e+1))}var r=Math.floor,a=Math.random;e.exports=n},s18M:function(e,t){},"sF+Z":function(e,t){e.exports={container:"_1AVdPDPwS89y8K6NwxXVap",infoHeader:"BKNE8nSaHH3XZBUTv1VHG",panel:"_1ksgci-Rf-8mX3qob9sDrT",flexFull:"_1P0QdU93j_Nl9jdShc9p1-",panelRow:"_9n-kQTZNLiaAfy_IKOJS0 _1P0QdU93j_Nl9jdShc9p1-",infoKey:"BgtzuT84EDu9W5bhO1CZq",infoValue:"B7IgJkGyq2Mr-PAjqDdWn",fixedWidth:"_1cPNYvzcJavPkpUTsVx41g",copyBtn:"_1aZ_zoMkfnG66iqC9M6vQm _2TAID7TnzAXoGA-jTBc04W",ghostTextarea:"_3ViNHTb7TlzrcGe-KNAHtf",colorRow:"VsRBkZJQgV3vEkJWDQouE",colorBlock:"_1HTbPk0EBp894I-49uskuo",colorContent:"_1A-sey5jEPMPY8FBV1hK2L",textContent:"_3J_y1ws1ajpV2L_4ujk5k4",image:"_2WcEIVg4s-tki6JptWfftM",download:"VZi_jR2ynXEgGlLgZ6LcF",downloadFiletype:"_3gnwWK06IkpGAOJxyFhGbA",downloadFiletypeIcon:"ZnEpqQAdD0YWOHtyJIi-H"}},sOkL:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"d",function(){return a}),n.d(t,"a",function(){return o}),n.d(t,"c",function(){return i});var r="SELECT_LAYER",a=function(e){return MB.ga("send","event","feature","点击了 Layer 元素"),MB.mp("击了 Layer 元素"),{type:r,payload:{layerID:e}}},o="ENTER_LAYER",i=function(e){return{type:o,payload:{layerID:e}}}},"sS1+":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(){r(this,e),this.timeoutMap=new Map}return e.prototype.setTimeout=function(e){function t(t,n,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t,n){var r=this,a=setTimeout(function(){t(),r.clearTimeout(e,t)},n);return this.setToken(e,t,a),a}),e.prototype.clearTimeout=function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){var n=this.getToken(e,t);void 0!==n&&(clearTimeout(n),this.clearToken(e,t))}),e.prototype.clearTimeoutByKey=function(e){var t=this,n=this.timeoutMap.get(e);void 0!==n&&(n.forEach(function(n,r){return t.clearTimeout(e,r)}),this.timeoutMap.delete(e))},e.prototype.clear=function(){var e=this;this.timeoutMap.forEach(function(t,n){return e.clearTimeoutByKey(n)})},e.prototype.setToken=function(e,t,n){var r=this.timeoutMap.get(e);void 0===r&&(r=new Map,this.timeoutMap.set(e,r)),r.set(t,n)},e.prototype.getToken=function(e,t){var n=this.timeoutMap.get(e);if(n)return n.get(t)},e.prototype.clearToken=function(e,t){var n=this.timeoutMap.get(e);n&&n.delete(t)},e}();t.a=a},sZxb:function(e,t,n){"use strict";function r(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),c=2;c<n;c++)r[c-2]=arguments[c];var s={done:!1,value:Object(o.h)(e)},u=function(e){return{done:!1,value:o.e.apply(void 0,[t].concat(r,[e]))}},l=function(e){return{done:!1,value:Object(o.d)(e)}},p=void 0,d=void 0,f=function(e){return p=e},m=function(e){return d=e};return Object(a.a)({q1:function(){return["q2",s,m]},q2:function(){return d===i.a?[a.b]:p?["q3",l(p)]:["q1",u(d),f]},q3:function(){return["q1",u(d),f]}},"q1","takeLatest("+Object(a.c)(e)+", "+t.name+")")}t.a=r;var a=n("y/0O"),o=n("OBh0"),i=n("eDPF")},sn4q:function(e,t,n){"use strict";function r(e){var t=e.entryMap,n=e.reducerMap,r=e.sagaMap,c=new o.ReduxEntry;c.setEntryMap(t);var s=void 0,u=[c.middleware];r&&(s=Object(i.a)(),u.push(s));var l=Object(a.createStore)(Object(a.combineReducers)(n),a.applyMiddleware.apply(void 0,u));if(r){for(var p in r)!function(e){s.run(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,r[e]();case 3:t.next=0;break;case 5:case"end":return t.stop()}},t,this)}))}(p)}return{store:l,reduxEntry:c}}var a=n("2V2H"),o=n("PpJU"),i=(n.n(o),n("UoS1")),c=n("Ibgh"),s=n("y6fY"),u=n("G1TU"),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.a=function(e){var t=e.viewMap,n=e.containerReducerMap,o=e.sagaMap,i=e.extendCallback,p=new c.a;for(var d in t)p.setView(d,t[d]);var f=r({entryMap:l({},u.a,s.a,{"entry:webpack-interface:view:call":function(e,t){var n=(t.type,t.payload);setTimeout(function(){return p.callViewMethod.apply(p,[n.name,n.method].concat(n.args||{}))},0)}}),reducerMap:{model:Object(a.combineReducers)(u.b),container:Object(a.combineReducers)(n)},sagaMap:o}),m=f.store,h=f.reduxEntry;return p.setStore(m),i&&i(p,{store:m,reduxEntry:h}),p}},srSK:function(e,t){function n(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}e.exports=n},t7oP:function(e,t,n){"use strict";function r(e,t){return function(n){return e(t(n))}}t.a=r},ttkw:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.connect=t.Provider=void 0;var a=n("goDS"),o=r(a),i=n("mGGN"),c=r(i);t.Provider=o.default,t.connect=c.default},uJV2:function(e,t){function n(e){return e}e.exports=n},ucRi:function(e,t){e.exports={"comment-panel":"_15VIdqQAl4f9SZftvGqbx3"}},uref:function(e,t,n){var r=n("bl4E"),a=r(Object.keys,Object);e.exports=a},"v/Yj":function(e,t,n){function r(e){return a(function(t,n){var r=-1,a=n.length,i=a>1?n[a-1]:void 0,c=a>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(a--,i):void 0,c&&o(n[0],n[1],c)&&(i=a<3?void 0:i,a=1),t=Object(t);++r<a;){var s=n[r];s&&e(t,s,r,i)}return t})}var a=n("xSSI"),o=n("yHag");e.exports=r},vJqX:function(e,t,n){"use strict";function r(e){return null!=e&&"object"==typeof e}t.a=r},vLgD:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n("ZK8R"),a=n.n(r),o=n("Q1Lf"),i=n.n(o),c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={credentials:"include",method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"}},o=i.a.stringify(t),c=o?e+"?"+o:e;return fetch(c,a()({},r,n)).then(function(e){if(e.status>=400)throw new Error(e.status);return e.json()})}},vW98:function(e,t,n){"use strict";var r=n("ttkw"),a=(n.n(r),n("aMAB")),o=Object(r.connect)(function(e){var t=e.container,n=t.previewPanel.isLayerActive,r=t.layers,a=r.resourceByScreen[r.visibilityScreenID]||{},o=a.isFetching,i=void 0===o||o,c=a.screen,s=void 0===c?{}:c,u=a.error;return{isFetching:i,screen:s,error:void 0===u?"":u,isActive:n}})(a.a);t.a=o},vWVt:function(e,t,n){"use strict";function r(e){return p.has(e)?e:"guest"}var a=n("PpJU"),o=(n.n(a),{teamCid:null,projectCid:null,screenCid:null,userRole:"guest"}),i=Object(a.createStateStore)(o),c=i.getState,s=i.setState,u=i.wrapEntry,l={"current:set":u(function(e,t,n){var a=t.dispatch,o=n.payload,i=o.project,c=o.screen,s=o.userCollaborator;a({type:"reducer:current:update",payload:{teamCid:i&&i.team_cid||null,projectCid:i&&i.cid||null,screenCid:c&&c.cid||null,userRole:r(s&&s.role)}})})},p=new Set(["owner","admin","editor","viewer"]);t.a={entryMap:l,getState:c,setState:s}},vj0c:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(){r(this,e)}return e.prototype.activeWidth=function(){return"portrait"===MB.currentScreen.orientation?Math.round(MB.project().width*MB.scale()/100):Math.round(MB.project().height*MB.scale()/100)},e.prototype.activeHeight=function(){return"portrait"===MB.currentScreen.orientation?Math.round(MB.project().height*MB.scale()/100):Math.round(MB.project().width*MB.scale()/100)},e.prototype.hideScreen=function(e){$(e).hide(),$(e).find(".iframe").each(function(e,t){MB.runner.runnerUtil.setObjectUrl(t,"about:blank")})},e.prototype.doTransition=function(e,t,n,r){var a=this;n.enableTransition(r.delay()),t.enableTransition(r.delay()),r.template&&-1!==e.indexOf("menu")&&(e="none"),$.nextTick(function(){a[e](t,n,r)})},e.prototype.none=function(e,t,n){t.addClass("active"),e.removeClass("active top"),this.hideScreen(e),MB.runner.doneTransition(t)},e.prototype.slideIn=function(e,t,n,r,a,o){var i=this;e.transitionEnd(function(){e.removeClass("active"),t.addClass("active top"),i.hideScreen(e),MB.runner.doneTransition(t)}),e[n](r),t[n](a)},e.prototype.slidebottom=function(e,t,n){this.slideIn(e,t,"translateY",0-this.activeHeight(),0,n)},e.prototype.slideleft=function(e,t,n){this.slideIn(e,t,"translateX",0-this.activeWidth(),0,n)},e.prototype.slidetop=function(e,t,n){this.slideIn(e,t,"translateY",this.activeHeight(),0,n)},e.prototype.slideright=function(e,t,n){this.slideIn(e,t,"translateX",this.activeWidth(),0,n)},e.prototype.slideMenu=function(e,t,n,r,a){t.zindex("2"),e.css("z-index","101"),e.transitionEnd(function(){MB.runner.doneTransition(t)}),e[n](r)},e.prototype.leftmenu=function(e,t,n){this.slideMenu(e,t,"translateX",this.activeWidth()*n.menu_offset/100,n)},e.prototype.rightmenu=function(e,t,n){this.slideMenu(e,t,"translateX",0-this.activeWidth()*n.menu_offset/100,n)},e.prototype.fixedIn=function(e,t,n,r,a){var o=this;t.addClass("top"),t.css("z-index","101"),t.transitionEnd(function(){0===r&&(e.removeClass("active"),t.addClass("active"),o.hideScreen(e)),MB.runner.doneTransition(t),0!==r&&t.css("z-index","101")}),t[n](r)},e.prototype.topin=function(e,t,n){this.fixedIn(e,t,"translateY",0,n)},e.prototype.popin=function(e,t,n){this.fixedIn(e,t,"translateY",0,n)},e.prototype.slideleft2=function(e,t,n){this.fixedIn(e,t,"translateX",0,n)},e.prototype.slideright2=function(e,t,n){this.fixedIn(e,t,"translateX",0,n)},e.prototype.leftdrawer=function(e,t,n){this.fixedIn(e,t,"translateX",this.activeWidth()*(n.menu_offset-100)/100,n)},e.prototype.rightdrawer=function(e,t,n){this.fixedIn(e,t,"translateX",this.activeWidth()*(100-n.menu_offset)/100,n)},e.prototype.fixedOut=function(e,t,n,r,a){var o=this;t.zindex("2"),e.transitionEnd(function(){e.removeClass("active"),t.addClass("active"),o.hideScreen(e),MB.runner.doneTransition(t)}),e[n](r)},e.prototype.leftout=function(e,t,n){this.fixedOut(e,t,"translateX",0-this.activeWidth(),n)},e.prototype.rightout=function(e,t,n){this.fixedOut(e,t,"translateX",this.activeWidth(),n)},e.prototype.topout=function(e,t,n){this.fixedOut(e,t,"translateY",0-this.activeHeight(),n)},e.prototype.popout=function(e,t,n){this.fixedOut(e,t,"translateY",this.activeHeight(),n)},e.prototype.transitionHandler=function(e,t,n,r,a){switch("leftmenu"===e&&t.addClass("menu lmenu"),"rightmenu"===e&&t.addClass("menu rmenu"),"leftdrawer"===e&&n.addClass("drawer ldrawer"),"rightdrawer"===e&&n.addClass("drawer rdrawer"),e){case"popin":case"slidebottom":n.translate(0,a);break;case"topin":case"slidetop":n.translate(0,0-a);break;case"popout":case"none":case"leftout":case"rightout":case"topout":case"leftmenu":case"rightmenu":n.translate(0,0);break;case"slideright":case"slideleft2":case"leftdrawer":n.translate(0-r,0);break;case"slideleft":case"slideright2":case"rightdrawer":n.translate(r,0)}},e}();t.a=a},vvfE:function(e,t,n){function r(e,t,n,r,u,l){var p=n&c,d=e.length,f=t.length;if(d!=f&&!(p&&f>d))return!1;var m=l.get(e);if(m&&l.get(t))return m==t;var h=-1,v=!0,y=n&s?new a:void 0;for(l.set(e,t),l.set(t,e);++h<d;){var b=e[h],g=t[h];if(r)var w=p?r(g,b,h,t,e,l):r(b,g,h,e,t,l);if(void 0!==w){if(w)continue;v=!1;break}if(y){if(!o(t,function(e,t){if(!i(y,t)&&(b===e||u(b,e,n,r,l)))return y.push(t)})){v=!1;break}}else if(b!==g&&!u(b,g,n,r,l)){v=!1;break}}return l.delete(e),l.delete(t),v}var a=n("bf0W"),o=n("OMmE"),i=n("cja7"),c=1,s=2;e.exports=r},vy15:function(e,t){},w7VD:function(e,t,n){function r(e){return function(t,n,r){var c=Object(t);if(!o(t)){var s=a(n,3);t=i(t),n=function(e){return s(c[e],e,c)}}var u=e(t,n,r);return u>-1?c[s?t[u]:u]:void 0}}var a=n("SaYJ"),o=n("nzGo"),i=n("9x5C");e.exports=r},wB9c:function(e,t,n){"use strict";function r(e){var t=e.dispatch,n=void 0===t?MB.webpackInterface.store.dispatch:t,r=e.title,a=e.desc,o=e.isHTML;return new Promise(function(e){return n({type:"container:modal:open",payload:{title:r,desc:a,isHTML:o,canCancel:!0,canConfirm:!0,onCancel:function(){return e(!1)},onConfirm:function(){return e(!0)}}})})}function a(e){var t=e.dispatch,n=void 0===t?MB.webpackInterface.store.dispatch:t,r=e.title,a=e.desc,o=e.isHTML;return new Promise(function(e){return n({type:"container:modal:open",payload:{title:r,desc:a,isHTML:o,canCancel:!1,canConfirm:!0,onConfirm:function(){return e(!0)}}})})}t.b=r,t.a=a,Object.assign(MB,{confirm:r,alert:a})},wC4H:function(e,t,n){function r(e){var t=e.length;return t?e[a(0,t-1)]:void 0}var a=n("rv3C");e.exports=r},wFrT:function(e,t,n){"use strict";var r=n("ttkw"),a=(n.n(r),n("XNJz")),o=n("NX0h"),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c={Alert:Object(r.connect)(function(e){return i({},e.container.alert)})(o.a)};t.a={reducers:a.a,containers:c}},wJQI:function(e,t,n){function r(e,t){for(var n=e.length;n--;)if(a(e[n][0],t))return n;return-1}var a=n("iYZG");e.exports=r},wVGC:function(e,t,n){"use strict";function r(e,t,n){if(!t(e))throw u("error","uncaught at check",n),new Error(n)}function a(e,t){return S.notUndef(e)&&C.call(e,t)}function o(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=p({},e),n=new Promise(function(e,n){t.resolve=e,t.reject=n});return t.promise=n,t}function c(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=void 0,r=new Promise(function(r){n=setTimeout(function(){return r(t)},e)});return r[y]=function(){return clearTimeout(n)},r}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments[3],a={name:n,next:e,throw:t,return:N};return r&&(a[h]=!0),"undefined"!=typeof Symbol&&(a[Symbol.iterator]=function(){return a}),a}function u(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]}function l(e,t){return function(){return e.apply(void 0,arguments)}}n.d(t,"u",function(){return f}),n.d(t,"e",function(){return m}),n.d(t,"b",function(){return v}),n.d(t,"a",function(){return y}),n.d(t,"c",function(){return b}),n.d(t,"d",function(){return g}),n.d(t,"o",function(){return E}),n.d(t,"r",function(){return _}),n.d(t,"l",function(){return O}),t.g=r,n.d(t,"n",function(){return S}),n.d(t,"s",function(){return j}),t.t=o,n.d(t,"f",function(){return x}),t.i=i,t.j=c,n.d(t,"v",function(){return k}),t.q=s,t.p=u,t.k=l,n.d(t,"w",function(){return T}),n.d(t,"m",function(){return P}),n.d(t,"h",function(){return L}),n.d(t,"x",function(){return R});var p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=function(e){return"@@redux-saga/"+e},m=f("TASK"),h=f("HELPER"),v=f("MATCH"),y=f("CANCEL_PROMISE"),b=f("SAGA_ACTION"),g=f("SELF_CANCELLATION"),w=function(e){return function(){return e}},E=w(!0),_=(w(!1),function(){}),O=function(e){return e},C=Object.prototype.hasOwnProperty,S={undef:function(e){return null===e||void 0===e},notUndef:function(e){return null!==e&&void 0!==e},func:function(e){return"function"==typeof e},number:function(e){return"number"==typeof e},string:function(e){return"string"==typeof e},array:Array.isArray,object:function(e){return e&&!S.array(e)&&"object"===(void 0===e?"undefined":d(e))},promise:function(e){return e&&S.func(e.then)},iterator:function(e){return e&&S.func(e.next)&&S.func(e.throw)},iterable:function(e){return e&&S.func(Symbol)?S.func(e[Symbol.iterator]):S.array(e)},task:function(e){return e&&e[m]},observable:function(e){return e&&S.func(e.subscribe)},buffer:function(e){return e&&S.func(e.isEmpty)&&S.func(e.take)&&S.func(e.put)},pattern:function(e){return e&&(S.string(e)||"symbol"===(void 0===e?"undefined":d(e))||S.func(e)||S.array(e))},channel:function(e){return e&&S.func(e.take)&&S.func(e.close)},helper:function(e){return e&&e[h]},stringableFunc:function(e){return S.func(e)&&a(e,"toString")}},j={assign:function(e,t){for(var n in t)a(t,n)&&(e[n]=t[n])}},x={from:function(e){var t=Array(e.length);for(var n in e)a(e,n)&&(t[n]=e[n]);return t}},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(){return++e}}(),M=function(e){throw e},N=function(e){return{value:e,done:!0}},T=function(e,t){return e+" has been deprecated in favor of "+t+", please update your code"},P=function(e){return new Error("\n  redux-saga: Error checking hooks detected an inconsistent state. This is likely a bug\n  in redux-saga code and not yours. Thanks for reporting this in the project's github repo.\n  Error: "+e+"\n")},L=function(e,t){return(e?e+".":"")+"setContext(props): argument "+t+" is not a plain object"},R=function(e){return function(t){return e(Object.defineProperty(t,b,{value:!0}))}}},xHGQ:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("BSVj"),c=n.n(i),s=n("rwcW"),u=n.n(s),l=n("WCZ4"),p=n("d04f"),d=n.n(p),f=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n));return o.setChecked=o.setChecked.bind(o),o.toggle=o.toggle.bind(o),o.state={checked:!!n.checked},o}return o(t,e),t.prototype.componentWillReceiveProps=function(e){"checked"in e&&this.setState({checked:!!e.checked})},t.prototype.setChecked=function(e){"checked"in this.props||this.setState({checked:e}),this.props.onChange(e)},t.prototype.toggle=function(){var e=!this.state.checked;this.setChecked(e)},t.prototype.render=function(){var e=this.props,t=e.icon,n=e.id,r=this.state.checked,a=void 0,o=void 0;return r?(a=d.a.switchOn,o=d.a.innerOn):(a=d.a.switchOff,o=d.a.innerOff),u.a.createElement("span",{id:n,className:a,onClick:this.toggle},u.a.createElement("span",{className:o},u.a.createElement(l.a,{type:"mb",name:t,className:d.a.icon})))},t}(s.Component);f.propTypes={id:c.a.string,icon:c.a.string,checked:c.a.bool,onChange:c.a.func},t.a=f},xLeD:function(e,t){function n(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}e.exports=n},xSSI:function(e,t,n){function r(e,t){return i(o(e,t,a),e+"")}var a=n("67MO"),o=n("lO7+"),i=n("nBAK");e.exports=r},xUX5:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var a,o=n("YKT3"),i=function(e){return e&&e.__esModule?e:{default:e}}(o);a="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var c=(0,i.default)(a);t.default=c}).call(t,n("GKJg"),n("fIxY")(e))},xtak:function(e,t,n){function r(e){if(!i(e)||a(e)!=c)return!1;var t=o(e);if(null===t)return!0;var n=p.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==d}var a=n("S8R4"),o=n("Bm4+"),i=n("79t3"),c="[object Object]",s=Function.prototype,u=Object.prototype,l=s.toString,p=u.hasOwnProperty,d=l.call(Object);e.exports=r},"y/0O":function(e,t,n){"use strict";function r(e){return o.n.channel(e)?"channel":Array.isArray(e)?String(e.map(function(e){return String(e)})):String(e)}function a(e,t){function n(t,n){if(s===c)return i;if(n)throw s=c,n;a&&a(t);var r=e[s](),o=r[0],u=r[1],l=r[2];return s=o,a=l,s===c?i:u}var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"iterator",a=void 0,s=t;return Object(o.q)(n,function(e){return n(null,e)},r,!0)}n.d(t,"b",function(){return c}),t.c=r,t.a=a;var o=n("wVGC"),i={done:!0,value:void 0},c={}},y0p3:function(e,t,n){var r=n("9A19"),a="object"==typeof self&&self&&self.Object===Object&&self,o=r||a||Function("return this")();e.exports=o},y6fY:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("AxSz"),a={"entry:state:init":function(e){var t=e.dispatch;t({type:"user:set",payload:r.a.MB.user||null}),t({type:"teams:refresh"}),t({type:"widgets:refresh"}),t({type:"projects:refresh"}),t({type:"screens:refresh"}),t({type:"comments:refresh"}),t({type:"comment-threads:refresh"}),t({type:"collaborators:refresh"}),t({type:"entry:add-mock-collaborator"}),t({type:"entry:current:set",payload:{project:r.a.MB.currentProject,screen:r.a.MB.currentScreen}})},"entry:state:clear":function(e){e.dispatch},"entry:sync-runner:set-screen":function(e,t){var n=e.dispatch,a=e.getState,o=t.payload.cid;n({type:"entry:current:set-screen",payload:{cid:o}}),a().container.previewPanel.isLayerActive&&n({type:"SET_VISIBILITY_SCREEN",payload:{screenID:o}}),r.a.MB.runner.loadScreen(o)},"entry:refresh:team-related":function(e){var t=e.dispatch;t({type:"teams:refresh"}),t({type:"collaborators:refresh"}),t({type:"entry:add-mock-collaborator"}),t({type:"entry:current:set",payload:{project:r.a.MB.currentProject,screen:r.a.MB.currentScreen}})},"entry:refresh:project-related":function(e){var t=e.dispatch;t({type:"projects:refresh"}),t({type:"screens:refresh"}),t({type:"widgets:refresh"}),t({type:"comments:refresh"}),t({type:"comment-threads:refresh"}),t({type:"collaborators:refresh"}),t({type:"entry:add-mock-collaborator"}),t({type:"entry:current:set",payload:{project:r.a.MB.currentProject,screen:r.a.MB.currentScreen}})},"entry:listpage:toggle:order":function(e){var t=e.dispatch,n=e.getState,a=r.a.MB.preference(),o=n().container.listpage.order,i=void 0;o?(i="asc"===o?"desc":"asc",a.app_order=i,a.lsave()):i=a.app_order,t({type:"container:listpage:set:order",payload:{order:i}})},"entry:focus-element":function(e,t){var n=e.dispatch,r=t.payload,a=r.focusType,o=r.element;return o&&setTimeout(function(){switch(a){case"normal":return o.focus&&o.focus();case"external":return n({type:"entry:webpack-interface:observer:call",payload:{key:"focus-method:request-focus",args:[o]}}),o.focus&&o.focus()}},100),!0},"entry:layer:set:active":function(e,t){var n=e.dispatch,a=e.getState,o=t.payload.isActive,i=a(),c=i.container.previewPanel;if(c.isLayerActive!==o){var s=o||c.isCommentActive?"immersive":"default";s!==r.a.MB.runner.mode&&(r.a.MB.runner.mode=s,r.a.MB.runner.reload(!0)),n({type:"reducer:preview-panel:update",payload:{isLayerActive:o}}),n({type:"SET_VISIBILITY_SCREEN",payload:{screenID:r.a.MB.currentScreen.cid}})}},"entry:comment:set:active":function(e,t){var n=e.dispatch,a=e.getState,o=t.payload.isActive,i=a(),c=i.container.previewPanel;if(c.isCommentActive!==o){var s=o||c.isLayerActive?"immersive":"default";s!==r.a.MB.runner.mode&&(r.a.MB.runner.mode=s,r.a.MB.runner.reload(!0)),n({type:"reducer:preview-panel:update",payload:{isCommentActive:o}})}},"container:comment:select":function(e,t){var n=e.dispatch,r=e.getState,a=t.payload.select,o=r(),i=o.model,c=i.comments,s=i.commentThreads,u=o.container,l=s.find(function(e){return e.cid===u.comment.select});l&&a!==u.comment.select&&!c.find(function(e){return e.thread_cid===l.cid})&&n({type:"entry:comment-threads:delete",payload:l})},"entry:preview:clear":function(e,t){var n=e.dispatch;r.a.MB.runner.mode="default",n({type:"reducer:preview-panel:reset"}),n({type:"container:layers:clear"})}}},"yD+I":function(e,t,n){"use strict";var r=n("PpJU"),a=(n.n(r),n("DZQR")),o=a.a.ProjectAlike,i=[],c=Object(r.createStateStore)(i),s=c.getState,u=c.setState,l=c.wrapEntry,p=function(e,t){return l(function(n,r,a){var o=r.dispatch,i=a&&a.payload;o({type:"reducer:projects:update",payload:e(n,i,t)})})},d={"projects:refresh":p(o.refreshStateList,!1),"projects:add":p(o.addState,!1),"projects:add-local":p(o.addState,!0),"projects:update":p(o.updateState,!1),"projects:update-local":p(o.updateState,!0),"projects:delete":p(o.deleteState,!1),"projects:delete-local":p(o.deleteState,!0)};t.a={entryMap:d,getState:s,setState:u}},yGXk:function(e,t,n){"use strict";var r=n("Kpcs"),a=n("sZxb"),o=n("kJQT"),i=n("wVGC");n.d(t,"a",function(){return r.a}),n.d(t,"b",function(){return a.a}),n.d(t,"c",function(){return o.a});var c=function(e){return"import { "+e+" } from 'redux-saga' has been deprecated in favor of import { "+e+" } from 'redux-saga/effects'.\nThe latter will not work with yield*, as helper effects are wrapped automatically for you in fork effect.\nTherefore yield "+e+" will return task descriptor to your saga and execute next lines of code."};r.a,a.a,o.a},yHag:function(e,t){function n(){return!1}e.exports=n},"yZ+L":function(e,t,n){"use strict";function r(e,t){if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=Object.prototype.hasOwnProperty,o=0;o<n.length;o++)if(!a.call(t,n[o])||e[n[o]]!==t[n[o]])return!1;return!0}t.__esModule=!0,t.default=r},zVs0:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(){r(this,e),this.store=null,this.viewMap={},this.observerMap={}}return e.prototype.setStore=function(e){this.store=e},e.prototype.callObserver=function(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return this.observerMap[e]&&(t=this.observerMap)[e].apply(t,[e].concat(r))},e.prototype.setObserver=function(e,t){this.observerMap[e]=t},e.prototype.setView=function(e,t){this.viewMap[e]=t},e.prototype.callViewMethod=function(e,t){for(var n,r=this.viewMap[e],a=arguments.length,o=Array(a>2?a-2:0),i=2;i<a;i++)o[i-2]=arguments[i];return r&&r[t]?(this.callObserver("view:"+e+":"+t),r[t].apply(r,[this.store].concat(o))):(n=console).warn.apply(n,["[WebpackInterface][callViewMethod] missed",e,t].concat(o))},e.prototype.init=function(){this.callObserver("init"),this.store&&this.store.dispatch({type:"entry:state:init"})},e.prototype.clear=function(){this.store&&this.store.dispatch({type:"entry:state:clear"}),this.callObserver("clear")},e}();t.a=a},zwaY:function(e,t){e.exports={checkbox:"cCWGaIq429ouRCKAQ6NAm",disabled:"_1tg9fU6ejmKA7wsMhRcty4",checker:"_1IQFqC5m_rsd9HjhdZwRHh",checked:"VjMVVdQu2mDdUDCQVWdiC"}}});